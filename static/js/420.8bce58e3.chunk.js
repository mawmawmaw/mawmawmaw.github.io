"use strict";(self.webpackChunkmawmawmaw=self.webpackChunkmawmawmaw||[]).push([[420],{4420:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Q});var r=s(5043),n=s(579);const a=()=>(0,n.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:[(0,n.jsx)("path",{d:"M10 3L5 8l5 5V3z"}),(0,n.jsx)("rect",{x:"3",y:"7",width:"8",height:"2"})]}),o=()=>(0,n.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:[(0,n.jsx)("path",{d:"M6 3l5 5-5 5V3z"}),(0,n.jsx)("rect",{x:"5",y:"7",width:"8",height:"2"})]}),i=()=>(0,n.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,n.jsx)("path",{d:"M14 8a6 6 0 0 1-6 6 6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 5.5 3.5",strokeLinecap:"round"}),(0,n.jsx)("polyline",{points:"11 2 14 2 14 5"})]}),l=()=>(0,n.jsx)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:(0,n.jsx)("rect",{x:"4",y:"4",width:"8",height:"8"})}),c=()=>(0,n.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:[(0,n.jsx)("path",{d:"M2 8l6-5 6 5v5a1 1 0 0 1-1 1H9v-4H7v4H3a1 1 0 0 1-1-1V8z"}),(0,n.jsx)("polygon",{points:"8,1 1,7 2,8 8,3 14,8 15,7"})]}),d=e=>{let{currentSection:t,children:s,onNavigate:d,onClose:h,onOpen:u,isMobile:m=!1,browserOpen:p=!0}=e;const[g,f]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"browser-window ".concat(g?"maximized":""),children:[(0,n.jsxs)("div",{className:"browser-titlebar",children:[(0,n.jsxs)("div",{className:"browser-titlebar-text",children:[(0,n.jsx)("span",{className:"browser-icon",children:"\ud83c\udf10"}),(x=t,{"":"Welcome to Maw.dev - Web Explorer","goTo-about":"About Me - Web Explorer","goTo-work":"Tech Stack - Web Explorer","goTo-portfolio":"Portfolio Gallery - Web Explorer","goTo-contact":"Contact Form - Web Explorer"}[x]||"Maw.dev - Web Explorer")]}),(0,n.jsxs)("div",{className:"browser-titlebar-controls",children:[(0,n.jsx)("button",{className:"titlebar-button minimize","aria-label":"Minimize",onClick:()=>{m&&(g?(f(!1),null===h||void 0===h||h()):p&&(null===h||void 0===h||h()))},children:"_"}),(0,n.jsx)("button",{className:"titlebar-button maximize","aria-label":"Maximize",onClick:()=>{m&&!p?(null===u||void 0===u||u(),setTimeout(()=>f(!0),300)):f((!m||!g)&&!g)},children:"\u25a1"}),(0,n.jsx)("button",{className:"titlebar-button close","aria-label":"Close",onClick:()=>{(m||g)&&m&&(f(!1),null===h||void 0===h||h())},children:"\xd7"})]})]}),(0,n.jsxs)("div",{className:"browser-menubar",children:[(0,n.jsx)("span",{className:"menu-item",children:"File"}),(0,n.jsx)("span",{className:"menu-item",children:"Edit"}),(0,n.jsx)("span",{className:"menu-item",children:"View"}),(0,n.jsx)("span",{className:"menu-item",children:"Favorites"}),(0,n.jsx)("span",{className:"menu-item",children:"Tools"}),(0,n.jsx)("span",{className:"menu-item",children:"Help"})]}),(0,n.jsxs)("div",{className:"browser-navbar",children:[(0,n.jsxs)("div",{className:"nav-buttons",children:[(0,n.jsx)("button",{className:"nav-button back",onClick:()=>{d("")},disabled:""===t,"aria-label":"Back",children:(0,n.jsx)(a,{})}),(0,n.jsx)("button",{className:"nav-button forward",disabled:!0,"aria-label":"Forward",children:(0,n.jsx)(o,{})}),(0,n.jsx)("button",{className:"nav-button refresh","aria-label":"Refresh",children:(0,n.jsx)(i,{})}),(0,n.jsx)("button",{className:"nav-button stop","aria-label":"Stop",children:(0,n.jsx)(l,{})}),(0,n.jsx)("button",{className:"nav-button home",onClick:()=>{d("")},"aria-label":"Home",children:(0,n.jsx)(c,{})})]}),(0,n.jsx)("div",{className:"nav-addressbar",children:(0,n.jsx)("input",{type:"text",value:(e=>({"":"http://maw.dev/index.html","goTo-about":"http://maw.dev/about-me.htm","goTo-work":"http://maw.dev/work/tech-stack.html","goTo-portfolio":"http://maw.dev/portfolio/gallery.cgi","goTo-contact":"http://maw.dev/contact/guestbook.php"}[e]||"http://maw.dev/"))(t),readOnly:!0,className:"addressbar-input"})}),(0,n.jsx)("button",{className:"nav-button go",children:"Go"})]}),(0,n.jsx)("div",{className:"browser-content",children:(0,n.jsx)("div",{className:"browser-viewport",children:s})}),(0,n.jsxs)("div",{className:"browser-statusbar",children:[(0,n.jsx)("div",{className:"status-text",children:"Done"}),(0,n.jsxs)("div",{className:"status-icons",children:[(0,n.jsx)("span",{className:"status-icon",children:"\ud83d\udd12"}),(0,n.jsx)("span",{className:"status-zone",children:"Internet"})]})]})]});var x},h=e=>{let{title:t,icon:s,color:r,gradientFrom:a,gradientTo:o,onClick:i,description:l,disabled:c=!1}=e;const d=a&&o?{background:"linear-gradient(135deg, ".concat(a," 0%, ").concat(o," 100%)")}:{backgroundColor:r||"#4b5563"};return(0,n.jsxs)("button",{onClick:i,disabled:c,className:"game-card",style:d,children:[(0,n.jsx)("div",{className:"game-card-overlay"}),(0,n.jsxs)("div",{className:"game-card-content",children:[s&&(0,n.jsx)("div",{className:"game-card-icon",children:s}),(0,n.jsx)("h3",{className:"game-card-title",children:t}),l&&(0,n.jsx)("p",{className:"game-card-description",children:l})]}),(0,n.jsx)("div",{className:"game-card-accent-top",children:(0,n.jsx)("div",{className:"game-card-accent-triangle"})}),(0,n.jsx)("div",{className:"game-card-accent-bottom"})]})},u=e=>{let{type:t,title:s,message:a,score:o,level:i,brandColor:l="#00d26a",onAction:c,actionText:d,customContent:h,showPressToStart:u=!0}=e;const[m,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(u&&"start"===t){const e=setInterval(()=>{p(e=>!e)},500);return()=>clearInterval(e)}},[u,t]);const g=s||{start:"\ud83c\udfae LISTO PARA JUGAR",pause:"\u23f8\ufe0f PAUSA",gameOver:"\ud83e\udd73 GAME OVER",levelComplete:"\ud83c\udf89 \xa1NIVEL COMPLETADO!",custom:""}[t];return(0,n.jsxs)("div",{className:"game-overlay",children:[(0,n.jsx)("div",{className:"game-overlay-bg"}),(0,n.jsxs)("div",{className:"game-overlay-card",children:[(0,n.jsx)("div",{className:"game-overlay-glow",style:{backgroundColor:l}}),(0,n.jsxs)("div",{className:"game-overlay-content",children:[g&&(0,n.jsx)("h2",{className:"game-overlay-title",children:g}),void 0!==o&&(0,n.jsxs)("div",{className:"game-overlay-score",children:[(0,n.jsx)("p",{className:"game-overlay-score-label",children:"Puntuaci\xf3n Final"}),(0,n.jsx)("p",{className:"game-overlay-score-value",children:o.toLocaleString()})]}),void 0!==i&&"levelComplete"===t&&(0,n.jsxs)("div",{className:"game-overlay-level",children:[(0,n.jsx)("p",{className:"game-overlay-level-label",children:"Nivel"}),(0,n.jsx)("p",{className:"game-overlay-level-value",children:i})]}),a&&(0,n.jsx)("p",{className:"game-overlay-message",children:a}),h,"start"===t&&u&&!c?(0,n.jsx)("p",{className:"game-overlay-blink",style:{color:l,opacity:m?1:0},children:"PRESIONA ESPACIO PARA COMENZAR"}):c&&d?(0,n.jsx)("button",{onClick:c,className:"game-overlay-button",style:{backgroundColor:l},children:d}):null]})]})]})};var m=s(9379);const p=37,g=38,f=39,x=40,b=65,y=68,v=83,w=87,S={NONE:0,SHORT:25,MEDIUM:50,LONG:100},j={NONE:0,LOW:20,MEDIUM:40,HIGH:60},L={NONE:0,EASY:2,MEDIUM:4,HARD:6},M={SKY:"#72D7EE",TREE:"#005108",FOG:"#005108",LIGHT:{road:"#6B6B6B",grass:"#10AA10",rumble:"#555555",lane:"#CCCCCC"},DARK:{road:"#696969",grass:"#009A00",rumble:"#BBBBBB"},START:{road:"white",grass:"white",rumble:"white"},FINISH:{road:"black",grass:"black",rumble:"black"}},C={x:5,y:5,w:1280,h:480},I={x:5,y:495,w:1280,h:480},D={x:5,y:985,w:1280,h:480},E={PALM_TREE:{x:5,y:5,w:215,h:540},BILLBOARD08:{x:230,y:5,w:385,h:265},TREE1:{x:625,y:5,w:360,h:360},DEAD_TREE1:{x:5,y:555,w:135,h:332},BILLBOARD09:{x:150,y:555,w:328,h:282},BOULDER3:{x:230,y:280,w:320,h:220},COLUMN:{x:995,y:5,w:200,h:315},BILLBOARD01:{x:625,y:375,w:300,h:170},BILLBOARD06:{x:488,y:555,w:298,h:190},BILLBOARD05:{x:5,y:897,w:298,h:190},BILLBOARD07:{x:313,y:897,w:298,h:190},BOULDER2:{x:621,y:897,w:298,h:140},TREE2:{x:1205,y:5,w:282,h:295},BILLBOARD04:{x:1205,y:310,w:268,h:170},DEAD_TREE2:{x:1205,y:490,w:150,h:260},BOULDER1:{x:1205,y:760,w:168,h:248},BUSH1:{x:5,y:1097,w:240,h:155},CACTUS:{x:929,y:897,w:235,h:118},BUSH2:{x:255,y:1097,w:232,h:152},BILLBOARD03:{x:5,y:1262,w:230,h:220},BILLBOARD02:{x:245,y:1262,w:215,h:220},STUMP:{x:995,y:330,w:195,h:140},SEMI:{x:1365,y:490,w:122,h:144},TRUCK:{x:1365,y:644,w:100,h:78},CAR03:{x:1383,y:760,w:88,h:55},CAR02:{x:1383,y:825,w:80,h:59},CAR04:{x:1383,y:894,w:80,h:57},CAR01:{x:1205,y:1018,w:80,h:56},PLAYER_UPHILL_LEFT:{x:1383,y:961,w:80,h:45},PLAYER_UPHILL_STRAIGHT:{x:1295,y:1018,w:80,h:45},PLAYER_UPHILL_RIGHT:{x:1385,y:1018,w:80,h:45},PLAYER_RIGHT:{x:995,y:480,w:80,h:41},PLAYER_STRAIGHT:{x:1085,y:480,w:80,h:41},PLAYER_LEFT:{x:995,y:531,w:80,h:41},COIN:{x:1395,y:1092,w:60,h:60}},R=(0,m.A)((0,m.A)({},E),{},{SCALE:1/E.PLAYER_STRAIGHT.w*.3,BILLBOARDS:[E.BILLBOARD01,E.BILLBOARD02,E.BILLBOARD03,E.BILLBOARD04,E.BILLBOARD05,E.BILLBOARD06,E.BILLBOARD07,E.BILLBOARD08,E.BILLBOARD09],PLANTS:[E.TREE1,E.TREE2,E.DEAD_TREE1,E.DEAD_TREE2,E.PALM_TREE,E.BUSH1,E.BUSH2,E.CACTUS,E.STUMP,E.BOULDER1,E.BOULDER2,E.BOULDER3],CARS:[E.CAR01,E.CAR02,E.CAR03,E.CAR04,E.SEMI,E.TRUCK]}),k={fps:60,width:720,height:960,roadWidth:2e3,segmentLength:200,rumbleLength:3,lanes:3,fieldOfView:100,cameraHeight:1e3,drawDistance:300,fogDensity:5,centrifugal:.3,skySpeed:.001,hillSpeed:.002,treeSpeed:.003,totalCars:200};class T{static timestamp(){return performance.now()}static toInt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!==e&&void 0!==e){const t=parseInt(e,10);if(!isNaN(t))return t}return t}static toFloat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!==e&&void 0!==e){const t=parseFloat(e);if(!isNaN(t))return t}return t}static limit(e,t,s){return Math.max(t,Math.min(e,s))}static randomInt(e,t){return Math.round(this.interpolate(e,t,Math.random()))}static randomChoice(e){return e[this.randomInt(0,e.length-1)]}static percentRemaining(e,t){return e%t/t}static accelerate(e,t,s){return e+t*s}static interpolate(e,t,s){return e+(t-e)*s}static easeIn(e,t,s){return e+(t-e)*Math.pow(s,2)}static easeOut(e,t,s){return e+(t-e)*(1-Math.pow(1-s,2))}static easeInOut(e,t,s){return e+(t-e)*(-Math.cos(s*Math.PI)/2+.5)}static exponentialFog(e,t){return 1/Math.pow(Math.E,e*e*t)}static increase(e,t,s){let r=e+t;for(;r>=s;)r-=s;for(;r<0;)r+=s;return r}static overlap(e,t,s,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const a=.5*n,o=.5*n;return!(e+t*a<s-r*o||e-t*a>s+r*o)}static project(e,t,s,r,n,a,o,i){e.camera.x=(e.world.x||0)-t,e.camera.y=(e.world.y||0)-s,e.camera.z=(e.world.z||0)-r,e.screen.scale=n/e.camera.z,e.screen.x=Math.round(a/2+e.screen.scale*e.camera.x*a/2),e.screen.y=Math.round(o/2-e.screen.scale*e.camera.y*o/2),e.screen.w=Math.round(e.screen.scale*i*a/2)}}Math.PI,Math.PI;class A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;this.segments=[],this.segmentLength=void 0,this.rumbleLength=void 0,this.trackLength=0,this.billboardPlacements=new Map,this.billboardImpressions=new Map,this.billboardInstances=new Map,this.nextBillboardId=0,this.segmentLength=e,this.rumbleLength=t}getSegments(){return this.segments}getTrackLength(){return this.trackLength}getBillboardPlacements(){return new Map(this.billboardPlacements)}getBillboardImpressions(){return new Map(this.billboardImpressions)}recordBillboardImpression(e,t,s,r){const n=this.billboardInstances.get(s);if(!n)return;const a=n.find(s=>s.segmentIndex===e&&Math.abs(s.offset-t)<.1);if(a&&!a.seenInLaps.has(r)){a.seenInLaps.add(r);const e=this.billboardImpressions.get(s)||0;this.billboardImpressions.set(s,e+1)}}getBillboardStats(e){const t={},s={},r={};this.billboardPlacements.forEach((s,n)=>{t[n]=s,r[n]=s*e}),this.billboardImpressions.forEach((e,t)=>{s[t]=e});const n=Math.round(.65*this.segments.length);return{placements:t,impressions:s,maxPossibleImpressions:r,trackLength:n,totalSegments:this.segments.length,totalLaps:e}}findSegment(e){return this.segments[Math.floor(e/this.segmentLength)%this.segments.length]}lastY(){return 0===this.segments.length?0:this.segments[this.segments.length-1].p2.world.y}addSegment(e,t){const s=this.segments.length;this.segments.push({index:s,p1:{world:{y:this.lastY(),z:s*this.segmentLength},camera:{x:0,y:0,z:0},screen:{x:0,y:0,w:0,scale:0}},p2:{world:{y:t,z:(s+1)*this.segmentLength},camera:{x:0,y:0,z:0},screen:{x:0,y:0,w:0,scale:0}},curve:e,sprites:[],cars:[],color:Math.floor(s/this.rumbleLength)%2?M.DARK:M.LIGHT})}addSprite(e,t,s){if(this.segments[e]){const r={source:t,offset:s},n=this.getBillboardName(t);if(n){const t="".concat(n,"_").concat(this.nextBillboardId++);r.billboardId=t,this.billboardInstances.has(n)||this.billboardInstances.set(n,[]),this.billboardInstances.get(n).push({segmentIndex:e,offset:s,seenInLaps:new Set})}this.segments[e].sprites.push(r)}}addRoad(e,t,s,r,n){const a=this.lastY(),o=a+T.toInt(n,0)*this.segmentLength,i=e+t+s;for(let l=0;l<e;l++)this.addSegment(T.easeIn(0,r,l/e),T.easeInOut(a,o,l/i));for(let l=0;l<t;l++)this.addSegment(r,T.easeInOut(a,o,(e+l)/i));for(let l=0;l<s;l++)this.addSegment(T.easeInOut(r,0,l/s),T.easeInOut(a,o,(e+t+l)/i))}addStraight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.MEDIUM;this.addRoad(e,e,e,0,0)}addHill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.MEDIUM,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.MEDIUM;this.addRoad(e,e,e,0,t)}addCurve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.MEDIUM,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.MEDIUM,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.NONE;this.addRoad(e,e,e,t,s)}addLowRollingHills(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.SHORT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.LOW;this.addRoad(e,e,e,0,t/2),this.addRoad(e,e,e,0,-t),this.addRoad(e,e,e,L.EASY,t),this.addRoad(e,e,e,0,0),this.addRoad(e,e,e,-L.EASY,t/2),this.addRoad(e,e,e,0,0)}addSCurves(){this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,-L.EASY,j.NONE),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,L.MEDIUM,j.MEDIUM),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,L.EASY,-j.LOW),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,-L.EASY,j.MEDIUM),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,-L.MEDIUM,-j.MEDIUM)}addBumps(){this.addRoad(10,10,10,0,5),this.addRoad(10,10,10,0,-2),this.addRoad(10,10,10,0,-5),this.addRoad(10,10,10,0,8),this.addRoad(10,10,10,0,5),this.addRoad(10,10,10,0,-7),this.addRoad(10,10,10,0,5),this.addRoad(10,10,10,0,-2)}addDownhillToEnd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;this.addRoad(e,e,e,-L.EASY,-this.lastY()/this.segmentLength)}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(this.segments=[],e){case 1:this.addStraight(S.LONG),this.addCurve(S.SHORT,L.EASY,j.NONE),this.addStraight(2*S.LONG),this.addCurve(S.SHORT,-L.EASY,j.NONE),this.addStraight(S.LONG),this.addHill(S.MEDIUM,j.LOW),this.addStraight(S.LONG),this.addCurve(S.MEDIUM,L.MEDIUM,j.NONE),this.addStraight(2*S.LONG),this.addCurve(S.SHORT,-L.HARD,j.NONE),this.addStraight(S.MEDIUM),this.addDownhillToEnd();break;case 2:this.addHill(S.SHORT,j.MEDIUM),this.addCurve(S.MEDIUM,L.HARD,j.HIGH),this.addHill(S.LONG,-j.MEDIUM),this.addSCurves(),this.addHill(S.MEDIUM,j.HIGH),this.addCurve(S.LONG,-L.MEDIUM,-j.LOW),this.addBumps(),this.addHill(S.LONG,j.MEDIUM),this.addCurve(S.MEDIUM,L.EASY,-j.HIGH),this.addSCurves(),this.addHill(S.SHORT,-j.MEDIUM),this.addDownhillToEnd();break;case 3:this.addStraight(S.SHORT),this.addSCurves(),this.addCurve(S.MEDIUM,L.HARD,j.NONE),this.addCurve(S.MEDIUM,-L.HARD,j.NONE),this.addSCurves(),this.addCurve(S.SHORT,L.EASY,j.LOW),this.addCurve(S.SHORT,-L.EASY,-j.LOW),this.addBumps(),this.addSCurves(),this.addCurve(S.LONG,L.MEDIUM,j.MEDIUM),this.addStraight(S.SHORT),this.addSCurves(),this.addDownhillToEnd();break;default:this.addStraight(S.SHORT),this.addLowRollingHills(),this.addSCurves(),this.addCurve(S.MEDIUM,L.MEDIUM,j.LOW),this.addBumps(),this.addLowRollingHills(),this.addCurve(2*S.LONG,L.MEDIUM,j.MEDIUM),this.addStraight(),this.addHill(S.MEDIUM,j.HIGH),this.addSCurves(),this.addCurve(S.LONG,-L.MEDIUM,j.NONE),this.addHill(S.LONG,j.HIGH),this.addCurve(S.LONG,L.MEDIUM,-j.LOW),this.addBumps(),this.addHill(S.LONG,-j.MEDIUM),this.addStraight(),this.addSCurves(),this.addDownhillToEnd()}this.resetSprites();const s=this.findSegment(t);this.segments[s.index+2].color=M.START,this.segments[s.index+3].color=M.START;for(let r=0;r<this.rumbleLength;r++)this.segments[this.segments.length-1-r].color=M.FINISH;this.trackLength=this.segments.length*this.segmentLength}resetSprites(){this.billboardPlacements.clear(),this.billboardImpressions.clear(),this.billboardInstances.clear(),this.nextBillboardId=0;for(let t=20;t<this.segments.length-50;t+=60){const e=T.randomChoice([...R.BILLBOARDS]),s=this.getBillboardName(e);if(s){const e=this.billboardPlacements.get(s)||0;this.billboardPlacements.set(s,e+1)}this.addSprite(t+T.randomInt(0,50),e,T.randomChoice([1,-1,1.1,-1.1,1.2,-1.2]));for(let r=0;r<20;r++)this.addSprite(t+T.randomInt(0,50),T.randomChoice([...R.PLANTS]),T.randomChoice([1.1,-1.1])*(1+Math.random()))}for(let t=10;t<this.segments.length;t+=3+Math.floor(t/100))this.addSprite(t,T.randomChoice([...R.PLANTS]),T.randomChoice([1,-1])*(1+5*Math.random()));for(let t=120;t<this.segments.length;t+=30+Math.floor(t/20))this.addSprite(t,R.COLUMN,T.randomChoice([1,-1])*(1+5*Math.random()));const e=[-.5,0,.5];for(let t=0;t<this.segments.length;t+=30)this.addSprite(t,R.COIN,T.randomChoice(e))}removeAllCoins(){for(const e of this.segments)e.sprites=e.sprites.filter(e=>e.source!==R.COIN)}resetCars(e,t){for(const r of this.segments)r.cars=[];const s=[];for(let r=0;r<e;r++){const e=Math.random()*T.randomChoice([-.8,.8]),r=Math.floor(Math.random()*this.segments.length)*this.segmentLength,n=T.randomChoice([...R.CARS]),a={offset:e,z:r,sprite:n,speed:t/4+Math.random()*t/(n===R.SEMI?4:2),percent:T.percentRemaining(r,this.segmentLength)};this.findSegment(a.z).cars.push(a),s.push(a)}return s}getBillboardName(e){return e===R.BILLBOARD01?"BILLBOARD01":e===R.BILLBOARD02?"BILLBOARD02":e===R.BILLBOARD03?"BILLBOARD03":e===R.BILLBOARD04?"BILLBOARD04":e===R.BILLBOARD05?"BILLBOARD05":e===R.BILLBOARD06?"BILLBOARD06":e===R.BILLBOARD07?"BILLBOARD07":e===R.BILLBOARD08?"BILLBOARD08":e===R.BILLBOARD09?"BILLBOARD09":null}}class N{constructor(e){this.maxSpeed=void 0,this.accel=void 0,this.breaking=void 0,this.decel=void 0,this.offRoadDecel=void 0,this.offRoadLimit=void 0,this.centrifugal=void 0,this.trackLength=void 0,this.maxSpeed=e.maxSpeed,this.accel=e.accel,this.breaking=e.breaking,this.decel=e.decel,this.offRoadDecel=e.offRoadDecel,this.offRoadLimit=e.offRoadLimit,this.centrifugal=e.centrifugal,this.trackLength=e.trackLength}updateTrackLength(e){this.trackLength=e}updatePlayer(e,t,s,r,n,a,o){let i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:720,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:960;const c=R.PLAYER_STRAIGHT.w*R.SCALE,d=t/this.maxSpeed,h=2*a*d;let u,m,p=0,g=!1;if(r.left?e-=h:r.right&&(e+=h),e-=h*d*n.curve*this.centrifugal,t=r.faster?T.accelerate(t,this.accel,a):r.slower?T.accelerate(t,this.breaking,a):T.accelerate(t,this.decel,a),e<-1||e>1){t>this.offRoadLimit&&(t=T.accelerate(t,this.offRoadDecel,a));for(const r of n.sprites){const a=r.source.w*R.SCALE;if(T.overlap(e,c,r.offset+a/2*(r.offset>0?1:-1),a)){t=this.maxSpeed/5,s=T.increase(n.p1.world.z,-c,this.trackLength);break}}}for(let f=n.sprites.length-1;f>=0;f--){const s=n.sprites[f];if(s.source===R.COIN){const r=s.source.w*R.SCALE;T.overlap(e,c,s.offset+r/10*(s.offset>0?1:-1),r)&&(u={x:i/2+s.offset*i*.3,y:l/2-100},n.sprites.splice(f,1),p=Math.round(t/1e3))}}for(const f of n.cars){const r=f.sprite.w*R.SCALE;if(t>f.speed&&T.overlap(e,c,f.offset,r,.6)){t=f.speed*(f.speed/t),s=T.increase(f.z,-c,this.trackLength),p=-3,g=!0,m={x:i/2+f.offset*i*.3,y:l/2-50};break}}return{playerX:e=T.limit(e,-3,3),speed:t=T.limit(t,0,this.maxSpeed),position:s,pointsEarned:p,crashed:g,coinCollected:u,crashPosition:m}}updateCars(e,t,s,r,n,a,o,i){const l=R.PLAYER_STRAIGHT.w*R.SCALE;for(const c of e){const e=o(c.z);c.z=T.increase(c.z,t*c.speed,this.trackLength),c.percent=T.percentRemaining(c.z,200),c.offset+=this.updateCarOffset(c,e,s,l,r,n,a,i);const d=o(c.z);if(e!==d){const t=e.cars.indexOf(c);-1!==t&&(e.cars.splice(t,1),d.cars.push(c))}}}updateCarOffset(e,t,s,r,n,a,o,i){const l=e.sprite.w*R.SCALE;if(t.index-s.index>o)return 0;for(let c=1;c<20;c++){const o=i[(t.index+c)%i.length];if(o===s&&e.speed>a&&T.overlap(n,r,e.offset,l,1.2)){return 1*this.calculateAvoidanceDirection(n,e.offset)/c*(e.speed-a)/this.maxSpeed}for(const t of o.cars){const s=t.sprite.w*R.SCALE;if(e.speed>t.speed&&T.overlap(e.offset,l,t.offset,s,1.2)){return 1*this.calculateAvoidanceDirection(t.offset,e.offset)/c*(e.speed-t.speed)/this.maxSpeed}}}return e.offset<-.9?.1:e.offset>.9?-.1:0}calculateAvoidanceDirection(e,t){return e>.5?-1:e<-.5||t>e?1:-1}updateScrollOffsets(e,t,s,r,n,a,o,i,l,c){const d=a-n;return{skyOffset:e=T.increase(e,i*r.curve*d/o,1),hillOffset:t=T.increase(t,l*r.curve*d/o,1),treeOffset:s=T.increase(s,c*r.curve*d/o,1)}}}class O{constructor(e,t,s){this.ctx=void 0,this.width=void 0,this.height=void 0,this.resolution=void 0,this.cameraDepth=.84,this.ctx=e,this.width=t,this.height=s,this.resolution=s/480}setCameraDepth(e){this.cameraDepth=e}updateDimensions(e,t){this.width=e,this.height=t,this.resolution=t/480}clear(){this.ctx.clearRect(0,0,this.width,this.height)}polygon(e,t,s,r,n,a,o,i,l){this.ctx.fillStyle=l,this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(s,r),this.ctx.lineTo(n,a),this.ctx.lineTo(o,i),this.ctx.closePath(),this.ctx.fill()}segment(e,t,s,r,n,a,o,i,l){const c=this.rumbleWidth(r,e),d=this.rumbleWidth(o,e),h=this.laneMarkerWidth(r,e),u=this.laneMarkerWidth(o,e);if(this.ctx.fillStyle=l.grass,this.ctx.fillRect(0,a,this.width,s-a),this.polygon(t-r-c,s,t-r,s,n-o,a,n-o-d,a,l.rumble),this.polygon(t+r+c,s,t+r,s,n+o,a,n+o+d,a,l.rumble),this.polygon(t-r,s,t+r,s,n+o,a,n-o,a,l.road),l.lane){const i=2*r/e,c=2*o/e;let d=t-r+i,m=n-o+c;for(let t=1;t<e;t++)this.polygon(d-h/2,s,d+h/2,s,m+u/2,a,m-u/2,a,l.lane),d+=i,m+=c}this.fog(0,s,this.width,a-s,i)}background(e,t,s,r){s=s||0,r=r||0;const n=t.w/2,a=t.h,o=t.x+Math.floor(t.w*s)%t.w,i=t.y,l=Math.min(n,t.w-(o-t.x)),c=a,d=Math.floor(r),h=Math.floor(this.width*(l/n)),u=this.height;this.ctx.drawImage(e,o,i,l,c,0,d,h,u),l<n&&this.ctx.drawImage(e,t.x,i,n-l,c,h-1,d,this.width-h,u)}sprite(e,t,s,r,n,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8?arguments[8]:void 0;const c=s.w*r*this.width/2*(R.SCALE*e),d=s.h*r*this.width/2*(R.SCALE*e);n+=c*o,a+=d*i;const h=l?Math.max(0,a+d-l):0;h<d&&this.ctx.drawImage(t,s.x,s.y,s.w,s.h-s.h*h/d,n,a,c,d-h)}player(e,t,s,r,n,a,o,i){const l=1.5*Math.random()*s*this.resolution*T.randomChoice([-1,1]);let c;c=o<0?i>0?R.PLAYER_UPHILL_LEFT:R.PLAYER_LEFT:o>0?i>0?R.PLAYER_UPHILL_RIGHT:R.PLAYER_RIGHT:i>0?R.PLAYER_UPHILL_STRAIGHT:R.PLAYER_STRAIGHT,this.sprite(e,t,c,r,n,a+l,-.5,-1)}fog(e,t,s,r,n){n<1&&n>.01&&(this.ctx.globalAlpha=1-n,this.ctx.fillStyle=M.FOG,this.ctx.fillRect(e,t,s,r),this.ctx.globalAlpha=1)}rumbleWidth(e,t){return e/Math.max(6,2*t)}laneMarkerWidth(e,t){return e/Math.max(32,8*t)}renderCars(e,t,s,r,n){for(let a=s-1;a>0;a--){const s=e[(t+a)%e.length];for(const e of s.cars){const t=T.interpolate(s.p1.screen.scale,s.p2.screen.scale,e.percent||0),a=T.interpolate(s.p1.screen.x,s.p2.screen.x,e.percent||0)+t*e.offset*r*this.width/2,o=T.interpolate(s.p1.screen.y,s.p2.screen.y,e.percent||0);this.sprite(r,n,e.sprite,t,a,o,-.5,-1,s.clip)}}}renderSprites(e,t,s,r,n){for(let a=s-1;a>0;a--){const s=e[(t+a)%e.length];for(const e of s.sprites){const t=s.p1.screen.scale,a=s.p1.screen.x+t*e.offset*r*this.width/2,o=s.p1.screen.y;this.sprite(r,n,e.source,t,a,o,e.offset<0?-1:0,-1,s.clip)}}}renderObjects(e,t,s,r,n,a){for(let o=s-1;o>0;o--){const s=e[(t+o)%e.length];for(const e of s.sprites){const t=s.p1.screen.scale,o=s.p1.screen.x+t*e.offset*r*this.width/2,i=s.p1.screen.y;s.clip&&s.p1.camera.z>this.cameraDepth&&i<s.clip&&a&&a(e.source,s.index,e.offset),this.sprite(r,n,e.source,t,o,i,e.offset<0?-1:0,-1,s.clip)}for(const e of s.cars){const t=T.interpolate(s.p1.screen.scale,s.p2.screen.scale,e.percent||0),a=T.interpolate(s.p1.screen.x,s.p2.screen.x,e.percent||0)+t*e.offset*r*this.width/2,o=T.interpolate(s.p1.screen.y,s.p2.screen.y,e.percent||0);this.sprite(r,n,e.sprite,t,a,o,-.5,-1,s.clip)}}}renderCoinAnimations(e,t){const s=this.ctx;s.save();for(const r of e){const e=t-r.startTime,n=Math.min(e/500,1);if(n>=1)continue;const a=1-n,o=6,i=3,l=50*n;s.globalAlpha=.8*a,s.fillStyle="#FFD700";for(let t=0;t<o;t++){const e=t/o*Math.PI*2,n=r.x+Math.cos(e)*l,a=r.y+Math.sin(e)*l;s.beginPath(),s.arc(n,a,i,0,2*Math.PI),s.fill()}s.globalAlpha=a,s.font="bold 24px Arial",s.fillStyle="#FFD700",s.strokeStyle="#000000",s.lineWidth=3;const c="+".concat(r.points," puntos"),d=r.y-30*n;s.strokeText(c,r.x-40,d),s.fillText(c,r.x-40,d)}s.restore()}renderCrashAnimations(e,t){const s=this.ctx;s.save();for(const r of e){const e=t-r.startTime,n=Math.min(e/500,1);if(n>=1)continue;const a=10*(Math.random()-.5)*(1-n),o=10*(Math.random()-.5)*(1-n),i=1-n,l=8,c=4,d=60*n;s.globalAlpha=.9*i;for(let t=0;t<l;t++){const e=t/l*Math.PI*2,i=r.x+Math.cos(e)*d+a,h=r.y+Math.sin(e)*d+o,u=t%2===0?"#FF0000":"#FF6600";s.fillStyle=u,s.beginPath(),s.arc(i,h,c*(1-.5*n),0,2*Math.PI),s.fill()}s.globalAlpha=i,s.font="bold 28px Arial",s.fillStyle="#FF0000",s.strokeStyle="#000000",s.lineWidth=4;const h="-3 puntos",u=r.x-50+a,m=r.y-20*n+o;s.strokeText(h,u,m),s.fillText(h,u,m),n<.1&&(s.globalAlpha=.5*(1-10*n),s.fillStyle="#FFFFFF",s.beginPath(),s.arc(r.x,r.y,50,0,2*Math.PI),s.fill())}s.restore()}}class B{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;this.update=e,this.render=t,this.isRunning=!1,this.animationFrameId=null,this.lastTimestamp=0,this.accumulator=0,this.targetFps=void 0,this.fixedTimeStep=void 0,this.maxFrameTime=void 0,this.frameCount=0,this.lastFpsUpdate=0,this.currentFps=0,this.loop=()=>{if(!this.isRunning)return;const e=T.timestamp();let t=(e-this.lastTimestamp)/1e3;for(t=Math.min(t,this.maxFrameTime),this.lastTimestamp=e,this.accumulator+=t;this.accumulator>=this.fixedTimeStep;)this.update(this.fixedTimeStep),this.accumulator-=this.fixedTimeStep;const s=this.accumulator/this.fixedTimeStep;this.render(s),this.updateFpsCounter(),this.animationFrameId=requestAnimationFrame(this.loop)},this.targetFps=s,this.fixedTimeStep=1/s,this.maxFrameTime=5*this.fixedTimeStep}start(){this.isRunning||(this.isRunning=!0,this.lastTimestamp=T.timestamp(),this.accumulator=0,this.loop())}stop(){this.isRunning=!1,null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}getFps(){return this.currentFps}updateFpsCounter(){this.frameCount++;const e=T.timestamp();e-this.lastFpsUpdate>=1e3&&(this.currentFps=Math.round(1e3*this.frameCount/(e-this.lastFpsUpdate)),this.frameCount=0,this.lastFpsUpdate=e)}}class U{static async loadImages(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";const r=e.map(e=>this.loadSingleImage(e,t,s));return Promise.all(r)}static loadSingleImage(e,t,s){return new Promise((r,n)=>{const a=new Image;a.onload=()=>r(a),a.onerror=()=>n(new Error("Failed to load image: ".concat(e))),a.src="default"===s?"".concat(t,"/").concat(e,".webp"):"".concat(t,"/skins/").concat(s,"/").concat(e,".webp")})}}class P{constructor(){this.keys={},this.keyHandlers=[],this.handleKeyDown=e=>{this.keys[e.keyCode]=!0,this.triggerKeyHandlers(e.keyCode,"down");[37,38,39,40].includes(e.keyCode)&&e.preventDefault()},this.handleKeyUp=e=>{this.keys[e.keyCode]=!1,this.triggerKeyHandlers(e.keyCode,"up")},this.setupKeyboardListeners()}setupKeyboardListeners(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}destroy(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}setKeyHandlers(e){this.keyHandlers=e}isKeyPressed(e){return this.keys[e]||!1}triggerKeyHandlers(e,t){for(const s of this.keyHandlers)s.mode===t&&s.keys.includes(e)&&s.action()}setupTouchControls(e){}getKeyCodeForDirection(e){switch(e){case"left":return 37;case"up":return 38;case"right":return 39;case"down":return 40;default:return 0}}}const H=()=>{if("undefined"!==typeof window){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=window.matchMedia("only screen and (max-width: 768px)").matches,s=navigator.maxTouchPoints>1;return t&&e&&s}return!1};const z=e=>{let{currentLap:t,availableLaps:s,points:r,hud:a,gameState:o}=e;const i=()=>(parseInt(a.speed||"0")||0)/100*180-90;return"playing"!==o&&"paused"!==o&&"loading"!==o?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"hud-top",children:[(0,n.jsxs)("span",{className:"hud-lap-counter",children:[(0,n.jsx)("img",{className:"hud-lap-icon",src:"/games/racing/images/flag-laps.webp",alt:"laps"}),(0,n.jsxs)("span",{className:"hud-lap-text",children:[t,"/",s]})]}),(0,n.jsxs)("span",{className:"hud-time",children:[(0,n.jsx)("img",{className:"hud-lap-icon",src:"/games/racing/images/cronometer.webp",alt:"time"}),(0,n.jsx)("span",{className:"hud-lap-text",children:a.current_lap_time})]}),(0,n.jsxs)("span",{className:"hud-score",children:[(0,n.jsx)("img",{className:"hud-lap-icon",src:"/games/racing/images/coin.webp",alt:"points"}),(0,n.jsx)("span",{className:"hud-score-value",children:r})]})]}),(0,n.jsx)("div",{className:"hud-bottom",children:(0,n.jsxs)("div",{className:"hud-speed",children:[(0,n.jsxs)("svg",{className:"hud-speedometer",viewBox:"0 0 200 200",children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#444",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M 30 170 A 85 85 0 0 1 170 170",fill:"none",stroke:"#888",strokeWidth:"8"}),[0,25,50,75,100].map((e,t)=>{const s=(180*t/4-90)*(Math.PI/180),r=100+70*Math.cos(s),a=100+70*Math.sin(s),o=100+80*Math.cos(s),i=100+80*Math.sin(s);return(0,n.jsx)("line",{x1:r,y1:a,x2:o,y2:i,stroke:"#ccc",strokeWidth:"2"},e)}),(0,n.jsx)("line",{x1:"100",y1:"100",x2:100+65*Math.cos((i()-90)*(Math.PI/180)),y2:100+65*Math.sin((i()-90)*(Math.PI/180)),stroke:"#ff4444",strokeWidth:"4",strokeLinecap:"round"}),(0,n.jsx)("circle",{cx:"100",cy:"100",r:"5",fill:"#ff4444"})]}),(0,n.jsxs)("div",{className:"hud-speed-text",children:[a.speed," mph"]})]})})]})},F=e=>{let{getBillboardStats:t,isVisible:s=!1}=e;const[a,o]=(0,r.useState)(null);if((0,r.useEffect)(()=>{if(s){const e=setInterval(()=>{const e=t();e&&o(e)},1e3);return()=>clearInterval(e)}},[t,s]),!s||!a)return null;const i=Object.keys(a.placements).sort();return(0,n.jsxs)("div",{className:"billboard-stats",children:[(0,n.jsx)("h4",{className:"billboard-title",children:"Billboard Analytics"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"billboard-stat",children:[(0,n.jsx)("span",{className:"billboard-stat-label",children:"Track:"}),(0,n.jsxs)("span",{className:"billboard-stat-value",children:[a.trackLength,"m"]})]}),(0,n.jsxs)("div",{className:"billboard-stat",children:[(0,n.jsx)("span",{className:"billboard-stat-label",children:"Laps:"}),(0,n.jsx)("span",{className:"billboard-stat-value",children:a.totalLaps})]})]}),(0,n.jsxs)("table",{style:{width:"100%",fontSize:"0.75rem"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #4b5563"},children:[(0,n.jsx)("th",{style:{textAlign:"left",paddingBottom:"0.125rem"},children:"Billboard"}),(0,n.jsx)("th",{style:{textAlign:"center",paddingBottom:"0.125rem"},children:"Placed"}),(0,n.jsx)("th",{style:{textAlign:"center",paddingBottom:"0.125rem"},children:"Shown"}),(0,n.jsx)("th",{style:{textAlign:"right",paddingBottom:"0.125rem"},children:"%"})]})}),(0,n.jsx)("tbody",{children:i.map(e=>{const t=a.placements[e]||0,s=a.impressions[e]||0,r=a.maxPossibleImpressions[e]||0,o=r>0?(s/r*100).toFixed(0):"0";return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #374151"},children:[(0,n.jsx)("td",{style:{paddingTop:"0.125rem",paddingBottom:"0.125rem",fontSize:"0.625rem"},children:e.replace("BILLBOARD","B")}),(0,n.jsx)("td",{style:{textAlign:"center",paddingTop:"0.125rem",paddingBottom:"0.125rem"},children:t}),(0,n.jsx)("td",{style:{textAlign:"center",paddingTop:"0.125rem",paddingBottom:"0.125rem"},children:s}),(0,n.jsxs)("td",{style:{textAlign:"right",paddingTop:"0.125rem",paddingBottom:"0.125rem"},children:[o,"%"]})]},e)})}),(0,n.jsx)("tfoot",{children:(0,n.jsxs)("tr",{style:{fontWeight:"bold",borderTop:"1px solid #6b7280"},children:[(0,n.jsx)("td",{style:{paddingTop:"0.25rem",fontSize:"0.75rem"},children:"TOTAL"}),(0,n.jsx)("td",{style:{textAlign:"center",paddingTop:"0.25rem"},children:Object.values(a.placements).reduce((e,t)=>e+t,0)}),(0,n.jsx)("td",{style:{textAlign:"center",paddingTop:"0.25rem"},children:Object.values(a.impressions).reduce((e,t)=>e+t,0)}),(0,n.jsxs)("td",{style:{textAlign:"right",paddingTop:"0.25rem"},children:[Object.values(a.maxPossibleImpressions).reduce((e,t)=>e+t,0)>0?(Object.values(a.impressions).reduce((e,t)=>e+t,0)/Object.values(a.maxPossibleImpressions).reduce((e,t)=>e+t,0)*100).toFixed(0):"0","%"]})]})})]}),(0,n.jsx)("div",{style:{marginTop:"0.25rem",fontSize:"0.625rem",color:"#9ca3af"},children:(0,n.jsxs)("p",{children:["% = Shown vs Max Possible (",a.totalLaps," laps)"]})})]})},G=(0,r.forwardRef)((e,t)=>{let{width:s,height:r,className:a="",onClick:o,style:i}=e;return(0,n.jsx)("div",{className:"game-canvas-container",children:(0,n.jsx)("canvas",{ref:t,width:s,height:r,onClick:o,className:"game-canvas ".concat(a),style:i})})});G.displayName="GameCanvas";const _=e=>{let{onControl:t,onControlEnd:s,showActionButton:r=!1,layout:a="dpad",actionLabel:o="A",actionIcon:i,action2Label:l="B",action2Icon:c}=e;const d="\n    font-bold text-2xl rounded-lg\n    transition-all duration-150 transform\n    hover:scale-105 active:scale-95\n    bg-gray-600 text-gray-100\n    border-2 border-gray-800\n    shadow-[inset_0_-4px_0_rgba(0,0,0,0.4),0_2px_0_rgba(255,255,255,0.2)]\n    active:shadow-[inset_0_-2px_0_rgba(0,0,0,0.4),0_1px_0_rgba(255,255,255,0.2)]\n    select-none\n  ",h={userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",WebkitTouchCallout:"none"},u=e=>(e.preventDefault(),!1);return"horizontal"===a?(0,n.jsxs)("div",{className:"flex justify-center gap-6 p-6",children:[(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onClick:()=>t("left"),onContextMenu:u,className:"".concat(d," px-8 py-4 text-3xl"),style:h,children:"\u2190"}),r&&(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("action")},onClick:()=>t("action"),onContextMenu:u,className:"".concat(d," px-8 py-4 rounded-full"),style:h,children:i||o}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onClick:()=>t("right"),onContextMenu:u,className:"".concat(d," px-8 py-4 text-3xl"),style:h,children:"\u2192"})]}):"racing"===a?(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 w-full max-w-md mx-auto",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("left")},onMouseDown:()=>t("left"),onMouseUp:()=>null===s||void 0===s?void 0:s("left"),onContextMenu:u,className:"".concat(d," w-16 h-16 sm:w-20 sm:h-20 text-2xl"),style:h,children:"\u2190"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("right")},onMouseDown:()=>t("right"),onMouseUp:()=>null===s||void 0===s?void 0:s("right"),onContextMenu:u,className:"".concat(d," w-16 h-16 sm:w-20 sm:h-20 text-2xl"),style:h,children:"\u2192"})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("up")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("up")},onMouseDown:()=>t("up"),onMouseUp:()=>null===s||void 0===s?void 0:s("up"),onContextMenu:u,className:"".concat(d," w-16 h-12 sm:w-20 sm:h-14 text-lg bg-green-600 hover:bg-green-700"),style:h,children:i||o}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("down")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("down")},onMouseDown:()=>t("down"),onMouseUp:()=>null===s||void 0===s?void 0:s("down"),onContextMenu:u,className:"".concat(d," w-16 h-12 sm:w-20 sm:h-14 text-lg bg-red-600 hover:bg-red-700"),style:h,children:c||l})]})]}):"arrows"===a?(0,n.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,n.jsxs)("div",{className:"relative w-36 sm:w-48 h-36 sm:h-48",children:[(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-gray-700 opacity-30"}),(0,n.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-full border-2 border-gray-900 shadow-inner"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("up")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("up")},onMouseDown:()=>t("up"),onMouseUp:()=>null===s||void 0===s?void 0:s("up"),onContextMenu:u,className:"".concat(d," absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-t-3xl rounded-b-lg"),style:h,children:"\u2191"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("left")},onMouseDown:()=>t("left"),onMouseUp:()=>null===s||void 0===s?void 0:s("left"),onContextMenu:u,className:"".concat(d," absolute left-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-l-3xl rounded-r-lg"),style:h,children:"\u2190"}),r&&(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("action")},onClick:()=>t("action"),onContextMenu:u,className:"".concat(d," col-start-2 row-start-2 w-12 h-12 sm:w-16 sm:h-16 rounded-full"),style:h,children:i||o}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("right")},onMouseDown:()=>t("right"),onMouseUp:()=>null===s||void 0===s?void 0:s("right"),onContextMenu:u,className:"".concat(d," absolute right-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-r-3xl rounded-l-lg"),style:h,children:"\u2192"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("down")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("down")},onMouseDown:()=>t("down"),onMouseUp:()=>null===s||void 0===s?void 0:s("down"),onContextMenu:u,className:"".concat(d," absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-b-3xl rounded-t-lg"),style:h,children:"\u2193"})]})}):(0,n.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,n.jsxs)("div",{className:"relative w-36 sm:w-48 h-36 sm:h-48",children:[(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-gray-700 opacity-30"}),(0,n.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-full border-2 border-gray-900 shadow-inner"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("up")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("up")},onMouseDown:()=>t("up"),onMouseUp:()=>null===s||void 0===s?void 0:s("up"),onContextMenu:u,className:"".concat(d," absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-t-3xl rounded-b-lg"),style:h,children:"\u25b2"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onClick:()=>t("right"),onContextMenu:u,className:"".concat(d," absolute right-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-r-3xl rounded-l-lg"),style:h,children:"\u25b6"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("down")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("down")},onMouseDown:()=>t("down"),onMouseUp:()=>null===s||void 0===s?void 0:s("down"),onContextMenu:u,className:"".concat(d," absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-b-3xl rounded-t-lg"),style:h,children:"\u25bc"}),(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onClick:()=>t("left"),onContextMenu:u,className:"".concat(d," absolute left-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-l-3xl rounded-r-lg"),style:h,children:"\u25c0"}),r&&(0,n.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("action")},onClick:()=>t("action"),onContextMenu:u,className:"".concat(d," absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full z-10"),style:h,children:i||o})]})})},W=e=>{let{laps:t,setPointsEarned:s,setGameOver:a,track:o=0,skin:i="default",gameTitle:l="JALO Racing",brandColor:c="#00d26a",brandLogo:d,showBillboardStats:h=!1}=e;const S=H(),j=t||3,[L,M]=(0,r.useState)(!1),{canvasRef:E,gameState:R,currentLap:W,points:Y,hud:K,startGame:V,togglePause:Z,setupTouchControls:X,handleTouchControl:q,getBillboardStats:J}=function(e,t,s,n,a){const o=H(),[i,l]=(0,r.useState)("loading"),c=(0,r.useRef)(i),[d,h]=(0,r.useState)(1),[u,S]=(0,r.useState)(0),[j,L]=(0,r.useState)({speed:"0",current_lap_time:"00:00:0"}),M=(0,r.useRef)([]),E=(0,r.useRef)([]);(0,r.useEffect)(()=>{c.current=i},[i]);const R=(0,r.useRef)(null),z=(0,r.useRef)(null),F=(0,r.useRef)(null),G=(0,r.useRef)(null),_=(0,r.useRef)(null),W=(0,r.useRef)(null),Y=(0,r.useRef)({position:0,speed:0,playerX:0,playerZ:0,currentLapTime:0,cars:[],skyOffset:0,hillOffset:0,treeOffset:0,background:null,sprites:null,hasRendered:!1}),K=(0,r.useRef)({left:!1,right:!1,faster:!1,slower:!1}),V=(0,r.useRef)((0,m.A)((0,m.A)({},k),{},{cameraDepth:1/Math.tan(k.fieldOfView/2*Math.PI/180),maxSpeed:k.segmentLength/(1/k.fps*1.2),accel:0,breaking:0,decel:0,offRoadDecel:0,offRoadLimit:0,playerZ:0}));(0,r.useEffect)(()=>{const e=V.current;e.playerZ=e.cameraHeight*e.cameraDepth,e.maxSpeed=e.segmentLength/(1/e.fps*1.2),e.accel=e.maxSpeed/5,e.breaking=-e.maxSpeed,e.decel=-e.maxSpeed/5,e.offRoadDecel=-e.maxSpeed/2,e.offRoadLimit=e.maxSpeed/4},[]);const Z=(0,r.useCallback)(e=>{const t=Math.floor(e/60),s=Math.floor(e-60*t),r=Math.floor(10*(e-Math.floor(e)));return t>0&&t<10?"0".concat(t,":").concat(s<10?"0":"").concat(s,":").concat(r):t>0&&t>=10?"".concat(t,":").concat(s<10?"0":"").concat(s,":").concat(r):"00:".concat(s<10?"0":"").concat(s,":").concat(r<10?"0":"").concat(r)},[]),X=(0,r.useCallback)((e,t)=>{L(s=>s[e]!==t?(0,m.A)((0,m.A)({},s),{},{[e]:t}):s)},[]),q=(0,r.useCallback)(()=>{const e=R.current;if(!e)return;const t=V.current;e.width=t.width,e.height=t.height;const s=e.getContext("2d");return s?(z.current=new A(t.segmentLength,t.rumbleLength),F.current=new N({maxSpeed:t.maxSpeed,accel:t.accel,breaking:t.breaking,decel:t.decel,offRoadDecel:t.offRoadDecel,offRoadLimit:t.offRoadLimit,centrifugal:t.centrifugal,trackLength:0}),G.current=new O(s,t.width,t.height),G.current.setCameraDepth(t.cameraDepth),W.current=new P,W.current.setKeyHandlers([{keys:[p,b],mode:"down",action:()=>{K.current.left=!0}},{keys:[f,y],mode:"down",action:()=>{K.current.right=!0}},{keys:[g,w],mode:"down",action:()=>{K.current.faster=!0}},{keys:[x,v],mode:"down",action:()=>{K.current.slower=!0}},{keys:[p,b],mode:"up",action:()=>{K.current.left=!1}},{keys:[f,y],mode:"up",action:()=>{K.current.right=!1}},{keys:[g,w],mode:"up",action:()=>{K.current.faster=!1}},{keys:[x,v],mode:"up",action:()=>{K.current.slower=!1}}]),!0):void 0},[]),J=(0,r.useCallback)(async()=>{try{const e=await U.loadImages(["background","sprites"],"/games/racing/images",s);return Y.current.background=e[0],Y.current.sprites=e[1],!0}catch(e){return console.error("Failed to load game assets:",e),!1}},[s]),Q=(0,r.useCallback)(()=>{const e=V.current,s=Y.current;if(s.position=0,s.speed=0,s.playerX=0,s.currentLapTime=0,s.skyOffset=0,s.hillOffset=0,s.treeOffset=0,z.current&&F.current){z.current.reset(t,e.playerZ);const r=z.current.getTrackLength();F.current.updateTrackLength(r),s.cars=z.current.resetCars(e.totalCars,e.maxSpeed)}h(1),S(0),M.current=[],E.current=[],X("speed","0"),X("current_lap_time","00:00:0")},[t,X]),$=(0,r.useCallback)(e=>{if("playing"!==c.current)return;const t=V.current,s=Y.current,r=F.current,n=z.current;if(!r||!n)return;const a=n.findSegment(s.position+t.playerZ),o=s.position,i=r.updatePlayer(s.playerX,s.speed,s.position,K.current,a,e,e=>n.findSegment(e),t.width,t.height);s.playerX=i.playerX,s.speed=i.speed,s.position=T.increase(s.position,e*s.speed,n.getTrackLength()),0!==i.pointsEarned&&S(e=>Math.max(e+i.pointsEarned,0)),i.coinCollected&&i.pointsEarned>0&&M.current.push({x:i.coinCollected.x,y:i.coinCollected.y,points:i.pointsEarned,startTime:Date.now()}),i.crashPosition&&i.crashed&&E.current.push({x:i.crashPosition.x,y:i.crashPosition.y,startTime:Date.now()}),r.updateCars(s.cars,e,a,s.playerX,s.speed,t.drawDistance,e=>n.findSegment(e),n.getSegments());const l=r.updateScrollOffsets(s.skyOffset,s.hillOffset,s.treeOffset,a,o,s.position,t.segmentLength,t.skySpeed,t.hillSpeed,t.treeSpeed);s.skyOffset=l.skyOffset,s.hillOffset=l.hillOffset,s.treeOffset=l.treeOffset,s.position>t.playerZ&&(s.currentLapTime&&o<t.playerZ?(h(e=>e+1),n.removeAllCoins(),s.currentLapTime=0):s.currentLapTime+=e),X("speed",String(5*Math.round(s.speed/500))),X("current_lap_time",Z(s.currentLapTime))},[Z,X]),ee=(0,r.useCallback)(e=>{if("playing"!==c.current)return;const t=V.current,s=Y.current,r=G.current,n=z.current;if(!r||!n||!s.background||!s.sprites)return;r.clear();const a=n.findSegment(s.position),o=T.percentRemaining(s.position,t.segmentLength),i=n.findSegment(s.position+t.playerZ),l=T.percentRemaining(s.position+t.playerZ,t.segmentLength),h=T.interpolate(i.p1.world.y,i.p2.world.y,l);let u=0,m=-a.curve*o,p=t.height;r.background(s.background,I,s.skyOffset,r.resolution*t.skySpeed*h),r.background(s.background,C,s.hillOffset,r.resolution*t.hillSpeed*h),r.background(s.background,D,s.treeOffset,r.resolution*t.treeSpeed*h);const g=n.getSegments();for(let c=0;c<t.drawDistance;c++){const e=g[(a.index+c)%g.length];e.looped=e.index<a.index,e.fog=T.exponentialFog(c/t.drawDistance,t.fogDensity),e.clip=p,T.project(e.p1,s.playerX*t.roadWidth-u,h+t.cameraHeight,s.position-(e.looped?n.getTrackLength():0),t.cameraDepth,t.width,t.height,t.roadWidth),T.project(e.p2,s.playerX*t.roadWidth-u-m,h+t.cameraHeight,s.position-(e.looped?n.getTrackLength():0),t.cameraDepth,t.width,t.height,t.roadWidth),u+=m,m+=e.curve,e.p1.camera.z<=t.cameraDepth||e.p2.screen.y>=e.p1.screen.y||e.p2.screen.y>=p||(r.segment(t.lanes,e.p1.screen.x,e.p1.screen.y,e.p1.screen.w,e.p2.screen.x,e.p2.screen.y,e.p2.screen.w,e.fog,e.color),p=e.p1.screen.y)}r.renderObjects(g,a.index,t.drawDistance,t.roadWidth,s.sprites,(e,t,s)=>{if(n.getBillboardName){const r=n.getBillboardName(e);r&&n.recordBillboardImpression(t,s,r,d)}}),r.player(t.roadWidth,s.sprites,s.speed/t.maxSpeed,t.cameraDepth/t.playerZ,t.width/2,t.height/2-t.cameraDepth/t.playerZ*T.interpolate(i.p1.camera.y,i.p2.camera.y,l)*t.height/2,s.speed*(K.current.left?-1:K.current.right?1:0),i.p2.world.y-i.p1.world.y);const f=Date.now();r.renderCoinAnimations(M.current,f),r.renderCrashAnimations(E.current,f),M.current=M.current.filter(e=>f-e.startTime<500),E.current=E.current.filter(e=>f-e.startTime<500)},[d]),te=(0,r.useCallback)(async()=>{l("loading"),q()?await J()?(Q(),_.current=new B($,ee,k.fps),_.current.start(),l("playing")):console.error("Failed to load game assets"):console.error("Failed to initialize game engines")},[q,J,Q,$,ee]),se=(0,r.useCallback)(()=>{var e;if("playing"===i)l("paused"),null===(e=_.current)||void 0===e||e.stop();else if("paused"===i){var t;l("playing"),null===(t=_.current)||void 0===t||t.start()}},[i]),re=(0,r.useCallback)(()=>{var e,t;null===(e=_.current)||void 0===e||e.stop(),null===(t=W.current)||void 0===t||t.destroy(),l("gameover")},[]);(0,r.useEffect)(()=>{d>e&&(n(u),a(!0),re())},[d,e,u,n,a,re]);const ne=(0,r.useCallback)(e=>{W.current&&W.current.setupTouchControls(e)},[]);(0,r.useEffect)(()=>{"playing"===i&&W.current&&W.current.setupTouchControls(o)},[i,o]),(0,r.useEffect)(()=>()=>{var e,t;null===(e=_.current)||void 0===e||e.stop(),null===(t=W.current)||void 0===t||t.destroy()},[]);const ae=(0,r.useCallback)((e,t)=>{switch(e){case"left":K.current.left=t;break;case"right":K.current.right=t;break;case"up":K.current.faster=t;break;case"down":K.current.slower=t}},[]),oe=(0,r.useCallback)(()=>z.current?z.current.getBillboardStats(e):null,[e]);return{canvasRef:R,gameState:i,currentLap:d,points:u,hud:j,availableLaps:e,startGame:te,togglePause:se,stopGame:re,setupTouchControls:ne,handleTouchControl:ae,getBillboardStats:oe}}(j,o,i,s,a);(0,r.useEffect)(()=>{E.current&&(E.current.width=720,E.current.height=960)},[E]),(0,r.useEffect)(()=>{S&&"playing"===R&&X(!0)},[S,R,X]);const Q=(0,r.useCallback)(e=>{"playing"===R&&q(e,!0)},[R,q]),$=(0,r.useCallback)(e=>{q(e,!1)},[q]);return(0,r.useEffect)(()=>{const e=e=>{if({37:1,38:1,39:1,40:1}[e.keyCode])return e.preventDefault(),!1;!L||"Escape"!==e.key&&" "!==e.key||(e.preventDefault(),Z())};return window.addEventListener("keydown",e,!1),()=>{window.removeEventListener("keydown",e,!1)}},[L,Z]),(0,n.jsx)("div",{style:{width:"100%",position:"relative"},children:(0,n.jsxs)("div",{style:{width:"100%",position:"relative",display:"flex",flexDirection:"column",gap:"0.25rem",justifyContent:"center",alignItems:"center"},children:[!L&&(0,n.jsx)(u,{type:"custom",title:l,brandColor:c,onAction:async()=>{M(!0),await V()},actionText:"\xa1Empezar a Correr!",customContent:(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{style:{fontSize:"0.75rem",color:"white"},children:"por:"}),(0,n.jsx)("img",{src:d,alt:"Brand Logo",style:{margin:"0 auto",width:"12rem",height:"auto",marginBottom:"1rem"}})]}),(0,n.jsx)("p",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:S?"\xa1Usa los controles t\xe1ctiles para correr!":"\xa1Usa el teclado para correr!"}),(0,n.jsx)("div",{style:{marginTop:"0.5rem"},children:S?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#374151",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\u2190"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"Girar a la izquierda"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#374151",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\u2192"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"Girar a la derecha"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#059669",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\ud83c\udfc1"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"Acelerar"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#dc2626",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\ud83d\uded1"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"Frenar"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2190"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"o"}),(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"A"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"- Girar a la izquierda"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2192"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"o"}),(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"D"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"- Girar a la derecha"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2191"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"o"}),(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"W"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"- Acelerar"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2193"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"o"}),(0,n.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"S"}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:"- Frenar"})]})]})}),(0,n.jsx)("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"1rem"},children:"\xa1Recolecta monedas y evita chocar con otros autos!"})]})}),"paused"===R&&(0,n.jsx)(u,{type:"pause",title:"\u23f8\ufe0f PAUSA",message:"Presiona ESC para continuar",onAction:Z,actionText:"Continuar",brandColor:c}),(0,n.jsxs)("div",{id:"racer",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:["gameover"===R&&(0,n.jsx)(u,{type:"gameOver",score:Y,brandColor:c}),(0,n.jsxs)("div",{style:{position:"relative",padding:0,margin:0,width:"100%",maxWidth:"360px",height:"480px",display:"gameover"===R?"none":"block",visibility:"ready"===R?"hidden":"visible"},children:[(0,n.jsx)(z,{currentLap:W,availableLaps:j,points:Y,hud:K,gameState:R}),(0,n.jsx)(G,{ref:E,width:720,height:960,style:{backgroundColor:"#35cafa",width:"100%",height:"100%"}})]})]}),(0,n.jsx)(F,{getBillboardStats:J,isVisible:h&&"playing"===R&&!S}),S&&"playing"===R&&(0,n.jsx)(_,{onControl:Q,onControlEnd:$,layout:"racing",brandColor:c,actionIcon:"\ud83c\udfc1",action2Icon:"\ud83d\uded1"})]})})};function Y(e){let{visitor:t,setDialogText:s,setCurrentAction:a}=e;const[o,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(0),[d,m]=(0,r.useState)(!1),p=(0,r.useRef)(null);return d?(0,n.jsx)(u,{type:"custom",title:l>0?"\ud83c\udf89 \xa1Felicidades!":"\ud83d\ude22 \xa1Lo sentimos!",message:l>0?"Ganaste ".concat(l," puntos"):"Intenta de nuevo",brandColor:"#00d26a",onAction:()=>{m(!1),c(0),i("")},actionText:"Volver al Men\xfa de Juegos"}):""!==o?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"game-wrapper",ref:p,children:"races"===o&&(0,n.jsx)(W,{laps:1,track:1,setGameOver:m,setPointsEarned:c,showBillboardStats:!1,brandColor:"#ef4444",gameTitle:"MAW Racing"})})}):(0,n.jsxs)("div",{className:"game-selector-container",children:[(0,n.jsxs)("div",{className:"game-selector-header",children:[(0,n.jsx)("h1",{className:"game-selector-title",children:"\ud83c\udfae Juegos"}),(0,n.jsx)("p",{className:"game-selector-subtitle",children:"Selecciona un juego para comenzar a practicar"})]}),(0,n.jsx)("div",{className:"game-selector-grid",children:(0,n.jsx)(h,{title:"Carreras",icon:"\ud83c\udfce\ufe0f",gradientFrom:"#3b82f6",gradientTo:"#2563eb",onClick:()=>i("races"),description:"Velocidad 3D"})})]})}const K=(0,r.lazy)(()=>s.e(325).then(s.bind(s,1227))),V=(0,r.lazy)(()=>s.e(987).then(s.bind(s,8987))),Z=(0,r.lazy)(()=>s.e(408).then(s.bind(s,9408))),X=(0,r.lazy)(()=>s.e(223).then(s.bind(s,529))),q=(0,r.lazy)(()=>Promise.all([s.e(810),s.e(589)]).then(s.bind(s,4589))),J=(0,r.lazy)(()=>s.e(795).then(s.bind(s,795))),Q=e=>{let{name:t}=e;const s=""!==t?"Hello, ".concat(t,"!"):"Hello, fellow traveler of the interwebz!",[a,o]=(0,r.useState)(s),[i,l]=(0,r.useState)(""),[c,h]=(0,r.useState)(!1),[u,m]=(0,r.useState)(window.innerWidth<=540),[p,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>{m(window.innerWidth<=540)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const f=e=>{l(e);u&&["goTo-about","goTo-work","goTo-contact","goTo-portfolio","goTo-games"].includes(e)&&g(!0)};return(0,r.useEffect)(()=>{const e=document.querySelector("#bgMusic");e&&(e.volume=.1,e.play())},[]),(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{id:"loader",children:(0,n.jsx)("i",{className:"spinner icon"})}),children:(0,n.jsx)("div",{className:"ui container main",children:(0,n.jsxs)("div",{className:"ui stackable grid",children:[(0,n.jsx)("div",{className:"seven wide column",children:(0,n.jsx)("div",{className:"left-side-wrapper",children:(0,n.jsx)(K,{visitor:t,dialogText:a,setDialogText:o,currentAction:i,setCurrentAction:f,onDialogComplete:()=>{p&&setTimeout(()=>{h(!0),g(!1)},1e3)}})})}),(0,n.jsx)("div",{className:"nine wide column ".concat(c?"browser-open":""),children:(0,n.jsx)("div",{className:"right-side-wrapper",children:(0,n.jsx)(d,{currentSection:i,onNavigate:f,onClose:u?()=>{h(!c)}:void 0,onOpen:u?()=>h(!0):void 0,isMobile:u,browserOpen:c,children:(()=>{const e=(0,n.jsx)("div",{id:"loader",children:(0,n.jsx)("i",{className:"spinner icon"})});switch(i){case"goTo-about":return(0,n.jsx)(r.Suspense,{fallback:e,children:(0,n.jsx)(Z,{setDialogText:o,setCurrentAction:f})});case"goTo-work":return(0,n.jsx)(r.Suspense,{fallback:e,children:(0,n.jsx)(X,{setDialogText:o,setCurrentAction:f})});case"goTo-portfolio":return(0,n.jsx)(r.Suspense,{fallback:e,children:(0,n.jsx)(q,{setDialogText:o,setCurrentAction:f})});case"goTo-contact":return(0,n.jsx)(r.Suspense,{fallback:e,children:(0,n.jsx)(J,{visitor:t,setDialogText:o,setCurrentAction:f})});case"goTo-games":return(0,n.jsx)(r.Suspense,{fallback:e,children:(0,n.jsx)(Y,{visitor:t,setDialogText:o,setCurrentAction:f})});default:return(0,n.jsx)(r.Suspense,{fallback:e,children:(0,n.jsx)(V,{setDialogText:o,setCurrentAction:f})})}})()})})})]})})})}},4705:(e,t,s)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,s){return(t=n(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{A:()=>a})},9379:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(4705);function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){(0,r.A)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}}}]);
//# sourceMappingURL=420.8bce58e3.chunk.js.map