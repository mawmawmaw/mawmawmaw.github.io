{"version":3,"file":"static/js/584.bd60c2d4.chunk.js","mappings":"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","sources":["components/icons/BrowserIcons.tsx","components/Content/BrowserWindow/ThemeDropdown.tsx","components/Content/BrowserWindow/BrowserWindow.tsx","components/Content/Games/ui/GameCard.tsx","components/Content/Games/ui/GameOverlay.tsx","components/Content/Games/racing/constants.ts","components/Content/Games/racing/utils/math.ts","components/Content/Games/racing/engine/road.ts","components/Content/Games/racing/engine/physics.ts","components/Content/Games/racing/engine/render.ts","components/Content/Games/racing/engine/gameLoop.ts","utils/functions.ts","components/Content/Games/racing/components/HUD.tsx","components/Content/Games/racing/components/BillboardStats.tsx","components/Content/Games/ui/GameCanvas.tsx","components/Content/Games/ui/GameControls.tsx","components/Content/Games/racing/game.tsx","components/Content/Games/racing/hooks/useCarGame.ts","components/Content/Games/game-selector.tsx","components/Content/Content.tsx","components/Content/PageNavigation/PageNavigation.tsx","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["import React from 'react';\n\nexport const BackIcon: React.FC = () => (\n  <svg viewBox=\"0 0 16 16\" width=\"14\" height=\"14\" fill=\"currentColor\">\n    <path d=\"M10 3L5 8l5 5V3z\" />\n    <rect x=\"3\" y=\"7\" width=\"8\" height=\"2\" />\n  </svg>\n);\n\nexport const ForwardIcon: React.FC = () => (\n  <svg viewBox=\"0 0 16 16\" width=\"14\" height=\"14\" fill=\"currentColor\">\n    <path d=\"M6 3l5 5-5 5V3z\" />\n    <rect x=\"5\" y=\"7\" width=\"8\" height=\"2\" />\n  </svg>\n);\n\nexport const RefreshIcon: React.FC = () => (\n  <svg\n    viewBox=\"0 0 16 16\"\n    width=\"14\"\n    height=\"14\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"1.5\"\n  >\n    <path\n      d=\"M14 8a6 6 0 0 1-6 6 6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 5.5 3.5\"\n      strokeLinecap=\"round\"\n    />\n    <polyline points=\"11 2 14 2 14 5\" />\n  </svg>\n);\n\nexport const StopIcon: React.FC = () => (\n  <svg viewBox=\"0 0 16 16\" width=\"14\" height=\"14\" fill=\"currentColor\">\n    <rect x=\"4\" y=\"4\" width=\"8\" height=\"8\" />\n  </svg>\n);\n\nexport const HomeIcon: React.FC = () => (\n  <svg viewBox=\"0 0 16 16\" width=\"14\" height=\"14\" fill=\"currentColor\">\n    <path d=\"M2 8l6-5 6 5v5a1 1 0 0 1-1 1H9v-4H7v4H3a1 1 0 0 1-1-1V8z\" />\n    <polygon points=\"8,1 1,7 2,8 8,3 14,8 15,7\" />\n  </svg>\n);\n","import React from 'react';\n\ninterface ThemeDropdownProps {\n  currentTheme: string;\n  onSelectTheme: (theme: string) => void;\n  themes: {\n    classic: string;\n    vaporwave: string;\n    terminal: string;\n  };\n  variant?: 'menubar' | 'statusbar';\n}\n\nconst ThemeDropdown: React.FC<ThemeDropdownProps> = ({\n  currentTheme,\n  onSelectTheme,\n  themes,\n  variant = 'menubar',\n}) => {\n  const className = variant === 'statusbar' ? 'status-theme-dropdown' : 'theme-dropdown';\n\n  return (\n    <div className={className}>\n      <button\n        className={currentTheme === 'classic' ? 'active' : ''}\n        onClick={() => onSelectTheme('classic')}\n      >\n        {themes.classic}\n      </button>\n      <button\n        className={currentTheme === 'vaporwave' ? 'active' : ''}\n        onClick={() => onSelectTheme('vaporwave')}\n      >\n        {themes.vaporwave}\n      </button>\n      <button\n        className={currentTheme === 'terminal' ? 'active' : ''}\n        onClick={() => onSelectTheme('terminal')}\n      >\n        {themes.terminal}\n      </button>\n    </div>\n  );\n};\n\nexport default ThemeDropdown;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './BrowserWindow.css';\nimport '../../../styles/themes/index.css';\nimport { Language } from '../../../types/i18n';\nimport { getTranslations } from '../../../i18n';\nimport { BackIcon, ForwardIcon, RefreshIcon, StopIcon, HomeIcon } from '../../icons';\nimport ThemeDropdown from './ThemeDropdown';\n\ninterface BrowserWindowProps {\n  currentSection: string;\n  children: React.ReactNode;\n  onNavigate: (action: string) => void;\n  onMinimize?: () => void;\n  onOpen?: () => void;\n  isMobile?: boolean;\n  browserOpen?: boolean;\n  browserMinimized?: boolean;\n  lang: Language;\n}\n\nconst BrowserWindow: React.FC<BrowserWindowProps> = ({\n  currentSection,\n  children,\n  onNavigate,\n  onMinimize,\n  onOpen,\n  isMobile = false,\n  browserOpen = true,\n  browserMinimized = false,\n  lang,\n}) => {\n  const t = getTranslations(lang);\n  const [isMaximized, setIsMaximized] = useState(false);\n  const [showBSOD, setShowBSOD] = useState(false);\n  const [currentTheme, setCurrentTheme] = useState<string>(() => {\n    return localStorage.getItem('browserTheme') || 'classic';\n  });\n  const [menubarThemeOpen, setMenubarThemeOpen] = useState(false);\n  const [statusbarThemeOpen, setStatusbarThemeOpen] = useState(false);\n  const menubarRef = useRef<HTMLDivElement>(null);\n  const statusbarRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdowns when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menubarRef.current && !menubarRef.current.contains(event.target as Node)) {\n        setMenubarThemeOpen(false);\n      }\n      if (statusbarRef.current && !statusbarRef.current.contains(event.target as Node)) {\n        setStatusbarThemeOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Sync isMaximized with browserOpen on mobile\n  useEffect(() => {\n    if (isMobile && browserOpen) {\n      setIsMaximized(true);\n    }\n  }, [isMobile, browserOpen]);\n\n  const setTheme = useCallback((theme: string, source: 'menubar' | 'statusbar') => {\n    setCurrentTheme(theme);\n    localStorage.setItem('browserTheme', theme);\n    if (source === 'menubar') {\n      setMenubarThemeOpen(false);\n    } else {\n      setStatusbarThemeOpen(false);\n    }\n  }, []);\n\n  const toggleMenubarTheme = useCallback(() => {\n    setMenubarThemeOpen(prev => !prev);\n  }, []);\n\n  const toggleStatusbarTheme = useCallback(() => {\n    setStatusbarThemeOpen(prev => !prev);\n  }, []);\n\n  const handleMenubarThemeSelect = useCallback((theme: string) => setTheme(theme, 'menubar'), [setTheme]);\n  const handleStatusbarThemeSelect = useCallback((theme: string) => setTheme(theme, 'statusbar'), [setTheme]);\n\n  const getSectionUrl = (section: string): string => {\n    const urls: { [key: string]: string } = {\n      '': 'http://maw.dev/index.html',\n      'goTo-about': 'http://maw.dev/about-me.htm',\n      'goTo-work': 'http://maw.dev/work/tech-stack.html',\n      'goTo-portfolio': 'http://maw.dev/portfolio/gallery.cgi',\n      'goTo-contact': 'http://maw.dev/contact/guestbook.php',\n    };\n    return urls[section] || 'http://maw.dev/';\n  };\n\n  const getSectionTitle = (section: string): string => {\n    const titles: { [key: string]: string } = {\n      '': t.browser.titles.home,\n      'goTo-about': t.browser.titles.about,\n      'goTo-work': t.browser.titles.work,\n      'goTo-portfolio': t.browser.titles.portfolio,\n      'goTo-contact': t.browser.titles.contact,\n      'goTo-games': t.browser.titles.games,\n    };\n    return titles[section] || t.browser.titles.home;\n  };\n\n  const handleBack = () => {\n    onNavigate('');\n  };\n\n  const handleHome = () => {\n    onNavigate('');\n  };\n\n  // Handle click on browser when mobile and hidden - opens it\n  const handleBrowserClick = () => {\n    if (isMobile && !browserOpen) {\n      onOpen?.();\n      setIsMaximized(true);\n    }\n  };\n\n  return (\n    <div\n      className={`browser-window ${isMaximized ? 'maximized' : ''} ${browserMinimized ? 'minimized' : ''}`}\n      onClick={handleBrowserClick}\n    >\n      {/* Title Bar */}\n      <div\n        className=\"browser-titlebar\"\n        onDoubleClick={() => {\n          if (!isMobile) {\n            setIsMaximized(!isMaximized);\n          }\n        }}\n      >\n        <div className=\"browser-titlebar-text\">\n          <span className=\"browser-icon\"></span>\n          {getSectionTitle(currentSection)}\n        </div>\n        <div className=\"browser-titlebar-controls\">\n          <button\n            className=\"titlebar-button minimize\"\n            aria-label=\"Minimize\"\n            onClick={(e) => {\n              e.stopPropagation();\n              if (isMobile) {\n                // Mobile: only works when maximized, returns to hidden state\n                if (isMaximized) {\n                  setIsMaximized(false);\n                  onMinimize?.();\n                }\n              } else {\n                // Desktop: hide browser completely\n                onMinimize?.();\n              }\n            }}\n          >\n            _\n          </button>\n          <button\n            className=\"titlebar-button maximize\"\n            aria-label=\"Maximize\"\n            onClick={(e) => {\n              e.stopPropagation();\n              if (isMobile) {\n                // Mobile when maximized: do nothing\n                if (isMaximized) return;\n                // Mobile when hidden: maximize\n                setIsMaximized(true);\n                onOpen?.();\n              } else {\n                // Desktop: toggle maximize\n                setIsMaximized(!isMaximized);\n              }\n            }}\n          >\n            \n          </button>\n          <button\n            className=\"titlebar-button close\"\n            aria-label=\"Close\"\n            onClick={(e) => {\n              e.stopPropagation();\n              if (isMobile && !isMaximized) {\n                // Mobile hidden state: do nothing\n                return;\n              }\n              // Desktop or mobile maximized: trigger BSOD\n              setShowBSOD(true);\n            }}\n          >\n            \n          </button>\n        </div>\n      </div>\n\n      {/* Menu Bar */}\n      <div className=\"browser-menubar\">\n        <span className=\"menu-item\">{t.browser.menus.file}</span>\n        <span className=\"menu-item\">{t.browser.menus.edit}</span>\n        <span className=\"menu-item\">{t.browser.menus.view}</span>\n        <span className=\"menu-item\">{t.browser.menus.favorites}</span>\n        <div className=\"menu-item-wrapper\" ref={menubarRef}>\n          <span className=\"menu-item\" onClick={toggleMenubarTheme}>\n            {t.browser.menus.themes}\n          </span>\n          {menubarThemeOpen && (\n            <ThemeDropdown\n              currentTheme={currentTheme}\n              onSelectTheme={handleMenubarThemeSelect}\n              themes={t.browser.themes}\n              variant=\"menubar\"\n            />\n          )}\n        </div>\n        <span className=\"menu-item\">{t.browser.menus.help}</span>\n      </div>\n\n      {/* Navigation Bar */}\n      <div className=\"browser-navbar\">\n        <div className=\"nav-buttons\">\n          <button\n            className=\"nav-button back\"\n            onClick={handleBack}\n            disabled={currentSection === ''}\n            aria-label=\"Back\"\n          >\n            <BackIcon />\n          </button>\n          <button className=\"nav-button forward\" disabled aria-label=\"Forward\">\n            <ForwardIcon />\n          </button>\n          <button className=\"nav-button refresh\" aria-label=\"Refresh\">\n            <RefreshIcon />\n          </button>\n          <button className=\"nav-button stop\" aria-label=\"Stop\">\n            <StopIcon />\n          </button>\n          <button className=\"nav-button home\" onClick={handleHome} aria-label=\"Home\">\n            <HomeIcon />\n          </button>\n        </div>\n        <div className=\"nav-addressbar\">\n          <input\n            type=\"text\"\n            value={getSectionUrl(currentSection)}\n            readOnly\n            className=\"addressbar-input\"\n          />\n        </div>\n        <button className=\"nav-button go\">Go</button>\n      </div>\n\n      {/* Content Area */}\n      <div className=\"browser-content\">\n        <div className={`browser-viewport theme-${currentTheme}`}>{children}</div>\n      </div>\n\n      {/* BSOD Easter Egg */}\n      {showBSOD && (\n        <div className=\"bsod-overlay\" onClick={() => setShowBSOD(false)}>\n          <div className=\"bsod-content\">\n            <h1>{t.browser.bsod.title}</h1>\n            <p className=\"bsod-main-text\">{t.browser.bsod.mainText}</p>\n            <p>{t.browser.bsod.collectingError}</p>\n            <p className=\"bsod-error\">{t.browser.bsod.errorCode}</p>\n            <p className=\"bsod-code\">{t.browser.bsod.stopCode}</p>\n            <p className=\"bsod-hint\">{t.browser.bsod.clickToRestart}</p>\n          </div>\n        </div>\n      )}\n\n      {/* Status Bar */}\n      <div className=\"browser-statusbar\">\n        <div className=\"status-text\">{t.browser.statusDone}</div>\n        <div className=\"status-icons\">\n          <div className=\"status-theme-selector\" ref={statusbarRef}>\n            <button\n              className=\"status-theme-button\"\n              onClick={toggleStatusbarTheme}\n              aria-label={t.browser.menus.themes}\n            >\n               {t.browser.themes[currentTheme as keyof typeof t.browser.themes] || currentTheme}\n            </button>\n            {statusbarThemeOpen && (\n              <ThemeDropdown\n                currentTheme={currentTheme}\n                onSelectTheme={handleStatusbarThemeSelect}\n                themes={t.browser.themes}\n                variant=\"statusbar\"\n              />\n            )}\n          </div>\n          <span className=\"status-icon\"></span>\n          <span className=\"status-zone\">{t.browser.statusZone}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BrowserWindow;\n","import React from 'react';\n\ninterface GameCardProps {\n  title: string;\n  icon?: string;\n  color?: string;\n  gradientFrom?: string;\n  gradientTo?: string;\n  onClick: () => void;\n  description?: string;\n  disabled?: boolean;\n}\n\nexport const GameCard: React.FC<GameCardProps> = ({\n  title,\n  icon,\n  color,\n  gradientFrom,\n  gradientTo,\n  onClick,\n  description,\n  disabled = false,\n}) => {\n  const bgStyle =\n    gradientFrom && gradientTo\n      ? {\n          background: `linear-gradient(135deg, ${gradientFrom} 0%, ${gradientTo} 100%)`,\n        }\n      : { backgroundColor: color || '#4b5563' };\n\n  return (\n    <button onClick={onClick} disabled={disabled} className=\"game-card\" style={bgStyle}>\n      {/* Hover Overlay */}\n      <div className=\"game-card-overlay\" />\n\n      {/* Content */}\n      <div className=\"game-card-content\">\n        {/* Icon */}\n        {icon && <div className=\"game-card-icon\">{icon}</div>}\n\n        {/* Title */}\n        <h3 className=\"game-card-title\">{title}</h3>\n\n        {/* Description */}\n        {description && <p className=\"game-card-description\">{description}</p>}\n      </div>\n\n      {/* Corner Accent */}\n      <div className=\"game-card-accent-top\">\n        <div className=\"game-card-accent-triangle\" />\n      </div>\n\n      {/* Bottom Accent */}\n      <div className=\"game-card-accent-bottom\" />\n    </button>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { Language } from '../../../../types/i18n';\nimport { getTranslations } from '../../../../i18n';\n\ninterface GameOverlayProps {\n  type: 'start' | 'pause' | 'gameOver' | 'levelComplete' | 'custom';\n  title?: string;\n  message?: string;\n  score?: number;\n  level?: number;\n  brandColor?: string;\n  onAction?: () => void;\n  actionText?: string;\n  customContent?: React.ReactNode;\n  showPressToStart?: boolean;\n  lang?: Language;\n}\n\nexport const GameOverlay: React.FC<GameOverlayProps> = ({\n  type,\n  title,\n  message,\n  score,\n  level,\n  brandColor = '#00d26a',\n  onAction,\n  actionText,\n  customContent,\n  showPressToStart = true,\n  lang = 'en',\n}) => {\n  const t = getTranslations(lang);\n  const [showBlink, setShowBlink] = useState(true);\n\n  useEffect(() => {\n    if (showPressToStart && type === 'start') {\n      const interval = setInterval(() => {\n        setShowBlink((prev) => !prev);\n      }, 500);\n      return () => clearInterval(interval);\n    }\n  }, [showPressToStart, type]);\n\n  const defaultTitles = {\n    start: ` ${t.games.readyToPlay}`,\n    pause: ` ${t.games.pause}`,\n    gameOver: ` ${t.games.gameOver}`,\n    levelComplete: ` ${t.games.levelComplete}`,\n    custom: '',\n  };\n\n  const displayTitle = title || defaultTitles[type];\n\n  return (\n    <div className=\"game-overlay\">\n      {/* Background Overlay */}\n      <div className=\"game-overlay-bg\" />\n\n      {/* Content Card */}\n      <div className=\"game-overlay-card\">\n        {/* Decorative Border Glow */}\n        <div className=\"game-overlay-glow\" style={{ backgroundColor: brandColor }} />\n\n        <div className=\"game-overlay-content\">\n          {/* Title */}\n          {displayTitle && <h2 className=\"game-overlay-title\">{displayTitle}</h2>}\n\n          {/* Score Display */}\n          {score !== undefined && (\n            <div className=\"game-overlay-score\">\n              <p className=\"game-overlay-score-label\">{t.games.finalScore}</p>\n              <p className=\"game-overlay-score-value\">{score.toLocaleString()}</p>\n            </div>\n          )}\n\n          {/* Level Display */}\n          {level !== undefined && type === 'levelComplete' && (\n            <div className=\"game-overlay-level\">\n              <p className=\"game-overlay-level-label\">{t.games.level}</p>\n              <p className=\"game-overlay-level-value\">{level}</p>\n            </div>\n          )}\n\n          {/* Custom Message */}\n          {message && <p className=\"game-overlay-message\">{message}</p>}\n\n          {/* Custom Content */}\n          {customContent}\n\n          {/* Action Button or Press to Start */}\n          {type === 'start' && showPressToStart && !onAction ? (\n            <p\n              className=\"game-overlay-blink\"\n              style={{ color: brandColor, opacity: showBlink ? 1 : 0 }}\n            >\n              {t.games.pressSpaceToStart}\n            </p>\n          ) : onAction && actionText ? (\n            <button\n              onClick={onAction}\n              className=\"game-overlay-button\"\n              style={{\n                backgroundColor: brandColor,\n              }}\n            >\n              {actionText}\n            </button>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n","/**\n * Key codes for input handling\n */\nexport const KEY = {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  A: 65,\n  D: 68,\n  S: 83,\n  W: 87,\n  SPACE: 32,\n};\n\n/**\n * Road configuration constants\n */\nexport const ROAD = {\n  LENGTH: {\n    NONE: 0,\n    SHORT: 25,\n    MEDIUM: 50,\n    LONG: 100,\n  },\n  HILL: {\n    NONE: 0,\n    LOW: 20,\n    MEDIUM: 40,\n    HIGH: 60,\n  },\n  CURVE: {\n    NONE: 0,\n    EASY: 2,\n    MEDIUM: 4,\n    HARD: 6,\n  },\n};\n\n/**\n * Game colors\n */\nexport const COLORS = {\n  SKY: '#72D7EE',\n  TREE: '#005108',\n  FOG: '#005108',\n  LIGHT: {\n    road: '#6B6B6B',\n    grass: '#10AA10',\n    rumble: '#555555',\n    lane: '#CCCCCC',\n  },\n  DARK: {\n    road: '#696969',\n    grass: '#009A00',\n    rumble: '#BBBBBB',\n  },\n  START: {\n    road: 'white',\n    grass: 'white',\n    rumble: 'white',\n  },\n  FINISH: {\n    road: 'black',\n    grass: 'black',\n    rumble: 'black',\n  },\n};\n\n/**\n * Background layer configuration\n */\nexport const BACKGROUND = {\n  HILLS: { x: 5, y: 5, w: 1280, h: 480 },\n  SKY: { x: 5, y: 495, w: 1280, h: 480 },\n  TREES: { x: 5, y: 985, w: 1280, h: 480 },\n};\n\n/**\n * Sprite definitions\n */\nconst SPRITES_DEF = {\n  PALM_TREE: { x: 5, y: 5, w: 215, h: 540 },\n  BILLBOARD08: { x: 230, y: 5, w: 385, h: 265 },\n  TREE1: { x: 625, y: 5, w: 360, h: 360 },\n  DEAD_TREE1: { x: 5, y: 555, w: 135, h: 332 },\n  BILLBOARD09: { x: 150, y: 555, w: 328, h: 282 },\n  BOULDER3: { x: 230, y: 280, w: 320, h: 220 },\n  COLUMN: { x: 995, y: 5, w: 200, h: 315 },\n  BILLBOARD01: { x: 625, y: 375, w: 300, h: 170 },\n  BILLBOARD06: { x: 488, y: 555, w: 298, h: 190 },\n  BILLBOARD05: { x: 5, y: 897, w: 298, h: 190 },\n  BILLBOARD07: { x: 313, y: 897, w: 298, h: 190 },\n  BOULDER2: { x: 621, y: 897, w: 298, h: 140 },\n  TREE2: { x: 1205, y: 5, w: 282, h: 295 },\n  BILLBOARD04: { x: 1205, y: 310, w: 268, h: 170 },\n  DEAD_TREE2: { x: 1205, y: 490, w: 150, h: 260 },\n  BOULDER1: { x: 1205, y: 760, w: 168, h: 248 },\n  BUSH1: { x: 5, y: 1097, w: 240, h: 155 },\n  CACTUS: { x: 929, y: 897, w: 235, h: 118 },\n  BUSH2: { x: 255, y: 1097, w: 232, h: 152 },\n  BILLBOARD03: { x: 5, y: 1262, w: 230, h: 220 },\n  BILLBOARD02: { x: 245, y: 1262, w: 215, h: 220 },\n  STUMP: { x: 995, y: 330, w: 195, h: 140 },\n  SEMI: { x: 1365, y: 490, w: 122, h: 144 },\n  TRUCK: { x: 1365, y: 644, w: 100, h: 78 },\n  CAR03: { x: 1383, y: 760, w: 88, h: 55 },\n  CAR02: { x: 1383, y: 825, w: 80, h: 59 },\n  CAR04: { x: 1383, y: 894, w: 80, h: 57 },\n  CAR01: { x: 1205, y: 1018, w: 80, h: 56 },\n  PLAYER_UPHILL_LEFT: { x: 1383, y: 961, w: 80, h: 45 },\n  PLAYER_UPHILL_STRAIGHT: { x: 1295, y: 1018, w: 80, h: 45 },\n  PLAYER_UPHILL_RIGHT: { x: 1385, y: 1018, w: 80, h: 45 },\n  PLAYER_RIGHT: { x: 995, y: 480, w: 80, h: 41 },\n  PLAYER_STRAIGHT: { x: 1085, y: 480, w: 80, h: 41 },\n  PLAYER_LEFT: { x: 995, y: 531, w: 80, h: 41 },\n  COIN: { x: 1395, y: 1092, w: 60, h: 60 },\n};\n\n// Add computed properties\nconst SPRITES_COMPUTED = {\n  ...SPRITES_DEF,\n  SCALE: 0.3 * (1 / SPRITES_DEF.PLAYER_STRAIGHT.w),\n  BILLBOARDS: [\n    SPRITES_DEF.BILLBOARD01,\n    SPRITES_DEF.BILLBOARD02,\n    SPRITES_DEF.BILLBOARD03,\n    SPRITES_DEF.BILLBOARD04,\n    SPRITES_DEF.BILLBOARD05,\n    SPRITES_DEF.BILLBOARD06,\n    SPRITES_DEF.BILLBOARD07,\n    SPRITES_DEF.BILLBOARD08,\n    SPRITES_DEF.BILLBOARD09,\n  ],\n  PLANTS: [\n    SPRITES_DEF.TREE1,\n    SPRITES_DEF.TREE2,\n    SPRITES_DEF.DEAD_TREE1,\n    SPRITES_DEF.DEAD_TREE2,\n    SPRITES_DEF.PALM_TREE,\n    SPRITES_DEF.BUSH1,\n    SPRITES_DEF.BUSH2,\n    SPRITES_DEF.CACTUS,\n    SPRITES_DEF.STUMP,\n    SPRITES_DEF.BOULDER1,\n    SPRITES_DEF.BOULDER2,\n    SPRITES_DEF.BOULDER3,\n  ],\n  CARS: [\n    SPRITES_DEF.CAR01,\n    SPRITES_DEF.CAR02,\n    SPRITES_DEF.CAR03,\n    SPRITES_DEF.CAR04,\n    SPRITES_DEF.SEMI,\n    SPRITES_DEF.TRUCK,\n  ],\n} as const;\n\nexport const SPRITES = SPRITES_COMPUTED;\n\n/**\n * Default game configuration\n */\nexport const DEFAULT_CONFIG = {\n  fps: 60,\n  width: 720,\n  height: 960,\n  roadWidth: 2000,\n  segmentLength: 200,\n  rumbleLength: 3,\n  lanes: 3,\n  fieldOfView: 100,\n  cameraHeight: 1000,\n  drawDistance: 300,\n  fogDensity: 5,\n  centrifugal: 0.3,\n  skySpeed: 0.001,\n  hillSpeed: 0.002,\n  treeSpeed: 0.003,\n  totalCars: 200,\n};\n","/**\n * Math utilities for 3D car racing game\n * Optimized for performance in game loop\n */\n\nexport class MathUtils {\n  /**\n   * Get current timestamp\n   */\n  static timestamp(): number {\n    return performance.now();\n  }\n\n  /**\n   * Convert to integer with default value\n   */\n  static toInt(obj: string | number | null | undefined, def: number = 0): number {\n    if (obj !== null && obj !== undefined) {\n      const x = parseInt(String(obj), 10);\n      if (!isNaN(x)) return x;\n    }\n    return def;\n  }\n\n  /**\n   * Convert to float with default value\n   */\n  static toFloat(obj: string | number | null | undefined, def: number = 0.0): number {\n    if (obj !== null && obj !== undefined) {\n      const x = parseFloat(String(obj));\n      if (!isNaN(x)) return x;\n    }\n    return def;\n  }\n\n  /**\n   * Clamp value between min and max\n   */\n  static limit(value: number, min: number, max: number): number {\n    return Math.max(min, Math.min(value, max));\n  }\n\n  /**\n   * Get random integer between min and max (inclusive)\n   */\n  static randomInt(min: number, max: number): number {\n    return Math.round(this.interpolate(min, max, Math.random()));\n  }\n\n  /**\n   * Get random choice from array\n   */\n  static randomChoice<T>(options: T[]): T {\n    return options[this.randomInt(0, options.length - 1)];\n  }\n\n  /**\n   * Calculate percent remaining\n   */\n  static percentRemaining(n: number, total: number): number {\n    return (n % total) / total;\n  }\n\n  /**\n   * Accelerate value\n   */\n  static accelerate(v: number, accel: number, dt: number): number {\n    return v + accel * dt;\n  }\n\n  /**\n   * Linear interpolation\n   */\n  static interpolate(a: number, b: number, percent: number): number {\n    return a + (b - a) * percent;\n  }\n\n  /**\n   * Ease in interpolation\n   */\n  static easeIn(a: number, b: number, percent: number): number {\n    return a + (b - a) * Math.pow(percent, 2);\n  }\n\n  /**\n   * Ease out interpolation\n   */\n  static easeOut(a: number, b: number, percent: number): number {\n    return a + (b - a) * (1 - Math.pow(1 - percent, 2));\n  }\n\n  /**\n   * Ease in-out interpolation\n   */\n  static easeInOut(a: number, b: number, percent: number): number {\n    return a + (b - a) * (-Math.cos(percent * Math.PI) / 2 + 0.5);\n  }\n\n  /**\n   * Exponential fog calculation\n   */\n  static exponentialFog(distance: number, density: number): number {\n    return 1 / Math.pow(Math.E, distance * distance * density);\n  }\n\n  /**\n   * Increase value with wrapping\n   */\n  static increase(start: number, increment: number, max: number): number {\n    let result = start + increment;\n    while (result >= max) result -= max;\n    while (result < 0) result += max;\n    return result;\n  }\n\n  /**\n   * Check overlap between two objects\n   * Optimized version with early exit\n   */\n  static overlap(x1: number, w1: number, x2: number, w2: number, percent: number = 1): boolean {\n    const half1 = percent * 0.5;\n    const half2 = percent * 0.5;\n    const min1 = x1 - w1 * half1;\n    const max1 = x1 + w1 * half1;\n    const min2 = x2 - w2 * half2;\n    const max2 = x2 + w2 * half2;\n    return !(max1 < min2 || min1 > max2);\n  }\n\n  /**\n   * Project 3D point to 2D screen\n   * Optimized for performance\n   */\n  static project(\n    p: {\n      world: { x?: number; y?: number; z?: number };\n      camera: { x?: number; y?: number; z?: number };\n      screen: { x?: number; y?: number; w?: number; scale?: number };\n    },\n    cameraX: number,\n    cameraY: number,\n    cameraZ: number,\n    cameraDepth: number,\n    width: number,\n    height: number,\n    roadWidth: number\n  ): void {\n    p.camera.x = (p.world.x || 0) - cameraX;\n    p.camera.y = (p.world.y || 0) - cameraY;\n    p.camera.z = (p.world.z || 0) - cameraZ;\n    p.screen.scale = cameraDepth / p.camera.z;\n    p.screen.x = Math.round(width / 2 + (p.screen.scale * p.camera.x * width) / 2);\n    p.screen.y = Math.round(height / 2 - (p.screen.scale * p.camera.y * height) / 2);\n    p.screen.w = Math.round((p.screen.scale * roadWidth * width) / 2);\n  }\n}\n\n// Pre-calculated values for performance\nexport const DEG_TO_RAD = Math.PI / 180;\nexport const RAD_TO_DEG = 180 / Math.PI;\n\n/**\n * Fast sine approximation for non-critical calculations\n */\nexport function fastSin(x: number): number {\n  x = x % (2 * Math.PI);\n  if (x < 0) x += 2 * Math.PI;\n\n  if (x < Math.PI) {\n    return (4 * x * (Math.PI - x)) / (Math.PI * Math.PI);\n  } else {\n    x -= Math.PI;\n    return (-4 * x * (Math.PI - x)) / (Math.PI * Math.PI);\n  }\n}\n\n/**\n * Fast cosine approximation for non-critical calculations\n */\nexport function fastCos(x: number): number {\n  return fastSin(x + Math.PI / 2);\n}\n","import type { RoadSegment, Car, Sprite } from '../types';\nimport { COLORS, SPRITES, ROAD } from '../constants';\nimport { MathUtils } from '../utils/math';\n\n/**\n * Road generation and management system\n * Optimized for performance and memory usage\n */\nexport class RoadEngine {\n  private segments: RoadSegment[] = [];\n  private segmentLength: number;\n  private rumbleLength: number;\n  private trackLength: number = 0;\n  private billboardPlacements: Map<string, number> = new Map();\n  private billboardImpressions: Map<string, number> = new Map();\n  private billboardInstances: Map<\n    string,\n    { segmentIndex: number; offset: number; seenInLaps: Set<number> }[]\n  > = new Map();\n  private nextBillboardId: number = 0;\n\n  constructor(segmentLength: number = 200, rumbleLength: number = 3) {\n    this.segmentLength = segmentLength;\n    this.rumbleLength = rumbleLength;\n  }\n\n  /**\n   * Get all road segments\n   */\n  getSegments(): RoadSegment[] {\n    return this.segments;\n  }\n\n  /**\n   * Get track length\n   */\n  getTrackLength(): number {\n    return this.trackLength;\n  }\n\n  /**\n   * Get billboard placements count\n   */\n  getBillboardPlacements(): Map<string, number> {\n    return new Map(this.billboardPlacements);\n  }\n\n  /**\n   * Get billboard impressions count\n   */\n  getBillboardImpressions(): Map<string, number> {\n    return new Map(this.billboardImpressions);\n  }\n\n  /**\n   * Record billboard impression for a specific segment and offset in a specific lap\n   */\n  recordBillboardImpression(\n    segmentIndex: number,\n    offset: number,\n    billboardName: string,\n    currentLap: number\n  ): void {\n    const instances = this.billboardInstances.get(billboardName);\n    if (!instances) return;\n\n    // Find the specific billboard instance at this segment and offset\n    const instance = instances.find(\n      (inst) => inst.segmentIndex === segmentIndex && Math.abs(inst.offset - offset) < 0.1 // Small tolerance for floating point comparison\n    );\n\n    if (instance && !instance.seenInLaps.has(currentLap)) {\n      instance.seenInLaps.add(currentLap);\n      const current = this.billboardImpressions.get(billboardName) || 0;\n      this.billboardImpressions.set(billboardName, current + 1);\n    }\n  }\n\n  /**\n   * Get billboard statistics as an object\n   */\n  getBillboardStats(totalLaps: number): {\n    placements: Record<string, number>;\n    impressions: Record<string, number>;\n    maxPossibleImpressions: Record<string, number>;\n    trackLength: number;\n    totalSegments: number;\n    totalLaps: number;\n  } {\n    const placements: Record<string, number> = {};\n    const impressions: Record<string, number> = {};\n    const maxPossibleImpressions: Record<string, number> = {};\n\n    this.billboardPlacements.forEach((count, name) => {\n      placements[name] = count;\n      maxPossibleImpressions[name] = count * totalLaps;\n    });\n\n    this.billboardImpressions.forEach((count, name) => {\n      impressions[name] = count;\n    });\n\n    // Calculate a realistic track length in meters\n    // Game units don't correspond to real meters, so we apply a scale factor\n    // Adjusted for actual segment counts (typically 3000-6000 segments)\n    // Target track lengths: 2-4 km for realistic racing circuits\n    const realisticTrackLength = Math.round(this.segments.length * 0.65);\n\n    return {\n      placements,\n      impressions,\n      maxPossibleImpressions,\n      trackLength: realisticTrackLength,\n      totalSegments: this.segments.length,\n      totalLaps,\n    };\n  }\n\n  /**\n   * Find segment by Z position\n   */\n  findSegment(z: number): RoadSegment {\n    return this.segments[Math.floor(z / this.segmentLength) % this.segments.length];\n  }\n\n  /**\n   * Get last Y position\n   */\n  private lastY(): number {\n    return this.segments.length === 0 ? 0 : this.segments[this.segments.length - 1].p2.world.y;\n  }\n\n  /**\n   * Add a road segment\n   */\n  private addSegment(curve: number, y: number): void {\n    const n = this.segments.length;\n    this.segments.push({\n      index: n,\n      p1: {\n        world: { y: this.lastY(), z: n * this.segmentLength },\n        camera: { x: 0, y: 0, z: 0 },\n        screen: { x: 0, y: 0, w: 0, scale: 0 },\n      },\n      p2: {\n        world: { y: y, z: (n + 1) * this.segmentLength },\n        camera: { x: 0, y: 0, z: 0 },\n        screen: { x: 0, y: 0, w: 0, scale: 0 },\n      },\n      curve: curve,\n      sprites: [],\n      cars: [],\n      color: Math.floor(n / this.rumbleLength) % 2 ? COLORS.DARK : COLORS.LIGHT,\n    });\n  }\n\n  /**\n   * Add a sprite to a segment\n   */\n  private addSprite(n: number, sprite: Sprite, offset: number): void {\n    if (this.segments[n]) {\n      const spriteInstance = { source: sprite, offset: offset };\n\n      // If it's a billboard, track it with a unique ID\n      const billboardName = this.getBillboardName(sprite);\n      if (billboardName) {\n        const billboardId = `${billboardName}_${this.nextBillboardId++}`;\n        // Store the billboard ID in the sprite instance for later reference\n        (spriteInstance as any).billboardId = billboardId;\n\n        // Track the instance\n        if (!this.billboardInstances.has(billboardName)) {\n          this.billboardInstances.set(billboardName, []);\n        }\n        this.billboardInstances.get(billboardName)!.push({\n          segmentIndex: n,\n          offset: offset,\n          seenInLaps: new Set<number>(),\n        });\n      }\n\n      this.segments[n].sprites.push(spriteInstance);\n    }\n  }\n\n  /**\n   * Add a road section with easing\n   */\n  private addRoad(enter: number, hold: number, leave: number, curve: number, y: number): void {\n    const startY = this.lastY();\n    const endY = startY + MathUtils.toInt(y, 0) * this.segmentLength;\n    const total = enter + hold + leave;\n\n    // Enter phase with easing\n    for (let n = 0; n < enter; n++) {\n      this.addSegment(\n        MathUtils.easeIn(0, curve, n / enter),\n        MathUtils.easeInOut(startY, endY, n / total)\n      );\n    }\n\n    // Hold phase\n    for (let n = 0; n < hold; n++) {\n      this.addSegment(curve, MathUtils.easeInOut(startY, endY, (enter + n) / total));\n    }\n\n    // Leave phase with easing\n    for (let n = 0; n < leave; n++) {\n      this.addSegment(\n        MathUtils.easeInOut(curve, 0, n / leave),\n        MathUtils.easeInOut(startY, endY, (enter + hold + n) / total)\n      );\n    }\n  }\n\n  /**\n   * Add straight road section\n   */\n  private addStraight(num: number = ROAD.LENGTH.MEDIUM): void {\n    this.addRoad(num, num, num, 0, 0);\n  }\n\n  /**\n   * Add hill section\n   */\n  private addHill(num: number = ROAD.LENGTH.MEDIUM, height: number = ROAD.HILL.MEDIUM): void {\n    this.addRoad(num, num, num, 0, height);\n  }\n\n  /**\n   * Add curve section\n   */\n  private addCurve(\n    num: number = ROAD.LENGTH.MEDIUM,\n    curve: number = ROAD.CURVE.MEDIUM,\n    height: number = ROAD.HILL.NONE\n  ): void {\n    this.addRoad(num, num, num, curve, height);\n  }\n\n  /**\n   * Add rolling hills section\n   */\n  private addLowRollingHills(\n    num: number = ROAD.LENGTH.SHORT,\n    height: number = ROAD.HILL.LOW\n  ): void {\n    this.addRoad(num, num, num, 0, height / 2);\n    this.addRoad(num, num, num, 0, -height);\n    this.addRoad(num, num, num, ROAD.CURVE.EASY, height);\n    this.addRoad(num, num, num, 0, 0);\n    this.addRoad(num, num, num, -ROAD.CURVE.EASY, height / 2);\n    this.addRoad(num, num, num, 0, 0);\n  }\n\n  /**\n   * Add S-curves section\n   */\n  private addSCurves(): void {\n    this.addRoad(\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      -ROAD.CURVE.EASY,\n      ROAD.HILL.NONE\n    );\n    this.addRoad(\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      ROAD.CURVE.MEDIUM,\n      ROAD.HILL.MEDIUM\n    );\n    this.addRoad(\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      ROAD.CURVE.EASY,\n      -ROAD.HILL.LOW\n    );\n    this.addRoad(\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      -ROAD.CURVE.EASY,\n      ROAD.HILL.MEDIUM\n    );\n    this.addRoad(\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      ROAD.LENGTH.MEDIUM,\n      -ROAD.CURVE.MEDIUM,\n      -ROAD.HILL.MEDIUM\n    );\n  }\n\n  /**\n   * Add bumps section\n   */\n  private addBumps(): void {\n    this.addRoad(10, 10, 10, 0, 5);\n    this.addRoad(10, 10, 10, 0, -2);\n    this.addRoad(10, 10, 10, 0, -5);\n    this.addRoad(10, 10, 10, 0, 8);\n    this.addRoad(10, 10, 10, 0, 5);\n    this.addRoad(10, 10, 10, 0, -7);\n    this.addRoad(10, 10, 10, 0, 5);\n    this.addRoad(10, 10, 10, 0, -2);\n  }\n\n  /**\n   * Add downhill to end section\n   */\n  private addDownhillToEnd(num: number = 200): void {\n    this.addRoad(num, num, num, -ROAD.CURVE.EASY, -this.lastY() / this.segmentLength);\n  }\n\n  /**\n   * Reset and rebuild road\n   */\n  reset(track: number = 0, playerZ: number): void {\n    this.segments = [];\n\n    // Build track based on track number\n    switch (track) {\n      case 1: // Speed Circuit - Fast track with long straights\n        this.addStraight(ROAD.LENGTH.LONG);\n        this.addCurve(ROAD.LENGTH.SHORT, ROAD.CURVE.EASY, ROAD.HILL.NONE);\n        this.addStraight(ROAD.LENGTH.LONG * 2);\n        this.addCurve(ROAD.LENGTH.SHORT, -ROAD.CURVE.EASY, ROAD.HILL.NONE);\n        this.addStraight(ROAD.LENGTH.LONG);\n        this.addHill(ROAD.LENGTH.MEDIUM, ROAD.HILL.LOW);\n        this.addStraight(ROAD.LENGTH.LONG);\n        this.addCurve(ROAD.LENGTH.MEDIUM, ROAD.CURVE.MEDIUM, ROAD.HILL.NONE);\n        this.addStraight(ROAD.LENGTH.LONG * 2);\n        this.addCurve(ROAD.LENGTH.SHORT, -ROAD.CURVE.HARD, ROAD.HILL.NONE);\n        this.addStraight(ROAD.LENGTH.MEDIUM);\n        this.addDownhillToEnd();\n        break;\n\n      case 2: // Mountain Pass - Challenging hills and curves\n        this.addHill(ROAD.LENGTH.SHORT, ROAD.HILL.MEDIUM);\n        this.addCurve(ROAD.LENGTH.MEDIUM, ROAD.CURVE.HARD, ROAD.HILL.HIGH);\n        this.addHill(ROAD.LENGTH.LONG, -ROAD.HILL.MEDIUM);\n        this.addSCurves();\n        this.addHill(ROAD.LENGTH.MEDIUM, ROAD.HILL.HIGH);\n        this.addCurve(ROAD.LENGTH.LONG, -ROAD.CURVE.MEDIUM, -ROAD.HILL.LOW);\n        this.addBumps();\n        this.addHill(ROAD.LENGTH.LONG, ROAD.HILL.MEDIUM);\n        this.addCurve(ROAD.LENGTH.MEDIUM, ROAD.CURVE.EASY, -ROAD.HILL.HIGH);\n        this.addSCurves();\n        this.addHill(ROAD.LENGTH.SHORT, -ROAD.HILL.MEDIUM);\n        this.addDownhillToEnd();\n        break;\n\n      case 3: // Technical Circuit - Lots of curves\n        this.addStraight(ROAD.LENGTH.SHORT);\n        this.addSCurves();\n        this.addCurve(ROAD.LENGTH.MEDIUM, ROAD.CURVE.HARD, ROAD.HILL.NONE);\n        this.addCurve(ROAD.LENGTH.MEDIUM, -ROAD.CURVE.HARD, ROAD.HILL.NONE);\n        this.addSCurves();\n        this.addCurve(ROAD.LENGTH.SHORT, ROAD.CURVE.EASY, ROAD.HILL.LOW);\n        this.addCurve(ROAD.LENGTH.SHORT, -ROAD.CURVE.EASY, -ROAD.HILL.LOW);\n        this.addBumps();\n        this.addSCurves();\n        this.addCurve(ROAD.LENGTH.LONG, ROAD.CURVE.MEDIUM, ROAD.HILL.MEDIUM);\n        this.addStraight(ROAD.LENGTH.SHORT);\n        this.addSCurves();\n        this.addDownhillToEnd();\n        break;\n\n      default: // Track 0 - Original balanced track\n        this.addStraight(ROAD.LENGTH.SHORT);\n        this.addLowRollingHills();\n        this.addSCurves();\n        this.addCurve(ROAD.LENGTH.MEDIUM, ROAD.CURVE.MEDIUM, ROAD.HILL.LOW);\n        this.addBumps();\n        this.addLowRollingHills();\n        this.addCurve(ROAD.LENGTH.LONG * 2, ROAD.CURVE.MEDIUM, ROAD.HILL.MEDIUM);\n        this.addStraight();\n        this.addHill(ROAD.LENGTH.MEDIUM, ROAD.HILL.HIGH);\n        this.addSCurves();\n        this.addCurve(ROAD.LENGTH.LONG, -ROAD.CURVE.MEDIUM, ROAD.HILL.NONE);\n        this.addHill(ROAD.LENGTH.LONG, ROAD.HILL.HIGH);\n        this.addCurve(ROAD.LENGTH.LONG, ROAD.CURVE.MEDIUM, -ROAD.HILL.LOW);\n        this.addBumps();\n        this.addHill(ROAD.LENGTH.LONG, -ROAD.HILL.MEDIUM);\n        this.addStraight();\n        this.addSCurves();\n        this.addDownhillToEnd();\n    }\n\n    this.resetSprites();\n\n    // Mark start and finish lines\n    const playerSegment = this.findSegment(playerZ);\n    this.segments[playerSegment.index + 2].color = COLORS.START;\n    this.segments[playerSegment.index + 3].color = COLORS.START;\n\n    for (let n = 0; n < this.rumbleLength; n++) {\n      this.segments[this.segments.length - 1 - n].color = COLORS.FINISH;\n    }\n\n    this.trackLength = this.segments.length * this.segmentLength;\n  }\n\n  /**\n   * Reset sprites on the track\n   */\n  private resetSprites(): void {\n    // Clear billboard tracking\n    this.billboardPlacements.clear();\n    this.billboardImpressions.clear();\n    this.billboardInstances.clear();\n    this.nextBillboardId = 0;\n\n    // Add billboards and plants randomly\n    for (let n = 20; n < this.segments.length - 50; n += 60) {\n      const billboard = MathUtils.randomChoice([...SPRITES.BILLBOARDS]);\n      const billboardName = this.getBillboardName(billboard);\n\n      // Track billboard placement\n      if (billboardName) {\n        const current = this.billboardPlacements.get(billboardName) || 0;\n        this.billboardPlacements.set(billboardName, current + 1);\n      }\n\n      this.addSprite(\n        n + MathUtils.randomInt(0, 50),\n        billboard,\n        MathUtils.randomChoice([1, -1, 1.1, -1.1, 1.2, -1.2])\n      );\n\n      for (let i = 0; i < 20; i++) {\n        this.addSprite(\n          n + MathUtils.randomInt(0, 50),\n          MathUtils.randomChoice([...SPRITES.PLANTS]),\n          MathUtils.randomChoice([1.1, -1.1]) * (1 + Math.random())\n        );\n      }\n    }\n\n    // Add plants along the track\n    for (let n = 10; n < this.segments.length; n += 3 + Math.floor(n / 100)) {\n      this.addSprite(\n        n,\n        MathUtils.randomChoice([...SPRITES.PLANTS]),\n        MathUtils.randomChoice([1, -1]) * (1 + Math.random() * 5)\n      );\n    }\n\n    // Add columns randomly\n    for (let n = 120; n < this.segments.length; n += 30 + Math.floor(n / 20)) {\n      this.addSprite(n, SPRITES.COLUMN, MathUtils.randomChoice([1, -1]) * (1 + Math.random() * 5));\n    }\n\n    // Add coins in lanes\n    const LANE_POSITIONS = [-0.5, 0, 0.5];\n    for (let n = 0; n < this.segments.length; n += 30) {\n      this.addSprite(n, SPRITES.COIN, MathUtils.randomChoice(LANE_POSITIONS));\n    }\n  }\n\n  /**\n   * Remove all coins from the track\n   */\n  removeAllCoins(): void {\n    for (const segment of this.segments) {\n      segment.sprites = segment.sprites.filter((sprite) => sprite.source !== SPRITES.COIN);\n    }\n  }\n\n  /**\n   * Reset cars on the track\n   */\n  resetCars(totalCars: number, maxSpeed: number): Car[] {\n    // Clear existing cars from segments\n    for (const segment of this.segments) {\n      segment.cars = [];\n    }\n\n    const cars: Car[] = [];\n\n    for (let n = 0; n < totalCars; n++) {\n      const offset = Math.random() * MathUtils.randomChoice([-0.8, 0.8]);\n      const z = Math.floor(Math.random() * this.segments.length) * this.segmentLength;\n      const sprite = MathUtils.randomChoice([...SPRITES.CARS]);\n      const speed = maxSpeed / 4 + (Math.random() * maxSpeed) / (sprite === SPRITES.SEMI ? 4 : 2);\n\n      const car: Car = {\n        offset,\n        z,\n        sprite,\n        speed,\n        percent: MathUtils.percentRemaining(z, this.segmentLength),\n      };\n      const segment = this.findSegment(car.z);\n      segment.cars.push(car);\n      cars.push(car);\n    }\n\n    return cars;\n  }\n\n  /**\n   * Get billboard name from sprite object\n   */\n  getBillboardName(sprite: Sprite): string | null {\n    // Check each billboard sprite to find which one matches\n    if (sprite === SPRITES.BILLBOARD01) return 'BILLBOARD01';\n    if (sprite === SPRITES.BILLBOARD02) return 'BILLBOARD02';\n    if (sprite === SPRITES.BILLBOARD03) return 'BILLBOARD03';\n    if (sprite === SPRITES.BILLBOARD04) return 'BILLBOARD04';\n    if (sprite === SPRITES.BILLBOARD05) return 'BILLBOARD05';\n    if (sprite === SPRITES.BILLBOARD06) return 'BILLBOARD06';\n    if (sprite === SPRITES.BILLBOARD07) return 'BILLBOARD07';\n    if (sprite === SPRITES.BILLBOARD08) return 'BILLBOARD08';\n    if (sprite === SPRITES.BILLBOARD09) return 'BILLBOARD09';\n    return null;\n  }\n}\n","import type { Car, RoadSegment, InputState } from '../types';\nimport { SPRITES } from '../constants';\nimport { MathUtils } from '../utils/math';\n\n/**\n * Physics and collision engine for 3D car racing game\n * Optimized for performance with spatial optimizations\n */\nexport class PhysicsEngine {\n  private maxSpeed: number;\n  private accel: number;\n  private breaking: number;\n  private decel: number;\n  private offRoadDecel: number;\n  private offRoadLimit: number;\n  private centrifugal: number;\n  private trackLength: number;\n\n  constructor(config: {\n    maxSpeed: number;\n    accel: number;\n    breaking: number;\n    decel: number;\n    offRoadDecel: number;\n    offRoadLimit: number;\n    centrifugal: number;\n    trackLength: number;\n  }) {\n    this.maxSpeed = config.maxSpeed;\n    this.accel = config.accel;\n    this.breaking = config.breaking;\n    this.decel = config.decel;\n    this.offRoadDecel = config.offRoadDecel;\n    this.offRoadLimit = config.offRoadLimit;\n    this.centrifugal = config.centrifugal;\n    this.trackLength = config.trackLength;\n  }\n\n  /**\n   * Update track length\n   */\n  updateTrackLength(trackLength: number): void {\n    this.trackLength = trackLength;\n  }\n\n  /**\n   * Update player physics\n   */\n  updatePlayer(\n    playerX: number,\n    speed: number,\n    position: number,\n    inputState: InputState,\n    playerSegment: RoadSegment,\n    dt: number,\n    _findSegment: (z: number) => RoadSegment,\n    //roadWidth: number = 2000,\n    canvasWidth: number = 720,\n    canvasHeight: number = 960\n  ): {\n    playerX: number;\n    speed: number;\n    position: number;\n    pointsEarned: number;\n    crashed: boolean;\n    coinCollected?: { x: number; y: number };\n    crashPosition?: { x: number; y: number };\n  } {\n    const playerW = SPRITES.PLAYER_STRAIGHT.w * SPRITES.SCALE;\n    const speedPercent = speed / this.maxSpeed;\n    const dx = dt * 2 * speedPercent;\n    let pointsEarned = 0;\n    let crashed = false;\n\n    // Handle movement\n    if (inputState.left) {\n      playerX = playerX - dx;\n    } else if (inputState.right) {\n      playerX = playerX + dx;\n    }\n\n    // Apply centrifugal force\n    playerX = playerX - dx * speedPercent * playerSegment.curve * this.centrifugal;\n\n    // Handle acceleration/deceleration\n    if (inputState.faster) {\n      speed = MathUtils.accelerate(speed, this.accel, dt);\n    } else if (inputState.slower) {\n      speed = MathUtils.accelerate(speed, this.breaking, dt);\n    } else {\n      speed = MathUtils.accelerate(speed, this.decel, dt);\n    }\n\n    // Handle off-road physics and sprite collisions\n    if (playerX < -1 || playerX > 1) {\n      if (speed > this.offRoadLimit) {\n        speed = MathUtils.accelerate(speed, this.offRoadDecel, dt);\n      }\n\n      // Check sprite collisions\n      for (const sprite of playerSegment.sprites) {\n        const spriteW = sprite.source.w * SPRITES.SCALE;\n        if (\n          MathUtils.overlap(\n            playerX,\n            playerW,\n            sprite.offset + (spriteW / 2) * (sprite.offset > 0 ? 1 : -1),\n            spriteW\n          )\n        ) {\n          speed = this.maxSpeed / 5;\n          position = MathUtils.increase(playerSegment.p1.world.z, -playerW, this.trackLength);\n          break;\n        }\n      }\n    }\n\n    // Handle coin collection\n    let coinCollected: { x: number; y: number } | undefined;\n    for (let i = playerSegment.sprites.length - 1; i >= 0; i--) {\n      const sprite = playerSegment.sprites[i];\n      if (sprite.source === SPRITES.COIN) {\n        const coinW = sprite.source.w * SPRITES.SCALE;\n        if (\n          MathUtils.overlap(\n            playerX,\n            playerW,\n            sprite.offset + (coinW / 10) * (sprite.offset > 0 ? 1 : -1),\n            coinW\n          )\n        ) {\n          // Store coin position for animation\n          // Since we're in the physics update, screen coordinates might not be available\n          // We'll use a simple approximation based on player position\n          coinCollected = {\n            x: canvasWidth / 2 + sprite.offset * canvasWidth * 0.3, // Approximate screen position\n            y: canvasHeight / 2 - 100, // Slightly above center\n          };\n          // Remove coin\n          playerSegment.sprites.splice(i, 1);\n          // Award points based on speed\n          pointsEarned = Math.round(speed / 1000);\n        }\n      }\n    }\n\n    // Handle car collisions\n    let crashPosition: { x: number; y: number } | undefined;\n    for (const car of playerSegment.cars) {\n      const carW = car.sprite.w * SPRITES.SCALE;\n      if (speed > car.speed) {\n        if (MathUtils.overlap(playerX, playerW, car.offset, carW, 0.6)) {\n          speed = car.speed * (car.speed / speed);\n          position = MathUtils.increase(car.z, -playerW, this.trackLength);\n          pointsEarned = -3; // Crash penalty\n          crashed = true;\n          // Store crash position for animation\n          crashPosition = {\n            x: canvasWidth / 2 + car.offset * canvasWidth * 0.3, // Approximate position of collision\n            y: canvasHeight / 2 - 50, // Slightly above center\n          };\n          break;\n        }\n      }\n    }\n\n    // Clamp values\n    playerX = MathUtils.limit(playerX, -3, 3);\n    speed = MathUtils.limit(speed, 0, this.maxSpeed);\n\n    return {\n      playerX,\n      speed,\n      position,\n      pointsEarned,\n      crashed,\n      coinCollected,\n      crashPosition,\n    };\n  }\n\n  /**\n   * Update all cars with optimized AI\n   */\n  updateCars(\n    cars: Car[],\n    dt: number,\n    playerSegment: RoadSegment,\n    playerX: number,\n    playerSpeed: number,\n    drawDistance: number,\n    findSegment: (z: number) => RoadSegment,\n    segments: RoadSegment[]\n  ): void {\n    const playerW = SPRITES.PLAYER_STRAIGHT.w * SPRITES.SCALE;\n\n    for (const car of cars) {\n      const oldSegment = findSegment(car.z);\n\n      // Update car position\n      car.z = MathUtils.increase(car.z, dt * car.speed, this.trackLength);\n      car.percent = MathUtils.percentRemaining(car.z, 200); // segmentLength\n\n      // Update car offset (AI steering)\n      car.offset += this.updateCarOffset(\n        car,\n        oldSegment,\n        playerSegment,\n        playerW,\n        playerX,\n        playerSpeed,\n        drawDistance,\n        segments\n      );\n\n      // Move car to new segment if needed\n      const newSegment = findSegment(car.z);\n      if (oldSegment !== newSegment) {\n        const index = oldSegment.cars.indexOf(car);\n        if (index !== -1) {\n          oldSegment.cars.splice(index, 1);\n          newSegment.cars.push(car);\n        }\n      }\n    }\n  }\n\n  /**\n   * Calculate car AI steering offset\n   */\n  private updateCarOffset(\n    car: Car,\n    carSegment: RoadSegment,\n    playerSegment: RoadSegment,\n    playerW: number,\n    playerX: number,\n    playerSpeed: number,\n    drawDistance: number,\n    segments: RoadSegment[]\n  ): number {\n    const lookahead = 20;\n    const carW = car.sprite.w * SPRITES.SCALE;\n\n    // Optimization: don't calculate AI for cars far from player\n    if (carSegment.index - playerSegment.index > drawDistance) {\n      return 0;\n    }\n\n    // Look ahead for obstacles\n    for (let i = 1; i < lookahead; i++) {\n      const segment = segments[(carSegment.index + i) % segments.length];\n\n      // Avoid player\n      if (\n        segment === playerSegment &&\n        car.speed > playerSpeed &&\n        MathUtils.overlap(playerX, playerW, car.offset, carW, 1.2)\n      ) {\n        const dir = this.calculateAvoidanceDirection(playerX, car.offset);\n        return (((dir * 1) / i) * (car.speed - playerSpeed)) / this.maxSpeed;\n      }\n\n      // Avoid other cars\n      for (const otherCar of segment.cars) {\n        const otherCarW = otherCar.sprite.w * SPRITES.SCALE;\n        if (\n          car.speed > otherCar.speed &&\n          MathUtils.overlap(car.offset, carW, otherCar.offset, otherCarW, 1.2)\n        ) {\n          const dir = this.calculateAvoidanceDirection(otherCar.offset, car.offset);\n          return (((dir * 1) / i) * (car.speed - otherCar.speed)) / this.maxSpeed;\n        }\n      }\n    }\n\n    // Return to road if off-road\n    if (car.offset < -0.9) return 0.1;\n    else if (car.offset > 0.9) return -0.1;\n    else return 0;\n  }\n\n  /**\n   * Calculate direction to avoid obstacle\n   */\n  private calculateAvoidanceDirection(obstacleX: number, carX: number): number {\n    if (obstacleX > 0.5) return -1;\n    else if (obstacleX < -0.5) return 1;\n    else return carX > obstacleX ? 1 : -1;\n  }\n\n  /**\n   * Update background scroll offsets\n   */\n  updateScrollOffsets(\n    skyOffset: number,\n    hillOffset: number,\n    treeOffset: number,\n    playerSegment: RoadSegment,\n    startPosition: number,\n    position: number,\n    segmentLength: number,\n    skySpeed: number,\n    hillSpeed: number,\n    treeSpeed: number\n  ): { skyOffset: number; hillOffset: number; treeOffset: number } {\n    const deltaPosition = position - startPosition;\n\n    skyOffset = MathUtils.increase(\n      skyOffset,\n      (skySpeed * playerSegment.curve * deltaPosition) / segmentLength,\n      1\n    );\n    hillOffset = MathUtils.increase(\n      hillOffset,\n      (hillSpeed * playerSegment.curve * deltaPosition) / segmentLength,\n      1\n    );\n    treeOffset = MathUtils.increase(\n      treeOffset,\n      (treeSpeed * playerSegment.curve * deltaPosition) / segmentLength,\n      1\n    );\n\n    return { skyOffset, hillOffset, treeOffset };\n  }\n}\n","import type { Sprite, BackgroundLayer, RoadSegment, CoinAnimation, CrashAnimation } from '../types';\nimport { COLORS, SPRITES } from '../constants';\nimport { MathUtils } from '../utils/math';\n\n/**\n * Optimized rendering engine for 3D car racing game\n */\nexport class RenderEngine {\n  private ctx: CanvasRenderingContext2D;\n  private width: number;\n  private height: number;\n  public resolution: number;\n  private cameraDepth: number = 0.84; // Default camera depth\n\n  constructor(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    this.ctx = ctx;\n    this.width = width;\n    this.height = height;\n    this.resolution = height / 480;\n  }\n\n  /**\n   * Set camera depth for visibility calculations\n   */\n  setCameraDepth(depth: number): void {\n    this.cameraDepth = depth;\n  }\n\n  /**\n   * Update canvas dimensions\n   */\n  updateDimensions(width: number, height: number): void {\n    this.width = width;\n    this.height = height;\n    this.resolution = height / 480;\n  }\n\n  /**\n   * Clear the canvas\n   */\n  clear(): void {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n\n  /**\n   * Draw a polygon\n   * Optimized to reduce canvas state changes\n   */\n  private polygon(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    x3: number,\n    y3: number,\n    x4: number,\n    y4: number,\n    color: string\n  ): void {\n    this.ctx.fillStyle = color;\n    this.ctx.beginPath();\n    this.ctx.moveTo(x1, y1);\n    this.ctx.lineTo(x2, y2);\n    this.ctx.lineTo(x3, y3);\n    this.ctx.lineTo(x4, y4);\n    this.ctx.closePath();\n    this.ctx.fill();\n  }\n\n  /**\n   * Draw a road segment\n   */\n  segment(\n    lanes: number,\n    x1: number,\n    y1: number,\n    w1: number,\n    x2: number,\n    y2: number,\n    w2: number,\n    fog: number,\n    color: { grass: string; rumble: string; road: string; lane?: string }\n  ): void {\n    const r1 = this.rumbleWidth(w1, lanes);\n    const r2 = this.rumbleWidth(w2, lanes);\n    const l1 = this.laneMarkerWidth(w1, lanes);\n    const l2 = this.laneMarkerWidth(w2, lanes);\n\n    // Grass\n    this.ctx.fillStyle = color.grass;\n    this.ctx.fillRect(0, y2, this.width, y1 - y2);\n\n    // Rumble strips\n    this.polygon(x1 - w1 - r1, y1, x1 - w1, y1, x2 - w2, y2, x2 - w2 - r2, y2, color.rumble);\n    this.polygon(x1 + w1 + r1, y1, x1 + w1, y1, x2 + w2, y2, x2 + w2 + r2, y2, color.rumble);\n\n    // Road\n    this.polygon(x1 - w1, y1, x1 + w1, y1, x2 + w2, y2, x2 - w2, y2, color.road);\n\n    // Lane markers\n    if (color.lane) {\n      const lanew1 = (w1 * 2) / lanes;\n      const lanew2 = (w2 * 2) / lanes;\n      let lanex1 = x1 - w1 + lanew1;\n      let lanex2 = x2 - w2 + lanew2;\n\n      for (let lane = 1; lane < lanes; lane++) {\n        this.polygon(\n          lanex1 - l1 / 2,\n          y1,\n          lanex1 + l1 / 2,\n          y1,\n          lanex2 + l2 / 2,\n          y2,\n          lanex2 - l2 / 2,\n          y2,\n          color.lane\n        );\n        lanex1 += lanew1;\n        lanex2 += lanew2;\n      }\n    }\n\n    // Fog\n    this.fog(0, y1, this.width, y2 - y1, fog);\n  }\n\n  /**\n   * Draw background layer\n   * Optimized for seamless scrolling\n   */\n  background(\n    background: HTMLImageElement,\n    layer: BackgroundLayer,\n    rotation: number,\n    offset: number\n  ): void {\n    rotation = rotation || 0;\n    offset = offset || 0;\n\n    const imageW = layer.w / 2;\n    const imageH = layer.h;\n\n    const sourceX = layer.x + (Math.floor(layer.w * rotation) % layer.w);\n    const sourceY = layer.y;\n    const sourceW = Math.min(imageW, layer.w - (sourceX - layer.x));\n    const sourceH = imageH;\n\n    const destX = 0;\n    const destY = Math.floor(offset);\n    const destW = Math.floor(this.width * (sourceW / imageW));\n    const destH = this.height;\n\n    // Draw main portion\n    this.ctx.drawImage(background, sourceX, sourceY, sourceW, sourceH, destX, destY, destW, destH);\n\n    // Draw wrapped portion for seamless scrolling\n    if (sourceW < imageW) {\n      this.ctx.drawImage(\n        background,\n        layer.x,\n        sourceY,\n        imageW - sourceW,\n        sourceH,\n        destW - 1,\n        destY,\n        this.width - destW,\n        destH\n      );\n    }\n  }\n\n  /**\n   * Draw a sprite\n   * Optimized with clipping support\n   */\n  sprite(\n    roadWidth: number,\n    sprites: HTMLImageElement,\n    sprite: Sprite,\n    scale: number,\n    destX: number,\n    destY: number,\n    offsetX: number = 0,\n    offsetY: number = 0,\n    clipY?: number\n  ): void {\n    const destW = ((sprite.w * scale * this.width) / 2) * (SPRITES.SCALE * roadWidth);\n    const destH = ((sprite.h * scale * this.width) / 2) * (SPRITES.SCALE * roadWidth);\n\n    destX = destX + destW * offsetX;\n    destY = destY + destH * offsetY;\n\n    const clipH = clipY ? Math.max(0, destY + destH - clipY) : 0;\n\n    if (clipH < destH) {\n      this.ctx.drawImage(\n        sprites,\n        sprite.x,\n        sprite.y,\n        sprite.w,\n        sprite.h - (sprite.h * clipH) / destH,\n        destX,\n        destY,\n        destW,\n        destH - clipH\n      );\n    }\n  }\n\n  /**\n   * Draw the player car\n   * Includes bounce effect based on speed\n   */\n  player(\n    roadWidth: number,\n    sprites: HTMLImageElement,\n    speedPercent: number,\n    scale: number,\n    destX: number,\n    destY: number,\n    steer: number,\n    updown: number\n  ): void {\n    const bounce =\n      1.5 * Math.random() * speedPercent * this.resolution * MathUtils.randomChoice([-1, 1]);\n\n    let sprite: Sprite;\n    if (steer < 0) {\n      sprite = updown > 0 ? SPRITES.PLAYER_UPHILL_LEFT : SPRITES.PLAYER_LEFT;\n    } else if (steer > 0) {\n      sprite = updown > 0 ? SPRITES.PLAYER_UPHILL_RIGHT : SPRITES.PLAYER_RIGHT;\n    } else {\n      sprite = updown > 0 ? SPRITES.PLAYER_UPHILL_STRAIGHT : SPRITES.PLAYER_STRAIGHT;\n    }\n\n    this.sprite(roadWidth, sprites, sprite, scale, destX, destY + bounce, -0.5, -1);\n  }\n\n  /**\n   * Draw fog effect\n   * Optimized to skip when fog is minimal\n   */\n  private fog(x: number, y: number, width: number, height: number, fog: number): void {\n    if (fog < 1 && fog > 0.01) {\n      this.ctx.globalAlpha = 1 - fog;\n      this.ctx.fillStyle = COLORS.FOG;\n      this.ctx.fillRect(x, y, width, height);\n      this.ctx.globalAlpha = 1;\n    }\n  }\n\n  /**\n   * Calculate rumble width\n   */\n  private rumbleWidth(projectedRoadWidth: number, lanes: number): number {\n    return projectedRoadWidth / Math.max(6, 2 * lanes);\n  }\n\n  /**\n   * Calculate lane marker width\n   */\n  private laneMarkerWidth(projectedRoadWidth: number, lanes: number): number {\n    return projectedRoadWidth / Math.max(32, 8 * lanes);\n  }\n\n  /**\n   * Batch render cars for performance\n   */\n  renderCars(\n    segments: RoadSegment[],\n    baseSegmentIndex: number,\n    drawDistance: number,\n    roadWidth: number,\n    sprites: HTMLImageElement\n  ): void {\n    // Render from back to front\n    for (let n = drawDistance - 1; n > 0; n--) {\n      const segment = segments[(baseSegmentIndex + n) % segments.length];\n\n      for (const car of segment.cars) {\n        const spriteScale = MathUtils.interpolate(\n          segment.p1.screen.scale,\n          segment.p2.screen.scale,\n          car.percent || 0\n        );\n        const spriteX =\n          MathUtils.interpolate(segment.p1.screen.x, segment.p2.screen.x, car.percent || 0) +\n          (spriteScale * car.offset * roadWidth * this.width) / 2;\n        const spriteY = MathUtils.interpolate(\n          segment.p1.screen.y,\n          segment.p2.screen.y,\n          car.percent || 0\n        );\n\n        this.sprite(\n          roadWidth,\n          sprites,\n          car.sprite,\n          spriteScale,\n          spriteX,\n          spriteY,\n          -0.5,\n          -1,\n          segment.clip\n        );\n      }\n    }\n  }\n\n  /**\n   * Batch render sprites for performance\n   */\n  renderSprites(\n    segments: RoadSegment[],\n    baseSegmentIndex: number,\n    drawDistance: number,\n    roadWidth: number,\n    sprites: HTMLImageElement\n  ): void {\n    // Render from back to front\n    for (let n = drawDistance - 1; n > 0; n--) {\n      const segment = segments[(baseSegmentIndex + n) % segments.length];\n\n      for (const sprite of segment.sprites) {\n        const spriteScale = segment.p1.screen.scale;\n        const spriteX =\n          segment.p1.screen.x + (spriteScale * sprite.offset * roadWidth * this.width) / 2;\n        const spriteY = segment.p1.screen.y;\n\n        this.sprite(\n          roadWidth,\n          sprites,\n          sprite.source,\n          spriteScale,\n          spriteX,\n          spriteY,\n          sprite.offset < 0 ? -1 : 0,\n          -1,\n          segment.clip\n        );\n      }\n    }\n  }\n\n  /**\n   * Render all objects (sprites and cars) in correct z-order\n   */\n  renderObjects(\n    segments: RoadSegment[],\n    baseSegmentIndex: number,\n    drawDistance: number,\n    roadWidth: number,\n    sprites: HTMLImageElement,\n    onBillboardRender?: (sprite: Sprite, segmentIndex: number, offset: number) => void\n  ): void {\n    // Render from back to front\n    for (let n = drawDistance - 1; n > 0; n--) {\n      const segment = segments[(baseSegmentIndex + n) % segments.length];\n\n      // Render sprites first (they are at the segment start position)\n      for (const sprite of segment.sprites) {\n        const spriteScale = segment.p1.screen.scale;\n        const spriteX =\n          segment.p1.screen.x + (spriteScale * sprite.offset * roadWidth * this.width) / 2;\n        const spriteY = segment.p1.screen.y;\n\n        // Check if sprite is visible (not clipped and within screen bounds)\n        if (segment.clip && segment.p1.camera.z > this.cameraDepth && spriteY < segment.clip) {\n          // Notify about billboard render if callback provided\n          if (onBillboardRender) {\n            onBillboardRender(sprite.source, segment.index, sprite.offset);\n          }\n        }\n\n        this.sprite(\n          roadWidth,\n          sprites,\n          sprite.source,\n          spriteScale,\n          spriteX,\n          spriteY,\n          sprite.offset < 0 ? -1 : 0,\n          -1,\n          segment.clip\n        );\n      }\n\n      // Then render cars (they can be anywhere within the segment)\n      for (const car of segment.cars) {\n        const spriteScale = MathUtils.interpolate(\n          segment.p1.screen.scale,\n          segment.p2.screen.scale,\n          car.percent || 0\n        );\n        const spriteX =\n          MathUtils.interpolate(segment.p1.screen.x, segment.p2.screen.x, car.percent || 0) +\n          (spriteScale * car.offset * roadWidth * this.width) / 2;\n        const spriteY = MathUtils.interpolate(\n          segment.p1.screen.y,\n          segment.p2.screen.y,\n          car.percent || 0\n        );\n\n        this.sprite(\n          roadWidth,\n          sprites,\n          car.sprite,\n          spriteScale,\n          spriteX,\n          spriteY,\n          -0.5,\n          -1,\n          segment.clip\n        );\n      }\n    }\n  }\n\n  /**\n   * Render coin collection animations\n   */\n  renderCoinAnimations(animations: CoinAnimation[], currentTime: number): void {\n    const ctx = this.ctx;\n    ctx.save();\n\n    for (const anim of animations) {\n      const elapsed = currentTime - anim.startTime;\n      const progress = Math.min(elapsed / 500, 1); // 0.5 second animation\n\n      if (progress >= 1) continue;\n\n      // Fade out effect\n      const alpha = 1 - progress;\n\n      // Particle burst effect\n      const particleCount = 6;\n      const particleRadius = 3;\n      const burstRadius = 50 * progress;\n\n      ctx.globalAlpha = alpha * 0.8;\n      ctx.fillStyle = '#FFD700'; // Gold color\n\n      for (let i = 0; i < particleCount; i++) {\n        const angle = (i / particleCount) * Math.PI * 2;\n        const x = anim.x + Math.cos(angle) * burstRadius;\n        const y = anim.y + Math.sin(angle) * burstRadius;\n\n        ctx.beginPath();\n        ctx.arc(x, y, particleRadius, 0, Math.PI * 2);\n        ctx.fill();\n      }\n\n      // \"+X puntos\" text\n      ctx.globalAlpha = alpha;\n      ctx.font = 'bold 24px Arial';\n      ctx.fillStyle = '#FFD700';\n      ctx.strokeStyle = '#000000';\n      ctx.lineWidth = 3;\n\n      const text = `+${anim.points} puntos`;\n      const textY = anim.y - 30 * progress; // Float upward\n\n      ctx.strokeText(text, anim.x - 40, textY);\n      ctx.fillText(text, anim.x - 40, textY);\n    }\n\n    ctx.restore();\n  }\n\n  /**\n   * Render crash/collision animations\n   */\n  renderCrashAnimations(animations: CrashAnimation[], currentTime: number): void {\n    const ctx = this.ctx;\n    ctx.save();\n\n    for (const anim of animations) {\n      const elapsed = currentTime - anim.startTime;\n      const progress = Math.min(elapsed / 500, 1); // 0.5 second animation\n\n      if (progress >= 1) continue;\n\n      // Shake effect\n      const shakeX = (Math.random() - 0.5) * 10 * (1 - progress);\n      const shakeY = (Math.random() - 0.5) * 10 * (1 - progress);\n\n      // Fade out effect\n      const alpha = 1 - progress;\n\n      // Red explosion particles\n      const particleCount = 8;\n      const particleRadius = 4;\n      const burstRadius = 60 * progress;\n\n      ctx.globalAlpha = alpha * 0.9;\n\n      for (let i = 0; i < particleCount; i++) {\n        const angle = (i / particleCount) * Math.PI * 2;\n        const x = anim.x + Math.cos(angle) * burstRadius + shakeX;\n        const y = anim.y + Math.sin(angle) * burstRadius + shakeY;\n\n        // Red to orange gradient\n        const color = i % 2 === 0 ? '#FF0000' : '#FF6600';\n        ctx.fillStyle = color;\n\n        ctx.beginPath();\n        ctx.arc(x, y, particleRadius * (1 - progress * 0.5), 0, Math.PI * 2);\n        ctx.fill();\n      }\n\n      // \"-3 puntos\" text with shake\n      ctx.globalAlpha = alpha;\n      ctx.font = 'bold 28px Arial';\n      ctx.fillStyle = '#FF0000';\n      ctx.strokeStyle = '#000000';\n      ctx.lineWidth = 4;\n\n      const text = '-3 puntos';\n      const textX = anim.x - 50 + shakeX;\n      const textY = anim.y - 20 * progress + shakeY; // Float upward\n\n      ctx.strokeText(text, textX, textY);\n      ctx.fillText(text, textX, textY);\n\n      // Impact flash effect\n      if (progress < 0.1) {\n        ctx.globalAlpha = (1 - progress * 10) * 0.5;\n        ctx.fillStyle = '#FFFFFF';\n        ctx.beginPath();\n        ctx.arc(anim.x, anim.y, 50, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    }\n\n    ctx.restore();\n  }\n}\n","import { MathUtils } from '../utils/math';\n\n/**\n * Optimized game loop with fixed timestep and frame rate management\n */\nexport class GameLoop {\n  private isRunning = false;\n  private animationFrameId: number | null = null;\n  private lastTimestamp = 0;\n  private accumulator = 0;\n  private readonly targetFps: number;\n  private readonly fixedTimeStep: number;\n  private readonly maxFrameTime: number;\n\n  // Performance monitoring\n  private frameCount = 0;\n  private lastFpsUpdate = 0;\n  private currentFps = 0;\n\n  constructor(\n    private update: (dt: number) => void,\n    private render: (interpolation: number) => void,\n    fps: number = 60\n  ) {\n    this.targetFps = fps;\n    this.fixedTimeStep = 1 / fps;\n    this.maxFrameTime = this.fixedTimeStep * 5; // Prevent spiral of death\n  }\n\n  /**\n   * Start the game loop\n   */\n  start(): void {\n    if (this.isRunning) return;\n\n    this.isRunning = true;\n    this.lastTimestamp = MathUtils.timestamp();\n    this.accumulator = 0;\n    this.loop();\n  }\n\n  /**\n   * Stop the game loop\n   */\n  stop(): void {\n    this.isRunning = false;\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  /**\n   * Get current FPS\n   */\n  getFps(): number {\n    return this.currentFps;\n  }\n\n  /**\n   * Main game loop with fixed timestep\n   */\n  private loop = (): void => {\n    if (!this.isRunning) return;\n\n    const currentTime = MathUtils.timestamp();\n    let frameTime = (currentTime - this.lastTimestamp) / 1000;\n\n    // Prevent spiral of death by capping frame time\n    frameTime = Math.min(frameTime, this.maxFrameTime);\n    this.lastTimestamp = currentTime;\n    this.accumulator += frameTime;\n\n    // Fixed timestep updates\n    while (this.accumulator >= this.fixedTimeStep) {\n      this.update(this.fixedTimeStep);\n      this.accumulator -= this.fixedTimeStep;\n    }\n\n    // Calculate interpolation for smooth rendering\n    const interpolation = this.accumulator / this.fixedTimeStep;\n\n    // Render with interpolation\n    this.render(interpolation);\n\n    // Update FPS counter\n    this.updateFpsCounter();\n\n    // Schedule next frame\n    this.animationFrameId = requestAnimationFrame(this.loop);\n  };\n\n  /**\n   * Update FPS counter\n   */\n  private updateFpsCounter(): void {\n    this.frameCount++;\n    const now = MathUtils.timestamp();\n\n    if (now - this.lastFpsUpdate >= 1000) {\n      this.currentFps = Math.round((this.frameCount * 1000) / (now - this.lastFpsUpdate));\n      this.frameCount = 0;\n      this.lastFpsUpdate = now;\n    }\n  }\n}\n\n/**\n * Image loader utility for game assets\n */\nexport class ImageLoader {\n  /**\n   * Load multiple images and return them when all are loaded\n   */\n  static async loadImages(\n    names: string[],\n    basePath: string,\n    skin: string = 'default'\n  ): Promise<HTMLImageElement[]> {\n    const promises = names.map((name) => this.loadSingleImage(name, basePath, skin));\n    return Promise.all(promises);\n  }\n\n  /**\n   * Load a single image\n   */\n  private static loadSingleImage(\n    name: string,\n    basePath: string,\n    skin: string\n  ): Promise<HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => resolve(img);\n      img.onerror = () => reject(new Error(`Failed to load image: ${name}`));\n\n      if (skin === 'default') {\n        img.src = `${basePath}/${name}.webp`;\n      } else {\n        img.src = `${basePath}/skins/${skin}/${name}.webp`;\n      }\n    });\n  }\n}\n\n/**\n * Input manager for keyboard and touch events\n */\nexport class InputManager {\n  private keys: { [key: number]: boolean } = {};\n  private keyHandlers: Array<{\n    keys: number[];\n    mode: 'up' | 'down';\n    action: () => void;\n  }> = [];\n\n  constructor() {\n    this.setupKeyboardListeners();\n  }\n\n  /**\n   * Setup keyboard event listeners\n   */\n  private setupKeyboardListeners(): void {\n    document.addEventListener('keydown', this.handleKeyDown);\n    document.addEventListener('keyup', this.handleKeyUp);\n  }\n\n  /**\n   * Cleanup event listeners\n   */\n  destroy(): void {\n    document.removeEventListener('keydown', this.handleKeyDown);\n    document.removeEventListener('keyup', this.handleKeyUp);\n  }\n\n  /**\n   * Register key handlers\n   */\n  setKeyHandlers(\n    handlers: Array<{\n      keys: number[];\n      mode: 'up' | 'down';\n      action: () => void;\n    }>\n  ): void {\n    this.keyHandlers = handlers;\n  }\n\n  /**\n   * Check if key is pressed\n   */\n  isKeyPressed(keyCode: number): boolean {\n    return this.keys[keyCode] || false;\n  }\n\n  /**\n   * Handle key down events\n   */\n  private handleKeyDown = (event: KeyboardEvent): void => {\n    this.keys[event.keyCode] = true;\n    this.triggerKeyHandlers(event.keyCode, 'down');\n\n    // Prevent default for game keys\n    const gameKeys = [37, 38, 39, 40]; // Arrow keys\n    if (gameKeys.includes(event.keyCode)) {\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * Handle key up events\n   */\n  private handleKeyUp = (event: KeyboardEvent): void => {\n    this.keys[event.keyCode] = false;\n    this.triggerKeyHandlers(event.keyCode, 'up');\n  };\n\n  /**\n   * Trigger registered key handlers\n   */\n  private triggerKeyHandlers(keyCode: number, mode: 'up' | 'down'): void {\n    for (const handler of this.keyHandlers) {\n      if (handler.mode === mode && handler.keys.includes(keyCode)) {\n        handler.action();\n      }\n    }\n  }\n\n  /**\n   * Setup touch controls for mobile\n   */\n  setupTouchControls(_isMobile: boolean): void {\n    // Touch controls are now handled directly through the game component\n    // This method is kept for compatibility but doesn't need to do anything\n  }\n\n  /**\n   * Get key code for touch direction\n   */\n  private getKeyCodeForDirection(direction: string): number {\n    switch (direction) {\n      case 'left':\n        return 37;\n      case 'up':\n        return 38;\n      case 'right':\n        return 39;\n      case 'down':\n        return 40;\n      default:\n        return 0;\n    }\n  }\n}\n","//Funcion para determinar si el usuario esta en un dispositivo movil\nexport const isMobile = () => {\n  if (typeof window !== 'undefined') {\n    const isMobileUserAgent = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n    const isMobileWidth = window.matchMedia('only screen and (max-width: 768px)').matches;\n    const moreThanOneTouchPoint = navigator.maxTouchPoints > 1; //cuantos puntos de contacto tiene el dispositivo\n    return isMobileWidth && isMobileUserAgent && moreThanOneTouchPoint;\n  }\n  return false;\n};\n","import React from 'react';\nimport type { HudState } from '../types';\n\ninterface HUDProps {\n  currentLap: number;\n  availableLaps: number;\n  points: number;\n  hud: HudState;\n  gameState: 'playing' | 'paused' | 'gameover' | 'loading' | 'ready';\n}\n\nexport const HUD: React.FC<HUDProps> = ({ currentLap, availableLaps, points, hud, gameState }) => {\n  /**\n   * Calculate speedometer rotation\n   */\n  const getSpeedometerRotation = () => {\n    const speed = parseInt(hud.speed || '0') || 0;\n    // Rotate needle between -90 and 90 degrees based on speed\n    return (speed / 100) * 180 - 90;\n  };\n\n  if (gameState !== 'playing' && gameState !== 'paused' && gameState !== 'loading') {\n    return null;\n  }\n\n  return (\n    <>\n      {/* Top HUD */}\n      <div className=\"hud-top\">\n        {/* Lap Counter */}\n        <span className=\"hud-lap-counter\">\n          <img className=\"hud-lap-icon\" src=\"/games/racing/images/flag-laps.webp\" alt=\"laps\" />\n          <span className=\"hud-lap-text\">\n            {currentLap}/{availableLaps}\n          </span>\n        </span>\n\n        {/* Lap Time */}\n        <span className=\"hud-time\">\n          <img className=\"hud-lap-icon\" src=\"/games/racing/images/cronometer.webp\" alt=\"time\" />\n          <span className=\"hud-lap-text\">{hud.current_lap_time}</span>\n        </span>\n\n        {/* Points */}\n        <span className=\"hud-score\">\n          <img className=\"hud-lap-icon\" src=\"/games/racing/images/coin.webp\" alt=\"points\" />\n          <span className=\"hud-score-value\">{points}</span>\n        </span>\n      </div>\n\n      {/* Bottom HUD - Speedometer */}\n      <div className=\"hud-bottom\">\n        <div className=\"hud-speed\">\n          <svg className=\"hud-speedometer\" viewBox=\"0 0 200 200\">\n            {/* Background circle */}\n            <circle cx=\"100\" cy=\"100\" r=\"90\" fill=\"none\" stroke=\"#444\" strokeWidth=\"2\" />\n            {/* Speedometer arc */}\n            <path d=\"M 30 170 A 85 85 0 0 1 170 170\" fill=\"none\" stroke=\"#888\" strokeWidth=\"8\" />\n            {/* Speed markers */}\n            {[0, 25, 50, 75, 100].map((speed, i) => {\n              const angle = ((i * 180) / 4 - 90) * (Math.PI / 180);\n              const x1 = 100 + 70 * Math.cos(angle);\n              const y1 = 100 + 70 * Math.sin(angle);\n              const x2 = 100 + 80 * Math.cos(angle);\n              const y2 = 100 + 80 * Math.sin(angle);\n              return (\n                <line key={speed} x1={x1} y1={y1} x2={x2} y2={y2} stroke=\"#ccc\" strokeWidth=\"2\" />\n              );\n            })}\n            {/* Speed needle */}\n            <line\n              x1=\"100\"\n              y1=\"100\"\n              x2={100 + 65 * Math.cos((getSpeedometerRotation() - 90) * (Math.PI / 180))}\n              y2={100 + 65 * Math.sin((getSpeedometerRotation() - 90) * (Math.PI / 180))}\n              stroke=\"#ff4444\"\n              strokeWidth=\"4\"\n              strokeLinecap=\"round\"\n            />\n            {/* Center dot */}\n            <circle cx=\"100\" cy=\"100\" r=\"5\" fill=\"#ff4444\" />\n          </svg>\n          {/* Speed value */}\n          <div className=\"hud-speed-text\">{hud.speed} mph</div>\n        </div>\n      </div>\n    </>\n  );\n};\n","import React, { useEffect, useState } from 'react';\n\ninterface BillboardStatsProps {\n  getBillboardStats: () => {\n    placements: Record<string, number>;\n    impressions: Record<string, number>;\n    maxPossibleImpressions: Record<string, number>;\n    trackLength: number;\n    totalSegments: number;\n    totalLaps: number;\n  } | null;\n  isVisible?: boolean;\n}\n\nexport const BillboardStats: React.FC<BillboardStatsProps> = ({\n  getBillboardStats,\n  isVisible = false,\n}) => {\n  const [stats, setStats] = useState<ReturnType<typeof getBillboardStats>>(null);\n\n  useEffect(() => {\n    if (isVisible) {\n      const interval = setInterval(() => {\n        const newStats = getBillboardStats();\n        if (newStats) {\n          setStats(newStats);\n        }\n      }, 1000); // Update every second\n\n      return () => clearInterval(interval);\n    }\n  }, [getBillboardStats, isVisible]);\n\n  if (!isVisible || !stats) return null;\n\n  const billboards = Object.keys(stats.placements).sort();\n\n  return (\n    <div className=\"billboard-stats\">\n      <h4 className=\"billboard-title\">Billboard Analytics</h4>\n      <div>\n        <div className=\"billboard-stat\">\n          <span className=\"billboard-stat-label\">Track:</span>\n          <span className=\"billboard-stat-value\">{stats.trackLength}m</span>\n        </div>\n        <div className=\"billboard-stat\">\n          <span className=\"billboard-stat-label\">Laps:</span>\n          <span className=\"billboard-stat-value\">{stats.totalLaps}</span>\n        </div>\n      </div>\n      <table style={{ width: '100%', fontSize: '0.75rem' }}>\n        <thead>\n          <tr style={{ borderBottom: '1px solid #4b5563' }}>\n            <th style={{ textAlign: 'left', paddingBottom: '0.125rem' }}>Billboard</th>\n            <th style={{ textAlign: 'center', paddingBottom: '0.125rem' }}>Placed</th>\n            <th style={{ textAlign: 'center', paddingBottom: '0.125rem' }}>Shown</th>\n            <th style={{ textAlign: 'right', paddingBottom: '0.125rem' }}>%</th>\n          </tr>\n        </thead>\n        <tbody>\n          {billboards.map((billboard) => {\n            const placed = stats.placements[billboard] || 0;\n            const shown = stats.impressions[billboard] || 0;\n            const maxPossible = stats.maxPossibleImpressions[billboard] || 0;\n            const percentage = maxPossible > 0 ? ((shown / maxPossible) * 100).toFixed(0) : '0';\n\n            return (\n              <tr key={billboard} style={{ borderBottom: '1px solid #374151' }}>\n                <td\n                  style={{\n                    paddingTop: '0.125rem',\n                    paddingBottom: '0.125rem',\n                    fontSize: '0.625rem',\n                  }}\n                >\n                  {billboard.replace('BILLBOARD', 'B')}\n                </td>\n                <td\n                  style={{ textAlign: 'center', paddingTop: '0.125rem', paddingBottom: '0.125rem' }}\n                >\n                  {placed}\n                </td>\n                <td\n                  style={{ textAlign: 'center', paddingTop: '0.125rem', paddingBottom: '0.125rem' }}\n                >\n                  {shown}\n                </td>\n                <td\n                  style={{ textAlign: 'right', paddingTop: '0.125rem', paddingBottom: '0.125rem' }}\n                >\n                  {percentage}%\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n        <tfoot>\n          <tr style={{ fontWeight: 'bold', borderTop: '1px solid #6b7280' }}>\n            <td style={{ paddingTop: '0.25rem', fontSize: '0.75rem' }}>TOTAL</td>\n            <td style={{ textAlign: 'center', paddingTop: '0.25rem' }}>\n              {Object.values(stats.placements).reduce((a, b) => a + b, 0)}\n            </td>\n            <td style={{ textAlign: 'center', paddingTop: '0.25rem' }}>\n              {Object.values(stats.impressions).reduce((a, b) => a + b, 0)}\n            </td>\n            <td style={{ textAlign: 'right', paddingTop: '0.25rem' }}>\n              {Object.values(stats.maxPossibleImpressions).reduce((a, b) => a + b, 0) > 0\n                ? (\n                    (Object.values(stats.impressions).reduce((a, b) => a + b, 0) /\n                      Object.values(stats.maxPossibleImpressions).reduce((a, b) => a + b, 0)) *\n                    100\n                  ).toFixed(0)\n                : '0'}\n              %\n            </td>\n          </tr>\n        </tfoot>\n      </table>\n      <div style={{ marginTop: '0.25rem', fontSize: '0.625rem', color: '#9ca3af' }}>\n        <p>% = Shown vs Max Possible ({stats.totalLaps} laps)</p>\n      </div>\n    </div>\n  );\n};\n","import React, { forwardRef } from 'react';\n\ninterface GameCanvasProps {\n  width: number;\n  height: number;\n  className?: string;\n  onClick?: () => void;\n  style?: React.CSSProperties;\n}\n\nexport const GameCanvas = forwardRef<HTMLCanvasElement, GameCanvasProps>(\n  ({ width, height, className = '', onClick, style }, ref) => {\n    return (\n      <div className=\"game-canvas-container\">\n        {/* Canvas */}\n        <canvas\n          ref={ref}\n          width={width}\n          height={height}\n          onClick={onClick}\n          className={`game-canvas ${className}`}\n          style={style}\n        />\n      </div>\n    );\n  }\n);\n\nGameCanvas.displayName = 'GameCanvas';\n","import React from 'react';\n\ninterface GameControlsProps {\n  onControl: (direction: 'up' | 'down' | 'left' | 'right' | 'action' | 'action2') => void;\n  onControlEnd?: (direction: 'up' | 'down' | 'left' | 'right' | 'action' | 'action2') => void;\n  brandColor?: string;\n  showActionButton?: boolean;\n  actionLabel?: string;\n  layout?: 'dpad' | 'arrows' | 'horizontal' | 'racing';\n  actionIcon?: React.ReactNode;\n  action2Label?: string;\n  action2Icon?: React.ReactNode;\n}\n\nexport const GameControls: React.FC<GameControlsProps> = ({\n  onControl,\n  onControlEnd,\n  showActionButton = false,\n  layout = 'dpad',\n  actionLabel = 'A',\n  actionIcon,\n  action2Label = 'B',\n  action2Icon,\n}) => {\n  // Game Boy inspired button styling with text selection prevention\n  const buttonClass = `\n    font-bold text-2xl rounded-lg\n    transition-all duration-150 transform\n    hover:scale-105 active:scale-95\n    bg-gray-600 text-gray-100\n    border-2 border-gray-800\n    shadow-[inset_0_-4px_0_rgba(0,0,0,0.4),0_2px_0_rgba(255,255,255,0.2)]\n    active:shadow-[inset_0_-2px_0_rgba(0,0,0,0.4),0_1px_0_rgba(255,255,255,0.2)]\n    select-none\n  `;\n\n  // Common styles for preventing text selection\n  const preventSelectStyles: React.CSSProperties = {\n    userSelect: 'none',\n    WebkitUserSelect: 'none',\n    MozUserSelect: 'none',\n    msUserSelect: 'none',\n    touchAction: 'none',\n    WebkitTouchCallout: 'none',\n  };\n\n  const handleContextMenu = (e: React.MouseEvent) => {\n    e.preventDefault();\n    return false;\n  };\n\n  // Horizontal layout for games like Breakout\n  if (layout === 'horizontal') {\n    return (\n      <div className=\"flex justify-center gap-6 p-6\">\n        <button\n          onTouchStart={(e) => {\n            e.preventDefault();\n            onControl('left');\n          }}\n          onClick={() => onControl('left')}\n          onContextMenu={handleContextMenu}\n          className={`${buttonClass} px-8 py-4 text-3xl`}\n          style={preventSelectStyles}\n        >\n          \n        </button>\n        {showActionButton && (\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('action');\n            }}\n            onClick={() => onControl('action')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} px-8 py-4 rounded-full`}\n            style={preventSelectStyles}\n          >\n            {actionIcon || actionLabel}\n          </button>\n        )}\n        <button\n          onTouchStart={(e) => {\n            e.preventDefault();\n            onControl('right');\n          }}\n          onClick={() => onControl('right')}\n          onContextMenu={handleContextMenu}\n          className={`${buttonClass} px-8 py-4 text-3xl`}\n          style={preventSelectStyles}\n        >\n          \n        </button>\n      </div>\n    );\n  }\n\n  // Racing layout with steering controls on left and action buttons on right\n  if (layout === 'racing') {\n    return (\n      <div className=\"flex justify-between items-center p-4 w-full max-w-md mx-auto\">\n        {/* Steering controls on the left */}\n        <div className=\"flex gap-2\">\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('left');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('left');\n            }}\n            onMouseDown={() => onControl('left')}\n            onMouseUp={() => onControlEnd?.('left')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} w-16 h-16 sm:w-20 sm:h-20 text-2xl`}\n            style={preventSelectStyles}\n          >\n            \n          </button>\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('right');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('right');\n            }}\n            onMouseDown={() => onControl('right')}\n            onMouseUp={() => onControlEnd?.('right')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} w-16 h-16 sm:w-20 sm:h-20 text-2xl`}\n            style={preventSelectStyles}\n          >\n            \n          </button>\n        </div>\n\n        {/* Action buttons on the right */}\n        <div className=\"flex flex-col gap-2\">\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('up');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('up');\n            }}\n            onMouseDown={() => onControl('up')}\n            onMouseUp={() => onControlEnd?.('up')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} w-16 h-12 sm:w-20 sm:h-14 text-lg bg-green-600 hover:bg-green-700`}\n            style={preventSelectStyles}\n          >\n            {actionIcon || actionLabel}\n          </button>\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('down');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('down');\n            }}\n            onMouseDown={() => onControl('down')}\n            onMouseUp={() => onControlEnd?.('down')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} w-16 h-12 sm:w-20 sm:h-14 text-lg bg-red-600 hover:bg-red-700`}\n            style={preventSelectStyles}\n          >\n            {action2Icon || action2Label}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (layout === 'arrows') {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"relative w-36 sm:w-48 h-36 sm:h-48\">\n          {/* Background Circle */}\n          <div className=\"absolute inset-0 rounded-full bg-gray-700 opacity-30\" />\n\n          {/* Center Circle */}\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-full border-2 border-gray-900 shadow-inner\" />\n          {/* Arrow Buttons */}\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('up');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('up');\n            }}\n            onMouseDown={() => onControl('up')}\n            onMouseUp={() => onControlEnd?.('up')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-t-3xl rounded-b-lg`}\n            style={preventSelectStyles}\n          >\n            \n          </button>\n\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('left');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('left');\n            }}\n            onMouseDown={() => onControl('left')}\n            onMouseUp={() => onControlEnd?.('left')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} absolute left-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-l-3xl rounded-r-lg`}\n            style={preventSelectStyles}\n          >\n            \n          </button>\n\n          {showActionButton && (\n            <button\n              onTouchStart={(e) => {\n                e.preventDefault();\n                onControl('action');\n              }}\n              onClick={() => onControl('action')}\n              onContextMenu={handleContextMenu}\n              className={`${buttonClass} col-start-2 row-start-2 w-12 h-12 sm:w-16 sm:h-16 rounded-full`}\n              style={preventSelectStyles}\n            >\n              {actionIcon || actionLabel}\n            </button>\n          )}\n\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('right');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('right');\n            }}\n            onMouseDown={() => onControl('right')}\n            onMouseUp={() => onControlEnd?.('right')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} absolute right-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-r-3xl rounded-l-lg`}\n            style={preventSelectStyles}\n          >\n            \n          </button>\n\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('down');\n            }}\n            onTouchEnd={(e) => {\n              e.preventDefault();\n              onControlEnd?.('down');\n            }}\n            onMouseDown={() => onControl('down')}\n            onMouseUp={() => onControlEnd?.('down')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-b-3xl rounded-t-lg`}\n            style={preventSelectStyles}\n          >\n            \n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // D-Pad layout\n  return (\n    <div className=\"flex items-center justify-center p-8\">\n      <div className=\"relative w-36 sm:w-48 h-36 sm:h-48\">\n        {/* D-Pad Background */}\n        <div className=\"absolute inset-0 rounded-full bg-gray-700 opacity-30\" />\n\n        {/* Center Circle */}\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-full border-2 border-gray-900 shadow-inner\" />\n\n        {/* D-Pad Buttons */}\n        <button\n          onTouchStart={(e) => {\n            e.preventDefault();\n            onControl('up');\n          }}\n          onTouchEnd={(e) => {\n            e.preventDefault();\n            onControlEnd?.('up');\n          }}\n          onMouseDown={() => onControl('up')}\n          onMouseUp={() => onControlEnd?.('up')}\n          onContextMenu={handleContextMenu}\n          className={`${buttonClass} absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-t-3xl rounded-b-lg`}\n          style={preventSelectStyles}\n        >\n          \n        </button>\n\n        <button\n          onTouchStart={(e) => {\n            e.preventDefault();\n            onControl('right');\n          }}\n          onClick={() => onControl('right')}\n          onContextMenu={handleContextMenu}\n          className={`${buttonClass} absolute right-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-r-3xl rounded-l-lg`}\n          style={preventSelectStyles}\n        >\n          \n        </button>\n\n        <button\n          onTouchStart={(e) => {\n            e.preventDefault();\n            onControl('down');\n          }}\n          onTouchEnd={(e) => {\n            e.preventDefault();\n            onControlEnd?.('down');\n          }}\n          onMouseDown={() => onControl('down')}\n          onMouseUp={() => onControlEnd?.('down')}\n          onContextMenu={handleContextMenu}\n          className={`${buttonClass} absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-b-3xl rounded-t-lg`}\n          style={preventSelectStyles}\n        >\n          \n        </button>\n\n        <button\n          onTouchStart={(e) => {\n            e.preventDefault();\n            onControl('left');\n          }}\n          onClick={() => onControl('left')}\n          onContextMenu={handleContextMenu}\n          className={`${buttonClass} absolute left-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-l-3xl rounded-r-lg`}\n          style={preventSelectStyles}\n        >\n          \n        </button>\n\n        {/* Action Button */}\n        {showActionButton && (\n          <button\n            onTouchStart={(e) => {\n              e.preventDefault();\n              onControl('action');\n            }}\n            onClick={() => onControl('action')}\n            onContextMenu={handleContextMenu}\n            className={`${buttonClass} absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full z-10`}\n            style={preventSelectStyles}\n          >\n            {actionIcon || actionLabel}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n","'use client';\nimport { useCallback, useEffect, useState } from 'react';\nimport { useCarGame } from './hooks/useCarGame';\nimport { HUD } from './components/HUD';\nimport { BillboardStats } from './components/BillboardStats';\nimport { GameCanvas } from '../ui/GameCanvas';\nimport { GameOverlay } from '../ui/GameOverlay';\nimport { GameControls } from '../ui/GameControls';\nimport { isMobile } from '../../../../utils/functions';\nimport { Language } from '../../../../types/i18n';\nimport { getTranslations } from '../../../../i18n';\n\ninterface RacingGameProps {\n  laps: number;\n  setPointsEarned: (points: number) => void;\n  setGameOver: (isOver: boolean) => void;\n  /**\n   * Track layout to use:\n   * 0 (default) - Original balanced track with variety\n   * 1 - Speed Circuit: Fast track with long straights\n   * 2 - Mountain Pass: Challenging hills and curves\n   * 3 - Technical Circuit: Lots of curves and turns\n   */\n  track?: number;\n  skin?: string;\n  gameTitle?: string;\n  brandColor?: string;\n  brandLogo?: string;\n  showBillboardStats?: boolean;\n  lang?: Language;\n}\n\nconst RacingGame = ({\n  laps,\n  setPointsEarned,\n  setGameOver,\n  track = 0,\n  skin = 'default',\n  gameTitle = 'JALO Racing',\n  brandColor = '#00d26a',\n  brandLogo,\n  showBillboardStats = false,\n  lang = 'en',\n}: RacingGameProps) => {\n  const t = getTranslations(lang);\n  const mobile = isMobile();\n  const availableLaps = laps || 3;\n  const [gameStarted, setGameStarted] = useState(false);\n\n  // Use the new custom hook for game logic\n  const {\n    canvasRef,\n    gameState,\n    currentLap,\n    points,\n    hud,\n    startGame,\n    togglePause,\n    setupTouchControls,\n    handleTouchControl,\n    getBillboardStats,\n  } = useCarGame(availableLaps, track, skin, setPointsEarned, setGameOver);\n\n  // Start game when instructions are dismissed\n  const handleGameStart = async () => {\n    setGameStarted(true);\n    await startGame();\n  };\n\n  // Initialize canvas on mount\n  useEffect(() => {\n    if (canvasRef.current) {\n      // Set initial canvas dimensions\n      canvasRef.current.width = 720;\n      canvasRef.current.height = 960;\n    }\n  }, [canvasRef]);\n\n  // Setup touch controls when game starts on mobile\n  useEffect(() => {\n    if (mobile && gameState === 'playing') {\n      setupTouchControls(true);\n    }\n  }, [mobile, gameState, setupTouchControls]);\n\n  // Handle control input from GameControls\n  const handleControl = useCallback(\n    (direction: 'up' | 'down' | 'left' | 'right' | 'action' | 'action2') => {\n      if (gameState !== 'playing') return;\n\n      // Directly update the input state through the hook\n      handleTouchControl(direction, true);\n    },\n    [gameState, handleTouchControl]\n  );\n\n  const handleControlEnd = useCallback(\n    (direction: 'up' | 'down' | 'left' | 'right' | 'action' | 'action2') => {\n      // Directly update the input state through the hook\n      handleTouchControl(direction, false);\n    },\n    [handleTouchControl]\n  );\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Prevent arrow key scrolling\n      const keys: { [key: number]: number } = { 37: 1, 38: 1, 39: 1, 40: 1 };\n      if (keys[e.keyCode]) {\n        e.preventDefault();\n        return false;\n      }\n\n      // Handle pause (ESC or Space)\n      if (gameStarted && (e.key === 'Escape' || e.key === ' ')) {\n        e.preventDefault();\n        togglePause();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown, false);\n    };\n  }, [gameStarted, togglePause]);\n\n  return (\n    <div style={{ width: '100%', position: 'relative' }}>\n      <div\n        style={{\n          width: '100%',\n          position: 'relative',\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '0.25rem',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        {/* Instructions Overlay */}\n        {!gameStarted && (\n          <GameOverlay\n            type=\"custom\"\n            title={gameTitle}\n            brandColor={brandColor}\n            onAction={handleGameStart}\n            actionText={t.games.racing.startRacing}\n            lang={lang}\n            customContent={\n              <div style={{ marginBottom: '1rem' }}>\n                {brandLogo && (\n                  <>\n                    <span style={{ fontSize: '0.75rem', color: 'white' }}>por:</span>\n                    <img\n                      src={brandLogo}\n                      alt=\"Brand Logo\"\n                      style={{\n                        margin: '0 auto',\n                        width: '12rem',\n                        height: 'auto',\n                        marginBottom: '1rem',\n                      }}\n                    />\n                  </>\n                )}\n                <p style={{ fontSize: '0.875rem', color: '#d1d5db' }}>\n                  {mobile\n                    ? t.games.racing.useTouchControls\n                    : t.games.racing.useKeyboard}\n                </p>\n\n                <div style={{ marginTop: '0.5rem' }}>\n                  {mobile ? (\n                    <>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.5rem 0.75rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            color: 'white',\n                            fontWeight: 'bold',\n                            fontSize: '0.875rem',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>\n                          {t.games.racing.turnLeft}\n                        </span>\n                      </div>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.5rem 0.75rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            color: 'white',\n                            fontWeight: 'bold',\n                            fontSize: '0.875rem',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>\n                          {t.games.racing.turnRight}\n                        </span>\n                      </div>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.5rem 0.75rem',\n                            backgroundColor: '#059669',\n                            borderRadius: '0.25rem',\n                            color: 'white',\n                            fontWeight: 'bold',\n                            fontSize: '0.875rem',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>{t.games.racing.accelerate}</span>\n                      </div>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.5rem 0.75rem',\n                            backgroundColor: '#dc2626',\n                            borderRadius: '0.25rem',\n                            color: 'white',\n                            fontWeight: 'bold',\n                            fontSize: '0.875rem',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>{t.games.racing.brake}</span>\n                      </div>\n                    </>\n                  ) : (\n                    <>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>{t.games.racing.or}</span>\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          A\n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>\n                          - {t.games.racing.turnLeft}\n                        </span>\n                      </div>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>{t.games.racing.or}</span>\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          D\n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>\n                          - {t.games.racing.turnRight}\n                        </span>\n                      </div>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>{t.games.racing.or}</span>\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          W\n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>- {t.games.racing.accelerate}</span>\n                      </div>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.75rem',\n                          marginBottom: '0.5rem',\n                        }}\n                      >\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          \n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>{t.games.racing.or}</span>\n                        <kbd\n                          style={{\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: '#374151',\n                            borderRadius: '0.25rem',\n                            fontSize: '0.75rem',\n                            color: 'white',\n                          }}\n                        >\n                          S\n                        </kbd>\n                        <span style={{ fontSize: '0.875rem', color: '#d1d5db' }}>- {t.games.racing.brake}</span>\n                      </div>\n                    </>\n                  )}\n                </div>\n\n                <p style={{ fontSize: '0.75rem', color: '#9ca3af', marginTop: '1rem' }}>\n                  {t.games.racing.collectCoins}\n                </p>\n              </div>\n            }\n          />\n        )}\n\n        {/* Pause Overlay */}\n        {gameState === 'paused' && (\n          <GameOverlay\n            type=\"pause\"\n            title={` ${t.games.pause}`}\n            message={t.games.racing.pressEscContinue}\n            onAction={togglePause}\n            actionText={t.games.continue}\n            brandColor={brandColor}\n            lang={lang}\n          />\n        )}\n\n        {/* Game Area */}\n        <div\n          id=\"racer\"\n          style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', width: '100%' }}\n        >\n          {gameState === 'gameover' && (\n            <GameOverlay type=\"gameOver\" score={points} brandColor={brandColor} lang={lang} />\n          )}\n\n          {/* Game Canvas Container - always present but hidden during ready state */}\n          <div\n            style={{\n              position: 'relative',\n              padding: 0,\n              margin: 0,\n              width: '100%',\n              maxWidth: '360px',\n              height: '480px',\n              display: gameState === 'gameover' ? 'none' : 'block',\n              visibility: gameState === 'ready' ? 'hidden' : 'visible',\n            }}\n          >\n            {/* HUD Component */}\n            <HUD\n              currentLap={currentLap}\n              availableLaps={availableLaps}\n              points={points}\n              hud={hud}\n              gameState={gameState}\n            />\n\n            {/* Game Canvas */}\n            <GameCanvas\n              ref={canvasRef}\n              width={720}\n              height={960}\n              style={{ backgroundColor: '#35cafa', width: '100%', height: '100%' }}\n            />\n          </div>\n        </div>\n\n        {/* Billboard Statistics (Debug Mode) */}\n        <BillboardStats\n          getBillboardStats={getBillboardStats}\n          isVisible={showBillboardStats && gameState === 'playing' && !mobile}\n        />\n\n        {/* Game Controls */}\n        {mobile && gameState === 'playing' && (\n          <GameControls\n            onControl={handleControl}\n            onControlEnd={handleControlEnd}\n            layout=\"racing\"\n            brandColor={brandColor}\n            actionIcon=\"\"\n            action2Icon=\"\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RacingGame;\n","import { useState, useRef, useCallback, useEffect } from 'react';\nimport type {\n  Car,\n  InputState,\n  HudState,\n  GameConfig,\n  CoinAnimation,\n  CrashAnimation,\n} from '../types';\nimport { RoadEngine } from '../engine/road';\nimport { PhysicsEngine } from '../engine/physics';\nimport { RenderEngine } from '../engine/render';\nimport { GameLoop, ImageLoader, InputManager } from '../engine/gameLoop';\nimport { MathUtils } from '../utils/math';\nimport { DEFAULT_CONFIG, KEY, BACKGROUND } from '../constants';\nimport { isMobile } from '../../../../../utils/functions';\n\n/**\n * Custom hook for managing 3D car game state and logic\n */\nexport function useCarGame(\n  laps: number,\n  track: number,\n  skin: string,\n  setPointsEarned: (points: number) => void,\n  setGameOver: (isOver: boolean) => void\n) {\n  const mobile = isMobile();\n\n  // Game state\n  const [gameState, setGameState] = useState<\n    'loading' | 'ready' | 'playing' | 'paused' | 'gameover'\n  >('loading');\n  const gameStateRef = useRef(gameState);\n  const [currentLap, setCurrentLap] = useState(1);\n  const [points, setPoints] = useState(0);\n  const [hud, setHud] = useState<HudState>({\n    speed: '0',\n    current_lap_time: '00:00:0',\n  });\n  const coinAnimationsRef = useRef<CoinAnimation[]>([]);\n  const crashAnimationsRef = useRef<CrashAnimation[]>([]);\n\n  // Keep gameStateRef in sync\n  useEffect(() => {\n    gameStateRef.current = gameState;\n  }, [gameState]);\n\n  // Refs for game engines and state\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const roadEngineRef = useRef<RoadEngine>(null);\n  const physicsEngineRef = useRef<PhysicsEngine>(null);\n  const renderEngineRef = useRef<RenderEngine>(null);\n  const gameLoopRef = useRef<GameLoop>(null);\n  const inputManagerRef = useRef<InputManager>(null);\n\n  // Game world state\n  const gameWorldRef = useRef({\n    position: 0,\n    speed: 0,\n    playerX: 0,\n    playerZ: 0,\n    currentLapTime: 0,\n    cars: [] as Car[],\n    skyOffset: 0,\n    hillOffset: 0,\n    treeOffset: 0,\n    background: null as HTMLImageElement | null,\n    sprites: null as HTMLImageElement | null,\n    hasRendered: false,\n  });\n\n  // Input state\n  const inputStateRef = useRef<InputState>({\n    left: false,\n    right: false,\n    faster: false,\n    slower: false,\n  });\n\n  // Game configuration\n  const configRef = useRef<GameConfig>({\n    ...DEFAULT_CONFIG,\n    cameraDepth: 1 / Math.tan(((DEFAULT_CONFIG.fieldOfView / 2) * Math.PI) / 180),\n    maxSpeed: DEFAULT_CONFIG.segmentLength / ((1 / DEFAULT_CONFIG.fps) * 1.2),\n    accel: 0, // Will be calculated\n    breaking: 0, // Will be calculated\n    decel: 0, // Will be calculated\n    offRoadDecel: 0, // Will be calculated\n    offRoadLimit: 0, // Will be calculated\n    playerZ: 0, // Will be calculated in useEffect\n  });\n\n  // Calculate derived config values\n  useEffect(() => {\n    const config = configRef.current;\n    config.playerZ = config.cameraHeight * config.cameraDepth;\n    config.maxSpeed = config.segmentLength / ((1 / config.fps) * 1.2);\n    config.accel = config.maxSpeed / 5;\n    config.breaking = -config.maxSpeed;\n    config.decel = -config.maxSpeed / 5;\n    config.offRoadDecel = -config.maxSpeed / 2;\n    config.offRoadLimit = config.maxSpeed / 4;\n  }, []);\n\n  /**\n   * Format time for display\n   */\n  const formatTime = useCallback((dt: number): string => {\n    const minutes = Math.floor(dt / 60);\n    const seconds = Math.floor(dt - minutes * 60);\n    const tenths = Math.floor(10 * (dt - Math.floor(dt)));\n\n    if (minutes > 0 && minutes < 10) {\n      return `0${minutes}:${seconds < 10 ? '0' : ''}${seconds}:${tenths}`;\n    }\n    if (minutes > 0 && minutes >= 10) {\n      return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}:${tenths}`;\n    }\n    return `00:${seconds < 10 ? '0' : ''}${seconds}:${tenths < 10 ? '0' : ''}${tenths}`;\n  }, []);\n\n  /**\n   * Update HUD values\n   */\n  const updateHud = useCallback((key: keyof HudState, value: string) => {\n    setHud((prevHud) => {\n      if (prevHud[key] !== value) {\n        return { ...prevHud, [key]: value };\n      }\n      return prevHud;\n    });\n  }, []);\n\n  /**\n   * Initialize game engines\n   */\n  const initializeEngines = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    // Set canvas dimensions\n    const config = configRef.current;\n    canvas.width = config.width;\n    canvas.height = config.height;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Initialize engines\n    roadEngineRef.current = new RoadEngine(config.segmentLength, config.rumbleLength);\n    physicsEngineRef.current = new PhysicsEngine({\n      maxSpeed: config.maxSpeed,\n      accel: config.accel,\n      breaking: config.breaking,\n      decel: config.decel,\n      offRoadDecel: config.offRoadDecel,\n      offRoadLimit: config.offRoadLimit,\n      centrifugal: config.centrifugal,\n      trackLength: 0, // Will be updated after road generation\n    });\n    renderEngineRef.current = new RenderEngine(ctx, config.width, config.height);\n    renderEngineRef.current.setCameraDepth(config.cameraDepth);\n    inputManagerRef.current = new InputManager();\n\n    // Setup input handlers\n    inputManagerRef.current.setKeyHandlers([\n      {\n        keys: [KEY.LEFT, KEY.A],\n        mode: 'down',\n        action: () => {\n          inputStateRef.current.left = true;\n        },\n      },\n      {\n        keys: [KEY.RIGHT, KEY.D],\n        mode: 'down',\n        action: () => {\n          inputStateRef.current.right = true;\n        },\n      },\n      {\n        keys: [KEY.UP, KEY.W],\n        mode: 'down',\n        action: () => {\n          inputStateRef.current.faster = true;\n        },\n      },\n      {\n        keys: [KEY.DOWN, KEY.S],\n        mode: 'down',\n        action: () => {\n          inputStateRef.current.slower = true;\n        },\n      },\n      {\n        keys: [KEY.LEFT, KEY.A],\n        mode: 'up',\n        action: () => {\n          inputStateRef.current.left = false;\n        },\n      },\n      {\n        keys: [KEY.RIGHT, KEY.D],\n        mode: 'up',\n        action: () => {\n          inputStateRef.current.right = false;\n        },\n      },\n      {\n        keys: [KEY.UP, KEY.W],\n        mode: 'up',\n        action: () => {\n          inputStateRef.current.faster = false;\n        },\n      },\n      {\n        keys: [KEY.DOWN, KEY.S],\n        mode: 'up',\n        action: () => {\n          inputStateRef.current.slower = false;\n        },\n      },\n    ]);\n\n    return true;\n  }, []);\n\n  /**\n   * Load game assets\n   */\n  const loadAssets = useCallback(async () => {\n    try {\n      const images = await ImageLoader.loadImages(\n        ['background', 'sprites'],\n        '/games/racing/images',\n        skin\n      );\n\n      gameWorldRef.current.background = images[0];\n      gameWorldRef.current.sprites = images[1];\n\n      return true;\n    } catch (error) {\n      console.error('Failed to load game assets:', error);\n      return false;\n    }\n  }, [skin]);\n\n  /**\n   * Reset game world\n   */\n  const resetGame = useCallback(() => {\n    const config = configRef.current;\n    const world = gameWorldRef.current;\n\n    // Reset world state\n    world.position = 0;\n    world.speed = 0;\n    world.playerX = 0;\n    world.currentLapTime = 0;\n    world.skyOffset = 0;\n    world.hillOffset = 0;\n    world.treeOffset = 0;\n\n    // Reset road and cars\n    if (roadEngineRef.current && physicsEngineRef.current) {\n      roadEngineRef.current.reset(track, config.playerZ);\n      const trackLength = roadEngineRef.current.getTrackLength();\n      physicsEngineRef.current.updateTrackLength(trackLength);\n      world.cars = roadEngineRef.current.resetCars(config.totalCars, config.maxSpeed);\n    }\n\n    // Reset UI state\n    setCurrentLap(1);\n    setPoints(0);\n    coinAnimationsRef.current = [];\n    crashAnimationsRef.current = [];\n    updateHud('speed', '0');\n    updateHud('current_lap_time', '00:00:0');\n  }, [track, updateHud]);\n\n  /**\n   * Game update loop\n   */\n  const update = useCallback(\n    (dt: number) => {\n      if (gameStateRef.current !== 'playing') return;\n\n      const config = configRef.current;\n      const world = gameWorldRef.current;\n      const physics = physicsEngineRef.current;\n      const road = roadEngineRef.current;\n\n      if (!physics || !road) return;\n\n      const playerSegment = road.findSegment(world.position + config.playerZ);\n      const startPosition = world.position;\n\n      // Update player physics\n      const playerUpdate = physics.updatePlayer(\n        world.playerX,\n        world.speed,\n        world.position,\n        inputStateRef.current,\n        playerSegment,\n        dt,\n        (z) => road.findSegment(z),\n        config.width,\n        config.height\n      );\n\n      world.playerX = playerUpdate.playerX;\n      world.speed = playerUpdate.speed;\n      world.position = MathUtils.increase(world.position, dt * world.speed, road.getTrackLength());\n\n      // Handle points and crashes\n      if (playerUpdate.pointsEarned !== 0) {\n        setPoints((prev) => Math.max(prev + playerUpdate.pointsEarned, 0));\n      }\n\n      // Handle coin collection animation\n      if (playerUpdate.coinCollected && playerUpdate.pointsEarned > 0) {\n        coinAnimationsRef.current.push({\n          x: playerUpdate.coinCollected!.x,\n          y: playerUpdate.coinCollected!.y,\n          points: playerUpdate.pointsEarned,\n          startTime: Date.now(),\n        });\n      }\n\n      // Handle crash animation\n      if (playerUpdate.crashPosition && playerUpdate.crashed) {\n        crashAnimationsRef.current.push({\n          x: playerUpdate.crashPosition!.x,\n          y: playerUpdate.crashPosition!.y,\n          startTime: Date.now(),\n        });\n      }\n\n      // Update cars\n      physics.updateCars(\n        world.cars,\n        dt,\n        playerSegment,\n        world.playerX,\n        world.speed,\n        config.drawDistance,\n        (z) => road.findSegment(z),\n        road.getSegments()\n      );\n\n      // Update background scroll\n      const scrollUpdate = physics.updateScrollOffsets(\n        world.skyOffset,\n        world.hillOffset,\n        world.treeOffset,\n        playerSegment,\n        startPosition,\n        world.position,\n        config.segmentLength,\n        config.skySpeed,\n        config.hillSpeed,\n        config.treeSpeed\n      );\n\n      world.skyOffset = scrollUpdate.skyOffset;\n      world.hillOffset = scrollUpdate.hillOffset;\n      world.treeOffset = scrollUpdate.treeOffset;\n\n      // Handle lap completion\n      if (world.position > config.playerZ) {\n        if (world.currentLapTime && startPosition < config.playerZ) {\n          setCurrentLap((prev) => prev + 1);\n          road.removeAllCoins();\n          world.currentLapTime = 0;\n        } else {\n          world.currentLapTime += dt;\n        }\n      }\n\n      // Update HUD\n      updateHud('speed', String(5 * Math.round(world.speed / 500)));\n      updateHud('current_lap_time', formatTime(world.currentLapTime));\n    },\n    [formatTime, updateHud]\n  );\n\n  /**\n   * Game render loop\n   */\n  const render = useCallback(\n    (_interpolation: number) => {\n      if (gameStateRef.current !== 'playing') {\n        return;\n      }\n\n      const config = configRef.current;\n      const world = gameWorldRef.current;\n      const renderer = renderEngineRef.current;\n      const road = roadEngineRef.current;\n\n      if (!renderer || !road || !world.background || !world.sprites) return;\n\n      renderer.clear();\n\n      const baseSegment = road.findSegment(world.position);\n      const basePercent = MathUtils.percentRemaining(world.position, config.segmentLength);\n      const playerSegment = road.findSegment(world.position + config.playerZ);\n      const playerPercent = MathUtils.percentRemaining(\n        world.position + config.playerZ,\n        config.segmentLength\n      );\n      const playerY = MathUtils.interpolate(\n        playerSegment.p1.world.y,\n        playerSegment.p2.world.y,\n        playerPercent\n      );\n\n      let x = 0;\n      let dx = -(baseSegment.curve * basePercent);\n      let maxy = config.height;\n\n      // Render background layers\n      renderer.background(\n        world.background,\n        BACKGROUND.SKY,\n        world.skyOffset,\n        renderer.resolution * config.skySpeed * playerY\n      );\n      renderer.background(\n        world.background,\n        BACKGROUND.HILLS,\n        world.hillOffset,\n        renderer.resolution * config.hillSpeed * playerY\n      );\n      renderer.background(\n        world.background,\n        BACKGROUND.TREES,\n        world.treeOffset,\n        renderer.resolution * config.treeSpeed * playerY\n      );\n\n      // Render road segments\n      const segments = road.getSegments();\n      for (let n = 0; n < config.drawDistance; n++) {\n        const segment = segments[(baseSegment.index + n) % segments.length];\n        segment.looped = segment.index < baseSegment.index;\n        segment.fog = MathUtils.exponentialFog(n / config.drawDistance, config.fogDensity);\n        segment.clip = maxy;\n\n        MathUtils.project(\n          segment.p1,\n          world.playerX * config.roadWidth - x,\n          playerY + config.cameraHeight,\n          world.position - (segment.looped ? road.getTrackLength() : 0),\n          config.cameraDepth,\n          config.width,\n          config.height,\n          config.roadWidth\n        );\n        MathUtils.project(\n          segment.p2,\n          world.playerX * config.roadWidth - x - dx,\n          playerY + config.cameraHeight,\n          world.position - (segment.looped ? road.getTrackLength() : 0),\n          config.cameraDepth,\n          config.width,\n          config.height,\n          config.roadWidth\n        );\n\n        x = x + dx;\n        dx = dx + segment.curve;\n\n        if (\n          segment.p1.camera.z <= config.cameraDepth ||\n          segment.p2.screen.y >= segment.p1.screen.y ||\n          segment.p2.screen.y >= maxy\n        ) {\n          continue;\n        }\n\n        renderer.segment(\n          config.lanes,\n          segment.p1.screen.x,\n          segment.p1.screen.y,\n          segment.p1.screen.w,\n          segment.p2.screen.x,\n          segment.p2.screen.y,\n          segment.p2.screen.w,\n          segment.fog,\n          segment.color\n        );\n\n        maxy = segment.p1.screen.y;\n      }\n\n      // Render all objects in correct z-order\n      renderer.renderObjects(\n        segments,\n        baseSegment.index,\n        config.drawDistance,\n        config.roadWidth,\n        world.sprites,\n        (sprite, segmentIndex, offset) => {\n          // Track billboard impressions\n          if (road.getBillboardName) {\n            const billboardName = road.getBillboardName(sprite);\n            if (billboardName) {\n              road.recordBillboardImpression(segmentIndex, offset, billboardName, currentLap);\n            }\n          }\n        }\n      );\n\n      // Render player\n      renderer.player(\n        config.roadWidth,\n        world.sprites,\n        world.speed / config.maxSpeed,\n        config.cameraDepth / config.playerZ,\n        config.width / 2,\n        config.height / 2 -\n          ((config.cameraDepth / config.playerZ) *\n            MathUtils.interpolate(\n              playerSegment.p1.camera.y,\n              playerSegment.p2.camera.y,\n              playerPercent\n            ) *\n            config.height) /\n            2,\n        world.speed * (inputStateRef.current.left ? -1 : inputStateRef.current.right ? 1 : 0),\n        playerSegment.p2.world.y - playerSegment.p1.world.y\n      );\n\n      // Render coin animations\n      const currentTime = Date.now();\n      renderer.renderCoinAnimations(coinAnimationsRef.current, currentTime);\n      renderer.renderCrashAnimations(crashAnimationsRef.current, currentTime);\n\n      // Clean up expired animations\n      coinAnimationsRef.current = coinAnimationsRef.current.filter(\n        (anim) => currentTime - anim.startTime < 500\n      );\n      crashAnimationsRef.current = crashAnimationsRef.current.filter(\n        (anim) => currentTime - anim.startTime < 500\n      );\n    },\n    [currentLap]\n  );\n\n  /**\n   * Start the game\n   */\n  const startGame = useCallback(async () => {\n    setGameState('loading');\n\n    if (!initializeEngines()) {\n      console.error('Failed to initialize game engines');\n      return;\n    }\n\n    const assetsLoaded = await loadAssets();\n    if (!assetsLoaded) {\n      console.error('Failed to load game assets');\n      return;\n    }\n\n    resetGame();\n\n    // Initialize game loop\n    gameLoopRef.current = new GameLoop(update, render, DEFAULT_CONFIG.fps);\n    gameLoopRef.current.start();\n\n    setGameState('playing');\n  }, [initializeEngines, loadAssets, resetGame, update, render]);\n\n  /**\n   * Pause/unpause game\n   */\n  const togglePause = useCallback(() => {\n    if (gameState === 'playing') {\n      setGameState('paused');\n      gameLoopRef.current?.stop();\n    } else if (gameState === 'paused') {\n      setGameState('playing');\n      gameLoopRef.current?.start();\n    }\n  }, [gameState]);\n\n  /**\n   * Stop the game\n   */\n  const stopGame = useCallback(() => {\n    gameLoopRef.current?.stop();\n    inputManagerRef.current?.destroy();\n    setGameState('gameover');\n  }, []);\n\n  // Check for game over condition\n  useEffect(() => {\n    if (currentLap > laps) {\n      setPointsEarned(points);\n      setGameOver(true);\n      stopGame();\n    }\n  }, [currentLap, laps, points, setPointsEarned, setGameOver, stopGame]);\n\n  /**\n   * Setup touch controls for mobile\n   */\n  const setupTouchControls = useCallback((isMobile: boolean) => {\n    if (inputManagerRef.current) {\n      inputManagerRef.current.setupTouchControls(isMobile);\n    }\n  }, []);\n\n  // Setup touch controls after initialization\n  useEffect(() => {\n    if (gameState === 'playing' && inputManagerRef.current) {\n      inputManagerRef.current.setupTouchControls(mobile);\n    }\n  }, [gameState, mobile]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      gameLoopRef.current?.stop();\n      inputManagerRef.current?.destroy();\n    };\n  }, []);\n\n  /**\n   * Handle touch control input directly\n   */\n  const handleTouchControl = useCallback(\n    (direction: 'up' | 'down' | 'left' | 'right' | 'action' | 'action2', isPressed: boolean) => {\n      switch (direction) {\n        case 'left':\n          inputStateRef.current.left = isPressed;\n          break;\n        case 'right':\n          inputStateRef.current.right = isPressed;\n          break;\n        case 'up':\n          inputStateRef.current.faster = isPressed;\n          break;\n        case 'down':\n          inputStateRef.current.slower = isPressed;\n          break;\n      }\n    },\n    []\n  );\n\n  /**\n   * Get billboard statistics\n   */\n  const getBillboardStats = useCallback(() => {\n    if (roadEngineRef.current) {\n      return roadEngineRef.current.getBillboardStats(laps);\n    }\n    return null;\n  }, [laps]);\n\n  return {\n    canvasRef,\n    gameState,\n    currentLap,\n    points,\n    hud,\n    availableLaps: laps,\n    startGame,\n    togglePause,\n    stopGame,\n    setupTouchControls,\n    handleTouchControl,\n    getBillboardStats,\n  };\n}\n","'use client';\nimport { useRef, useState } from 'react';\nimport { GameCard } from './ui/GameCard';\nimport { GameOverlay } from './ui/GameOverlay';\nimport RacingGame from './racing/game';\nimport PageNavigation from '../PageNavigation/PageNavigation';\nimport { Language } from '../../../types/i18n';\nimport { getTranslations, interpolate } from '../../../i18n';\n\ninterface GameSelectorProps {\n  visitor: string;\n  setDialogText: (text: string) => void;\n  setCurrentAction: (action: string) => void;\n  lang: Language;\n}\n\nexport default function GameSelector({ visitor, setDialogText, setCurrentAction, lang }: GameSelectorProps) {\n  const t = getTranslations(lang);\n  const [selectedGame, setSelectedGame] = useState('');\n  const [pointsEarned, setPointsEarned] = useState<number>(0);\n  const [gameOver, setGameOver] = useState<boolean>(false);\n\n  const gameRef = useRef<any>(null);\n\n  if (gameOver) {\n    return (\n      <div className=\"retro-page\">\n        <PageNavigation currentSection=\"goTo-games\" onNavigate={setCurrentAction} lang={lang} />\n        <div className=\"page-content\">\n          <GameOverlay\n            type=\"custom\"\n            title={pointsEarned > 0 ? ` ${t.games.congratulations}` : ` ${t.games.sorry}`}\n            message={pointsEarned > 0 ? interpolate(t.games.wonPoints, { points: pointsEarned }) : t.games.tryAgain}\n            brandColor=\"#00d26a\"\n            onAction={() => {\n              setGameOver(false);\n              setPointsEarned(0);\n              setSelectedGame('');\n            }}\n            actionText={t.games.backToMenu}\n            lang={lang}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  if (selectedGame !== '') {\n    return (\n      <div className=\"retro-page\">\n        <PageNavigation currentSection=\"goTo-games\" onNavigate={setCurrentAction} lang={lang} />\n        <div className=\"page-content game-page-content\">\n          <div className=\"game-wrapper\" ref={gameRef}>\n            {selectedGame === 'races' && (\n              <RacingGame\n                laps={1}\n                track={1}\n                setGameOver={setGameOver}\n                setPointsEarned={setPointsEarned}\n                showBillboardStats={false}\n                brandColor=\"#ef4444\"\n                gameTitle=\"MAW Racing\"\n                lang={lang}\n                // skin=\"lapi\"\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"retro-page\">\n      <PageNavigation currentSection=\"goTo-games\" onNavigate={setCurrentAction} lang={lang} />\n      <div className=\"page-content\">\n        <h1>{t.games.title}</h1>\n\n        <div className=\"retro-box\" style={{ textAlign: 'center', marginBottom: '20px' }}>\n          {t.games.subtitle}\n        </div>\n\n        <div className=\"game-selector-container\">\n          <div className=\"game-selector-grid\">\n            <GameCard\n              title={t.games.racing.title}\n              icon=\"\"\n              gradientFrom=\"#3b82f6\"\n              gradientTo=\"#2563eb\"\n              onClick={() => setSelectedGame('races')}\n              description={t.games.racing.description}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, lazy, Suspense, useEffect, useCallback, useMemo } from 'react';\nimport { ContentProps } from '../../types';\nimport BrowserWindow from './BrowserWindow/BrowserWindow';\nimport { getTranslations, interpolate } from '../../i18n';\nimport { useIsMobile, useAudio } from '../../hooks';\nimport { DELAYS, AUDIO_VOLUMES } from '../../constants';\n\nimport './Content.css';\nimport './Games/Games.css';\nimport GameSelector from './Games/game-selector';\nimport maduroImg from '../../img/maduro.webp';\n\nconst Avatar = lazy(() => import('./Avatar/Avatar'));\nconst Home = lazy(() => import('./Home/Home'));\nconst AboutMe = lazy(() => import('./AboutMe/AboutMe'));\nconst Work = lazy(() => import('./Work/Work'));\nconst Portfolio = lazy(() => import('./Portfolio/Portfolio'));\nconst Contact = lazy(() => import('./Contact/Contact'));\n\nconst Content: React.FC<ContentProps> = ({ name, lang }) => {\n  const t = getTranslations(lang);\n  const greetings = name !== ''\n    ? interpolate(t.avatar.dialogues.greetingWithName, { name })\n    : t.avatar.dialogues.greeting;\n  const [dialogText, setDialogText] = useState<string>(greetings);\n  const [currentAction, setCurrentAction] = useState<string>('');\n  const [browserOpen, setBrowserOpen] = useState<boolean>(false);\n  const [browserMinimized, setBrowserMinimized] = useState<boolean>(false);\n  const isMobile = useIsMobile();\n  const [pendingBrowserOpen, setPendingBrowserOpen] = useState<boolean>(false);\n  const { setVolume } = useAudio();\n\n  const handleNavigate = useCallback((action: string) => {\n    setCurrentAction(action);\n\n    // Only these actions should open the browser\n    const browserActions = [\n      'goTo-about',\n      'goTo-work',\n      'goTo-contact',\n      'goTo-portfolio',\n      'goTo-games',\n    ];\n\n    if (isMobile && browserActions.includes(action)) {\n      // For navigation actions on mobile, wait for dialog to complete\n      setPendingBrowserOpen(true);\n    } else if (!isMobile && browserActions.includes(action)) {\n      // On desktop, unminimize the browser immediately\n      setBrowserMinimized(false);\n    }\n    // Other actions (say-hi, say-meow, chatter, etc.) don't open the browser\n  }, [isMobile]);\n\n  const handleDialogComplete = useCallback(() => {\n    // Open browser after dialog completes on mobile\n    if (pendingBrowserOpen) {\n      setTimeout(() => {\n        setBrowserOpen(true);\n        setPendingBrowserOpen(false);\n      }, DELAYS.BROWSER_OPEN);\n    }\n  }, [pendingBrowserOpen]);\n\n  const renderRightSideComponent = () => {\n    const loader = (\n      <div id=\"loader\">\n        <i className=\"spinner icon\"></i>\n      </div>\n    );\n    switch (currentAction) {\n      case 'goTo-about':\n        return (\n          <Suspense fallback={loader}>\n            <AboutMe setDialogText={setDialogText} setCurrentAction={handleNavigate} lang={lang} />\n          </Suspense>\n        );\n      case 'goTo-work':\n        return (\n          <Suspense fallback={loader}>\n            <Work setDialogText={setDialogText} setCurrentAction={handleNavigate} lang={lang} />\n          </Suspense>\n        );\n      case 'goTo-portfolio':\n        return (\n          <Suspense fallback={loader}>\n            <Portfolio setDialogText={setDialogText} setCurrentAction={handleNavigate} lang={lang} />\n          </Suspense>\n        );\n      case 'goTo-contact':\n        return (\n          <Suspense fallback={loader}>\n            <Contact\n              visitor={name}\n              setDialogText={setDialogText}\n              setCurrentAction={handleNavigate}\n              lang={lang}\n            />\n          </Suspense>\n        );\n      case 'goTo-games':\n        return (\n          <Suspense fallback={loader}>\n            <GameSelector\n              visitor={name}\n              setDialogText={setDialogText}\n              setCurrentAction={handleNavigate}\n              lang={lang}\n            />\n          </Suspense>\n        );\n      default:\n        return (\n          <Suspense fallback={loader}>\n            <Home setDialogText={setDialogText} setCurrentAction={handleNavigate} lang={lang} />\n          </Suspense>\n        );\n    }\n  };\n\n  useEffect(() => {\n    setVolume('bgMusic', AUDIO_VOLUMES.BACKGROUND_MUSIC);\n  }, [setVolume]);\n\n  return (\n    <Suspense\n      fallback={\n        <div id=\"loader\">\n          <i className=\"spinner icon\"></i>\n        </div>\n      }\n    >\n      <div className=\"ui container main\">\n        <div className=\"ui stackable grid\">\n          <div className=\"seven wide column\">\n            <div className=\"left-side-wrapper\">\n              <Avatar\n                visitor={name}\n                dialogText={dialogText}\n                setDialogText={setDialogText}\n                currentAction={currentAction}\n                setCurrentAction={handleNavigate}\n                onDialogComplete={handleDialogComplete}\n                onOpenBrowser={useMemo(() => () => {\n                  if (isMobile) {\n                    setBrowserOpen(true);\n                  } else {\n                    setBrowserMinimized(false);\n                  }\n                }, [isMobile])}\n                lang={lang}\n              />\n            </div>\n          </div>\n          <div className={`nine wide column ${browserOpen ? 'browser-open' : ''}`}>\n            <div className=\"right-side-wrapper\">\n              {!isMobile && browserMinimized && (\n                <div className=\"easter-egg-container\">\n                  <img src={maduroImg} alt=\"\" className=\"easter-egg-image\" />\n                </div>\n              )}\n              <BrowserWindow\n                currentSection={currentAction}\n                onNavigate={handleNavigate}\n                onMinimize={useMemo(() => () => {\n                  if (isMobile) {\n                    setBrowserOpen(false);\n                  } else {\n                    setBrowserMinimized(true);\n                  }\n                }, [isMobile])}\n                onOpen={() => setBrowserOpen(true)}\n                isMobile={isMobile}\n                browserOpen={browserOpen}\n                browserMinimized={browserMinimized}\n                lang={lang}\n              >\n                {renderRightSideComponent()}\n              </BrowserWindow>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Suspense>\n  );\n};\n\nexport default Content;\n","import React from 'react';\nimport './PageNavigation.css';\nimport { Language } from '../../../types/i18n';\nimport { getTranslations } from '../../../i18n';\n\ninterface PageNavigationProps {\n  currentSection: string;\n  onNavigate: (action: string) => void;\n  lang?: Language;\n}\n\nconst PageNavigation: React.FC<PageNavigationProps> = ({ currentSection, onNavigate, lang = 'en' }) => {\n  const t = getTranslations(lang);\n  const navItems = [\n    { id: '', label: t.navigation.home, icon: '' },\n    { id: 'goTo-about', label: t.navigation.about, icon: '' },\n    { id: 'goTo-work', label: t.navigation.work, icon: '' },\n    { id: 'goTo-portfolio', label: t.navigation.portfolio, icon: '' },\n    { id: 'goTo-contact', label: t.navigation.contact, icon: '' },\n    { id: 'goTo-games', label: t.navigation.games, icon: '' },\n  ];\n\n  const getActiveClass = (itemId: string) => {\n    return currentSection === itemId ? 'active' : '';\n  };\n\n  return (\n    <div className=\"page-navigation\">\n      <div className=\"nav-container\">\n        {navItems.map((item) => (\n          <button\n            key={item.id}\n            className={`nav-item ${getActiveClass(item.id)}`}\n            onClick={() => onNavigate(item.id)}\n            aria-current={currentSection === item.id ? 'page' : undefined}\n          >\n            <span className=\"nav-icon\">{item.icon}</span>\n            <span className=\"nav-label\">{item.label}</span>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default PageNavigation;\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };"],"names":["BackIcon","_jsxs","viewBox","width","height","fill","children","_jsx","d","x","y","ForwardIcon","RefreshIcon","stroke","strokeWidth","strokeLinecap","points","StopIcon","HomeIcon","_ref","currentTheme","onSelectTheme","themes","variant","className","onClick","classic","vaporwave","terminal","currentSection","onNavigate","onMinimize","onOpen","isMobile","browserOpen","browserMinimized","lang","t","getTranslations","isMaximized","setIsMaximized","useState","showBSOD","setShowBSOD","setCurrentTheme","localStorage","getItem","menubarThemeOpen","setMenubarThemeOpen","statusbarThemeOpen","setStatusbarThemeOpen","menubarRef","useRef","statusbarRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","setTheme","useCallback","theme","source","setItem","toggleMenubarTheme","prev","toggleStatusbarTheme","handleMenubarThemeSelect","handleStatusbarThemeSelect","concat","handleBrowserClick","onDoubleClick","section","browser","titles","home","about","work","portfolio","contact","games","e","stopPropagation","menus","file","edit","view","favorites","ref","ThemeDropdown","help","handleBack","disabled","handleHome","type","value","getSectionUrl","readOnly","bsod","title","mainText","collectingError","errorCode","stopCode","clickToRestart","statusDone","statusZone","GameCard","icon","color","gradientFrom","gradientTo","description","bgStyle","background","backgroundColor","style","GameOverlay","message","score","level","brandColor","onAction","actionText","customContent","showPressToStart","showBlink","setShowBlink","interval","setInterval","clearInterval","defaultTitles","start","readyToPlay","pause","gameOver","levelComplete","custom","displayTitle","undefined","finalScore","toLocaleString","opacity","pressSpaceToStart","KEY","ROAD","NONE","SHORT","MEDIUM","LONG","LOW","HIGH","EASY","HARD","COLORS","SKY","TREE","FOG","LIGHT","road","grass","rumble","lane","DARK","START","FINISH","BACKGROUND","w","h","SPRITES_DEF","PALM_TREE","BILLBOARD08","TREE1","DEAD_TREE1","BILLBOARD09","BOULDER3","COLUMN","BILLBOARD01","BILLBOARD06","BILLBOARD05","BILLBOARD07","BOULDER2","TREE2","BILLBOARD04","DEAD_TREE2","BOULDER1","BUSH1","CACTUS","BUSH2","BILLBOARD03","BILLBOARD02","STUMP","SEMI","TRUCK","CAR03","CAR02","CAR04","CAR01","PLAYER_UPHILL_LEFT","PLAYER_UPHILL_STRAIGHT","PLAYER_UPHILL_RIGHT","PLAYER_RIGHT","PLAYER_STRAIGHT","PLAYER_LEFT","COIN","SPRITES","_objectSpread","SCALE","BILLBOARDS","PLANTS","CARS","DEFAULT_CONFIG","fps","roadWidth","segmentLength","rumbleLength","lanes","fieldOfView","cameraHeight","drawDistance","fogDensity","centrifugal","skySpeed","hillSpeed","treeSpeed","totalCars","MathUtils","timestamp","performance","now","toInt","obj","def","arguments","length","parseInt","String","isNaN","toFloat","parseFloat","limit","min","max","Math","randomInt","round","this","interpolate","random","randomChoice","options","percentRemaining","n","total","accelerate","v","accel","dt","a","b","percent","easeIn","pow","easeOut","easeInOut","cos","PI","exponentialFog","distance","density","E","increase","increment","result","overlap","x1","w1","x2","w2","half1","half2","project","p","cameraX","cameraY","cameraZ","cameraDepth","camera","world","z","screen","scale","RoadEngine","constructor","segments","trackLength","billboardPlacements","Map","billboardImpressions","billboardInstances","nextBillboardId","getSegments","getTrackLength","getBillboardPlacements","getBillboardImpressions","recordBillboardImpression","segmentIndex","offset","billboardName","currentLap","instances","get","instance","find","inst","abs","seenInLaps","has","add","set","getBillboardStats","totalLaps","placements","impressions","maxPossibleImpressions","forEach","count","name","realisticTrackLength","totalSegments","findSegment","floor","lastY","p2","addSegment","curve","push","index","p1","sprites","cars","addSprite","sprite","spriteInstance","getBillboardName","billboardId","Set","addRoad","enter","hold","leave","startY","endY","addStraight","num","addHill","addCurve","addLowRollingHills","addSCurves","addBumps","addDownhillToEnd","reset","track","playerZ","resetSprites","playerSegment","clear","billboard","i","LANE_POSITIONS","removeAllCoins","segment","filter","resetCars","maxSpeed","car","speed","PhysicsEngine","config","breaking","decel","offRoadDecel","offRoadLimit","updateTrackLength","updatePlayer","playerX","position","inputState","_findSegment","canvasWidth","canvasHeight","playerW","speedPercent","dx","coinCollected","crashPosition","pointsEarned","crashed","left","right","faster","slower","spriteW","coinW","splice","carW","updateCars","playerSpeed","oldSegment","updateCarOffset","newSegment","indexOf","carSegment","calculateAvoidanceDirection","otherCar","otherCarW","obstacleX","carX","updateScrollOffsets","skyOffset","hillOffset","treeOffset","startPosition","deltaPosition","RenderEngine","ctx","resolution","setCameraDepth","depth","updateDimensions","clearRect","polygon","y1","y2","x3","y3","x4","y4","fillStyle","beginPath","moveTo","lineTo","closePath","fog","r1","rumbleWidth","r2","l1","laneMarkerWidth","l2","fillRect","lanew1","lanew2","lanex1","lanex2","layer","rotation","imageW","imageH","sourceX","sourceY","sourceW","sourceH","destY","destW","destH","drawImage","destX","offsetX","offsetY","clipY","clipH","player","steer","updown","bounce","globalAlpha","projectedRoadWidth","renderCars","baseSegmentIndex","spriteScale","spriteX","spriteY","clip","renderSprites","renderObjects","onBillboardRender","renderCoinAnimations","animations","currentTime","save","anim","elapsed","startTime","progress","alpha","particleCount","particleRadius","burstRadius","angle","sin","arc","font","strokeStyle","lineWidth","text","textY","strokeText","fillText","restore","renderCrashAnimations","shakeX","shakeY","textX","GameLoop","update","render","isRunning","animationFrameId","lastTimestamp","accumulator","targetFps","fixedTimeStep","maxFrameTime","frameCount","lastFpsUpdate","currentFps","loop","frameTime","interpolation","updateFpsCounter","requestAnimationFrame","stop","cancelAnimationFrame","getFps","ImageLoader","loadImages","names","basePath","skin","promises","map","loadSingleImage","Promise","all","resolve","reject","img","Image","onload","onerror","Error","src","InputManager","keys","keyHandlers","handleKeyDown","keyCode","triggerKeyHandlers","includes","preventDefault","handleKeyUp","setupKeyboardListeners","destroy","setKeyHandlers","handlers","isKeyPressed","mode","handler","action","setupTouchControls","_isMobile","getKeyCodeForDirection","direction","window","isMobileUserAgent","test","navigator","userAgent","isMobileWidth","matchMedia","matches","moreThanOneTouchPoint","maxTouchPoints","HUD","availableLaps","hud","gameState","getSpeedometerRotation","_Fragment","alt","current_lap_time","cx","cy","r","BillboardStats","isVisible","stats","setStats","newStats","billboards","Object","sort","fontSize","borderBottom","textAlign","paddingBottom","placed","shown","maxPossible","percentage","toFixed","paddingTop","replace","fontWeight","borderTop","values","reduce","marginTop","GameCanvas","forwardRef","displayName","GameControls","onControl","onControlEnd","showActionButton","layout","actionLabel","actionIcon","action2Label","action2Icon","buttonClass","preventSelectStyles","userSelect","WebkitUserSelect","MozUserSelect","msUserSelect","touchAction","WebkitTouchCallout","handleContextMenu","onTouchStart","onContextMenu","onTouchEnd","onMouseDown","onMouseUp","laps","setPointsEarned","setGameOver","gameTitle","brandLogo","showBillboardStats","mobile","gameStarted","setGameStarted","canvasRef","startGame","togglePause","handleTouchControl","setGameState","gameStateRef","setCurrentLap","setPoints","setHud","coinAnimationsRef","crashAnimationsRef","roadEngineRef","physicsEngineRef","renderEngineRef","gameLoopRef","inputManagerRef","gameWorldRef","currentLapTime","hasRendered","inputStateRef","configRef","tan","formatTime","minutes","seconds","tenths","updateHud","key","prevHud","initializeEngines","canvas","getContext","loadAssets","async","images","error","console","resetGame","physics","playerUpdate","Date","scrollUpdate","_interpolation","renderer","baseSegment","basePercent","playerPercent","playerY","maxy","looped","_gameLoopRef$current","_gameLoopRef$current2","stopGame","_gameLoopRef$current3","_inputManagerRef$curr","_gameLoopRef$current4","_inputManagerRef$curr2","isPressed","useCarGame","handleControl","handleControlEnd","display","flexDirection","gap","justifyContent","alignItems","racing","startRacing","marginBottom","margin","useTouchControls","useKeyboard","padding","borderRadius","turnLeft","turnRight","brake","or","collectCoins","pressEscContinue","continue","id","maxWidth","visibility","GameSelector","visitor","setDialogText","setCurrentAction","selectedGame","setSelectedGame","gameRef","PageNavigation","congratulations","sorry","wonPoints","tryAgain","backToMenu","RacingGame","subtitle","Avatar","lazy","Home","AboutMe","Work","Portfolio","Contact","greetings","avatar","dialogues","greetingWithName","greeting","dialogText","currentAction","setBrowserOpen","setBrowserMinimized","useIsMobile","pendingBrowserOpen","setPendingBrowserOpen","setVolume","useAudio","handleNavigate","browserActions","handleDialogComplete","setTimeout","DELAYS","BROWSER_OPEN","AUDIO_VOLUMES","BACKGROUND_MUSIC","Suspense","fallback","onDialogComplete","onOpenBrowser","useMemo","maduroImg","BrowserWindow","renderRightSideComponent","loader","navItems","label","navigation","item","itemId","_typeof","o","Symbol","iterator","prototype","toPropertyKey","toPrimitive","call","TypeError","Number","_defineProperty","defineProperty","enumerable","configurable","writable","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptor","apply","_objectSpread2","getOwnPropertyDescriptors","defineProperties"],"sourceRoot":""}