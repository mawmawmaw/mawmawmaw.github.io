"use strict";(self.webpackChunkmawmawmaw=self.webpackChunkmawmawmaw||[]).push([[761],{1568:(e,t,s)=>{s.d(t,{A:()=>r});s(5043);var a=s(8419),n=s(579);const r=e=>{let{currentSection:t,onNavigate:s,lang:r="en"}=e;const o=(0,a.$)(r),i=[{id:"",label:o.navigation.home,icon:"\ud83c\udfe0"},{id:"goTo-about",label:o.navigation.about,icon:"\ud83d\udc64"},{id:"goTo-work",label:o.navigation.work,icon:"\ud83d\udcbe"},{id:"goTo-portfolio",label:o.navigation.portfolio,icon:"\ud83d\udcbc"},{id:"goTo-contact",label:o.navigation.contact,icon:"\u2709\ufe0f"},{id:"goTo-games",label:o.navigation.games,icon:"\ud83c\udfae"}];return(0,n.jsx)("div",{className:"page-navigation",children:(0,n.jsx)("div",{className:"nav-container",children:i.map(e=>{return(0,n.jsxs)("button",{className:"nav-item ".concat((a=e.id,t===a?"active":"")),onClick:()=>s(e.id),"aria-current":t===e.id?"page":void 0,children:[(0,n.jsx)("span",{className:"nav-icon",children:e.icon}),(0,n.jsx)("span",{className:"nav-label",children:e.label})]},e.id);var a})})})}},4705:(e,t,s)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function n(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function r(e,t,s){return(t=n(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{A:()=>r})},8856:(e,t,s)=>{s.r(t),s.d(t,{default:()=>te});var a=s(5043),n=s(8419),r=s(579);const o=()=>(0,r.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M10 3L5 8l5 5V3z"}),(0,r.jsx)("rect",{x:"3",y:"7",width:"8",height:"2"})]}),i=()=>(0,r.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M6 3l5 5-5 5V3z"}),(0,r.jsx)("rect",{x:"5",y:"7",width:"8",height:"2"})]}),l=()=>(0,r.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,r.jsx)("path",{d:"M14 8a6 6 0 0 1-6 6 6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 5.5 3.5",strokeLinecap:"round"}),(0,r.jsx)("polyline",{points:"11 2 14 2 14 5"})]}),c=()=>(0,r.jsx)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:(0,r.jsx)("rect",{x:"4",y:"4",width:"8",height:"8"})}),d=()=>(0,r.jsxs)("svg",{viewBox:"0 0 16 16",width:"14",height:"14",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M2 8l6-5 6 5v5a1 1 0 0 1-1 1H9v-4H7v4H3a1 1 0 0 1-1-1V8z"}),(0,r.jsx)("polygon",{points:"8,1 1,7 2,8 8,3 14,8 15,7"})]}),h=e=>{let{currentSection:t,children:s,onNavigate:h,onMinimize:m,onOpen:u,isMobile:p=!1,browserOpen:g=!0,browserMinimized:f=!1,lang:x}=e;const b=(0,n.$)(x),[v,y]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[S,L]=(0,a.useState)(()=>localStorage.getItem("browserTheme")||"classic"),[M,C]=(0,a.useState)(!1),[k,N]=(0,a.useState)(!1),D=(0,a.useRef)(null),I=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=e=>{D.current&&!D.current.contains(e.target)&&C(!1),I.current&&!I.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{p&&g&&y(!0)},[p,g]);const T=(e,t)=>{L(e),localStorage.setItem("browserTheme",e),"menubar"===t?C(!1):N(!1)};return(0,r.jsxs)("div",{className:"browser-window ".concat(v?"maximized":""," ").concat(f?"minimized":""),onClick:()=>{p&&!g&&(null===u||void 0===u||u(),y(!0))},children:[(0,r.jsxs)("div",{className:"browser-titlebar",onDoubleClick:()=>{p||y(!v)},children:[(0,r.jsxs)("div",{className:"browser-titlebar-text",children:[(0,r.jsx)("span",{className:"browser-icon",children:"\ud83c\udf10"}),(R=t,{"":b.browser.titles.home,"goTo-about":b.browser.titles.about,"goTo-work":b.browser.titles.work,"goTo-portfolio":b.browser.titles.portfolio,"goTo-contact":b.browser.titles.contact,"goTo-games":b.browser.titles.games}[R]||b.browser.titles.home)]}),(0,r.jsxs)("div",{className:"browser-titlebar-controls",children:[(0,r.jsx)("button",{className:"titlebar-button minimize","aria-label":"Minimize",onClick:e=>{e.stopPropagation(),p?v&&(y(!1),null===m||void 0===m||m()):null===m||void 0===m||m()},children:"_"}),(0,r.jsx)("button",{className:"titlebar-button maximize","aria-label":"Maximize",onClick:e=>{if(e.stopPropagation(),p){if(v)return;y(!0),null===u||void 0===u||u()}else y(!v)},children:"\u25a1"}),(0,r.jsx)("button",{className:"titlebar-button close","aria-label":"Close",onClick:e=>{e.stopPropagation(),p&&!v||j(!0)},children:"\xd7"})]})]}),(0,r.jsxs)("div",{className:"browser-menubar",children:[(0,r.jsx)("span",{className:"menu-item",children:b.browser.menus.file}),(0,r.jsx)("span",{className:"menu-item",children:b.browser.menus.edit}),(0,r.jsx)("span",{className:"menu-item",children:b.browser.menus.view}),(0,r.jsx)("span",{className:"menu-item",children:b.browser.menus.favorites}),(0,r.jsxs)("div",{className:"menu-item-wrapper",ref:D,children:[(0,r.jsx)("span",{className:"menu-item",onClick:()=>C(!M),children:b.browser.menus.themes}),M&&(0,r.jsxs)("div",{className:"theme-dropdown",children:[(0,r.jsx)("button",{className:"classic"===S?"active":"",onClick:()=>T("classic","menubar"),children:b.browser.themes.classic}),(0,r.jsx)("button",{className:"vaporwave"===S?"active":"",onClick:()=>T("vaporwave","menubar"),children:b.browser.themes.vaporwave}),(0,r.jsx)("button",{className:"terminal"===S?"active":"",onClick:()=>T("terminal","menubar"),children:b.browser.themes.terminal})]})]}),(0,r.jsx)("span",{className:"menu-item",children:b.browser.menus.help})]}),(0,r.jsxs)("div",{className:"browser-navbar",children:[(0,r.jsxs)("div",{className:"nav-buttons",children:[(0,r.jsx)("button",{className:"nav-button back",onClick:()=>{h("")},disabled:""===t,"aria-label":"Back",children:(0,r.jsx)(o,{})}),(0,r.jsx)("button",{className:"nav-button forward",disabled:!0,"aria-label":"Forward",children:(0,r.jsx)(i,{})}),(0,r.jsx)("button",{className:"nav-button refresh","aria-label":"Refresh",children:(0,r.jsx)(l,{})}),(0,r.jsx)("button",{className:"nav-button stop","aria-label":"Stop",children:(0,r.jsx)(c,{})}),(0,r.jsx)("button",{className:"nav-button home",onClick:()=>{h("")},"aria-label":"Home",children:(0,r.jsx)(d,{})})]}),(0,r.jsx)("div",{className:"nav-addressbar",children:(0,r.jsx)("input",{type:"text",value:(e=>({"":"http://maw.dev/index.html","goTo-about":"http://maw.dev/about-me.htm","goTo-work":"http://maw.dev/work/tech-stack.html","goTo-portfolio":"http://maw.dev/portfolio/gallery.cgi","goTo-contact":"http://maw.dev/contact/guestbook.php"}[e]||"http://maw.dev/"))(t),readOnly:!0,className:"addressbar-input"})}),(0,r.jsx)("button",{className:"nav-button go",children:"Go"})]}),(0,r.jsx)("div",{className:"browser-content",children:(0,r.jsx)("div",{className:"browser-viewport theme-".concat(S),children:s})}),w&&(0,r.jsx)("div",{className:"bsod-overlay",onClick:()=>j(!1),children:(0,r.jsxs)("div",{className:"bsod-content",children:[(0,r.jsx)("h1",{children:b.browser.bsod.title}),(0,r.jsx)("p",{className:"bsod-main-text",children:b.browser.bsod.mainText}),(0,r.jsx)("p",{children:b.browser.bsod.collectingError}),(0,r.jsx)("p",{className:"bsod-error",children:b.browser.bsod.errorCode}),(0,r.jsx)("p",{className:"bsod-code",children:b.browser.bsod.stopCode}),(0,r.jsx)("p",{className:"bsod-hint",children:b.browser.bsod.clickToRestart})]})}),(0,r.jsxs)("div",{className:"browser-statusbar",children:[(0,r.jsx)("div",{className:"status-text",children:b.browser.statusDone}),(0,r.jsxs)("div",{className:"status-icons",children:[(0,r.jsxs)("div",{className:"status-theme-selector",ref:I,children:[(0,r.jsxs)("button",{className:"status-theme-button",onClick:()=>N(!k),"aria-label":b.browser.menus.themes,children:["\ud83c\udfa8 ",b.browser.themes[S]||S]}),k&&(0,r.jsxs)("div",{className:"status-theme-dropdown",children:[(0,r.jsx)("button",{className:"classic"===S?"active":"",onClick:()=>T("classic","statusbar"),children:b.browser.themes.classic}),(0,r.jsx)("button",{className:"vaporwave"===S?"active":"",onClick:()=>T("vaporwave","statusbar"),children:b.browser.themes.vaporwave}),(0,r.jsx)("button",{className:"terminal"===S?"active":"",onClick:()=>T("terminal","statusbar"),children:b.browser.themes.terminal})]})]}),(0,r.jsx)("span",{className:"status-icon",children:"\ud83d\udd12"}),(0,r.jsx)("span",{className:"status-zone",children:b.browser.statusZone})]})]})]});var R},m=e=>{let{title:t,icon:s,color:a,gradientFrom:n,gradientTo:o,onClick:i,description:l,disabled:c=!1}=e;const d=n&&o?{background:"linear-gradient(135deg, ".concat(n," 0%, ").concat(o," 100%)")}:{backgroundColor:a||"#4b5563"};return(0,r.jsxs)("button",{onClick:i,disabled:c,className:"game-card",style:d,children:[(0,r.jsx)("div",{className:"game-card-overlay"}),(0,r.jsxs)("div",{className:"game-card-content",children:[s&&(0,r.jsx)("div",{className:"game-card-icon",children:s}),(0,r.jsx)("h3",{className:"game-card-title",children:t}),l&&(0,r.jsx)("p",{className:"game-card-description",children:l})]}),(0,r.jsx)("div",{className:"game-card-accent-top",children:(0,r.jsx)("div",{className:"game-card-accent-triangle"})}),(0,r.jsx)("div",{className:"game-card-accent-bottom"})]})},u=e=>{let{type:t,title:s,message:o,score:i,level:l,brandColor:c="#00d26a",onAction:d,actionText:h,customContent:m,showPressToStart:u=!0,lang:p="en"}=e;const g=(0,n.$)(p),[f,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(u&&"start"===t){const e=setInterval(()=>{x(e=>!e)},500);return()=>clearInterval(e)}},[u,t]);const b={start:"\ud83c\udfae ".concat(g.games.readyToPlay),pause:"\u23f8\ufe0f ".concat(g.games.pause),gameOver:"\ud83e\udd73 ".concat(g.games.gameOver),levelComplete:"\ud83c\udf89 ".concat(g.games.levelComplete),custom:""},v=s||b[t];return(0,r.jsxs)("div",{className:"game-overlay",children:[(0,r.jsx)("div",{className:"game-overlay-bg"}),(0,r.jsxs)("div",{className:"game-overlay-card",children:[(0,r.jsx)("div",{className:"game-overlay-glow",style:{backgroundColor:c}}),(0,r.jsxs)("div",{className:"game-overlay-content",children:[v&&(0,r.jsx)("h2",{className:"game-overlay-title",children:v}),void 0!==i&&(0,r.jsxs)("div",{className:"game-overlay-score",children:[(0,r.jsx)("p",{className:"game-overlay-score-label",children:g.games.finalScore}),(0,r.jsx)("p",{className:"game-overlay-score-value",children:i.toLocaleString()})]}),void 0!==l&&"levelComplete"===t&&(0,r.jsxs)("div",{className:"game-overlay-level",children:[(0,r.jsx)("p",{className:"game-overlay-level-label",children:g.games.level}),(0,r.jsx)("p",{className:"game-overlay-level-value",children:l})]}),o&&(0,r.jsx)("p",{className:"game-overlay-message",children:o}),m,"start"===t&&u&&!d?(0,r.jsx)("p",{className:"game-overlay-blink",style:{color:c,opacity:f?1:0},children:g.games.pressSpaceToStart}):d&&h?(0,r.jsx)("button",{onClick:d,className:"game-overlay-button",style:{backgroundColor:c},children:h}):null]})]})]})};var p=s(9379);const g=37,f=38,x=39,b=40,v=65,y=68,w=83,j=87,S={NONE:0,SHORT:25,MEDIUM:50,LONG:100},L={NONE:0,LOW:20,MEDIUM:40,HIGH:60},M={NONE:0,EASY:2,MEDIUM:4,HARD:6},C={SKY:"#72D7EE",TREE:"#005108",FOG:"#005108",LIGHT:{road:"#6B6B6B",grass:"#10AA10",rumble:"#555555",lane:"#CCCCCC"},DARK:{road:"#696969",grass:"#009A00",rumble:"#BBBBBB"},START:{road:"white",grass:"white",rumble:"white"},FINISH:{road:"black",grass:"black",rumble:"black"}},k={x:5,y:5,w:1280,h:480},N={x:5,y:495,w:1280,h:480},D={x:5,y:985,w:1280,h:480},I={PALM_TREE:{x:5,y:5,w:215,h:540},BILLBOARD08:{x:230,y:5,w:385,h:265},TREE1:{x:625,y:5,w:360,h:360},DEAD_TREE1:{x:5,y:555,w:135,h:332},BILLBOARD09:{x:150,y:555,w:328,h:282},BOULDER3:{x:230,y:280,w:320,h:220},COLUMN:{x:995,y:5,w:200,h:315},BILLBOARD01:{x:625,y:375,w:300,h:170},BILLBOARD06:{x:488,y:555,w:298,h:190},BILLBOARD05:{x:5,y:897,w:298,h:190},BILLBOARD07:{x:313,y:897,w:298,h:190},BOULDER2:{x:621,y:897,w:298,h:140},TREE2:{x:1205,y:5,w:282,h:295},BILLBOARD04:{x:1205,y:310,w:268,h:170},DEAD_TREE2:{x:1205,y:490,w:150,h:260},BOULDER1:{x:1205,y:760,w:168,h:248},BUSH1:{x:5,y:1097,w:240,h:155},CACTUS:{x:929,y:897,w:235,h:118},BUSH2:{x:255,y:1097,w:232,h:152},BILLBOARD03:{x:5,y:1262,w:230,h:220},BILLBOARD02:{x:245,y:1262,w:215,h:220},STUMP:{x:995,y:330,w:195,h:140},SEMI:{x:1365,y:490,w:122,h:144},TRUCK:{x:1365,y:644,w:100,h:78},CAR03:{x:1383,y:760,w:88,h:55},CAR02:{x:1383,y:825,w:80,h:59},CAR04:{x:1383,y:894,w:80,h:57},CAR01:{x:1205,y:1018,w:80,h:56},PLAYER_UPHILL_LEFT:{x:1383,y:961,w:80,h:45},PLAYER_UPHILL_STRAIGHT:{x:1295,y:1018,w:80,h:45},PLAYER_UPHILL_RIGHT:{x:1385,y:1018,w:80,h:45},PLAYER_RIGHT:{x:995,y:480,w:80,h:41},PLAYER_STRAIGHT:{x:1085,y:480,w:80,h:41},PLAYER_LEFT:{x:995,y:531,w:80,h:41},COIN:{x:1395,y:1092,w:60,h:60}},T=(0,p.A)((0,p.A)({},I),{},{SCALE:1/I.PLAYER_STRAIGHT.w*.3,BILLBOARDS:[I.BILLBOARD01,I.BILLBOARD02,I.BILLBOARD03,I.BILLBOARD04,I.BILLBOARD05,I.BILLBOARD06,I.BILLBOARD07,I.BILLBOARD08,I.BILLBOARD09],PLANTS:[I.TREE1,I.TREE2,I.DEAD_TREE1,I.DEAD_TREE2,I.PALM_TREE,I.BUSH1,I.BUSH2,I.CACTUS,I.STUMP,I.BOULDER1,I.BOULDER2,I.BOULDER3],CARS:[I.CAR01,I.CAR02,I.CAR03,I.CAR04,I.SEMI,I.TRUCK]}),R={fps:60,width:720,height:960,roadWidth:2e3,segmentLength:200,rumbleLength:3,lanes:3,fieldOfView:100,cameraHeight:1e3,drawDistance:300,fogDensity:5,centrifugal:.3,skySpeed:.001,hillSpeed:.002,treeSpeed:.003,totalCars:200};class E{static timestamp(){return performance.now()}static toInt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!==e&&void 0!==e){const t=parseInt(e,10);if(!isNaN(t))return t}return t}static toFloat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!==e&&void 0!==e){const t=parseFloat(e);if(!isNaN(t))return t}return t}static limit(e,t,s){return Math.max(t,Math.min(e,s))}static randomInt(e,t){return Math.round(this.interpolate(e,t,Math.random()))}static randomChoice(e){return e[this.randomInt(0,e.length-1)]}static percentRemaining(e,t){return e%t/t}static accelerate(e,t,s){return e+t*s}static interpolate(e,t,s){return e+(t-e)*s}static easeIn(e,t,s){return e+(t-e)*Math.pow(s,2)}static easeOut(e,t,s){return e+(t-e)*(1-Math.pow(1-s,2))}static easeInOut(e,t,s){return e+(t-e)*(-Math.cos(s*Math.PI)/2+.5)}static exponentialFog(e,t){return 1/Math.pow(Math.E,e*e*t)}static increase(e,t,s){let a=e+t;for(;a>=s;)a-=s;for(;a<0;)a+=s;return a}static overlap(e,t,s,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const r=.5*n,o=.5*n;return!(e+t*r<s-a*o||e-t*r>s+a*o)}static project(e,t,s,a,n,r,o,i){e.camera.x=(e.world.x||0)-t,e.camera.y=(e.world.y||0)-s,e.camera.z=(e.world.z||0)-a,e.screen.scale=n/e.camera.z,e.screen.x=Math.round(r/2+e.screen.scale*e.camera.x*r/2),e.screen.y=Math.round(o/2-e.screen.scale*e.camera.y*o/2),e.screen.w=Math.round(e.screen.scale*i*r/2)}}Math.PI,Math.PI;class A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;this.segments=[],this.segmentLength=void 0,this.rumbleLength=void 0,this.trackLength=0,this.billboardPlacements=new Map,this.billboardImpressions=new Map,this.billboardInstances=new Map,this.nextBillboardId=0,this.segmentLength=e,this.rumbleLength=t}getSegments(){return this.segments}getTrackLength(){return this.trackLength}getBillboardPlacements(){return new Map(this.billboardPlacements)}getBillboardImpressions(){return new Map(this.billboardImpressions)}recordBillboardImpression(e,t,s,a){const n=this.billboardInstances.get(s);if(!n)return;const r=n.find(s=>s.segmentIndex===e&&Math.abs(s.offset-t)<.1);if(r&&!r.seenInLaps.has(a)){r.seenInLaps.add(a);const e=this.billboardImpressions.get(s)||0;this.billboardImpressions.set(s,e+1)}}getBillboardStats(e){const t={},s={},a={};this.billboardPlacements.forEach((s,n)=>{t[n]=s,a[n]=s*e}),this.billboardImpressions.forEach((e,t)=>{s[t]=e});const n=Math.round(.65*this.segments.length);return{placements:t,impressions:s,maxPossibleImpressions:a,trackLength:n,totalSegments:this.segments.length,totalLaps:e}}findSegment(e){return this.segments[Math.floor(e/this.segmentLength)%this.segments.length]}lastY(){return 0===this.segments.length?0:this.segments[this.segments.length-1].p2.world.y}addSegment(e,t){const s=this.segments.length;this.segments.push({index:s,p1:{world:{y:this.lastY(),z:s*this.segmentLength},camera:{x:0,y:0,z:0},screen:{x:0,y:0,w:0,scale:0}},p2:{world:{y:t,z:(s+1)*this.segmentLength},camera:{x:0,y:0,z:0},screen:{x:0,y:0,w:0,scale:0}},curve:e,sprites:[],cars:[],color:Math.floor(s/this.rumbleLength)%2?C.DARK:C.LIGHT})}addSprite(e,t,s){if(this.segments[e]){const a={source:t,offset:s},n=this.getBillboardName(t);if(n){const t="".concat(n,"_").concat(this.nextBillboardId++);a.billboardId=t,this.billboardInstances.has(n)||this.billboardInstances.set(n,[]),this.billboardInstances.get(n).push({segmentIndex:e,offset:s,seenInLaps:new Set})}this.segments[e].sprites.push(a)}}addRoad(e,t,s,a,n){const r=this.lastY(),o=r+E.toInt(n,0)*this.segmentLength,i=e+t+s;for(let l=0;l<e;l++)this.addSegment(E.easeIn(0,a,l/e),E.easeInOut(r,o,l/i));for(let l=0;l<t;l++)this.addSegment(a,E.easeInOut(r,o,(e+l)/i));for(let l=0;l<s;l++)this.addSegment(E.easeInOut(a,0,l/s),E.easeInOut(r,o,(e+t+l)/i))}addStraight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.MEDIUM;this.addRoad(e,e,e,0,0)}addHill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.MEDIUM,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.MEDIUM;this.addRoad(e,e,e,0,t)}addCurve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.MEDIUM,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.MEDIUM,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.NONE;this.addRoad(e,e,e,t,s)}addLowRollingHills(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.SHORT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.LOW;this.addRoad(e,e,e,0,t/2),this.addRoad(e,e,e,0,-t),this.addRoad(e,e,e,M.EASY,t),this.addRoad(e,e,e,0,0),this.addRoad(e,e,e,-M.EASY,t/2),this.addRoad(e,e,e,0,0)}addSCurves(){this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,-M.EASY,L.NONE),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,M.MEDIUM,L.MEDIUM),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,M.EASY,-L.LOW),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,-M.EASY,L.MEDIUM),this.addRoad(S.MEDIUM,S.MEDIUM,S.MEDIUM,-M.MEDIUM,-L.MEDIUM)}addBumps(){this.addRoad(10,10,10,0,5),this.addRoad(10,10,10,0,-2),this.addRoad(10,10,10,0,-5),this.addRoad(10,10,10,0,8),this.addRoad(10,10,10,0,5),this.addRoad(10,10,10,0,-7),this.addRoad(10,10,10,0,5),this.addRoad(10,10,10,0,-2)}addDownhillToEnd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;this.addRoad(e,e,e,-M.EASY,-this.lastY()/this.segmentLength)}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(this.segments=[],e){case 1:this.addStraight(S.LONG),this.addCurve(S.SHORT,M.EASY,L.NONE),this.addStraight(2*S.LONG),this.addCurve(S.SHORT,-M.EASY,L.NONE),this.addStraight(S.LONG),this.addHill(S.MEDIUM,L.LOW),this.addStraight(S.LONG),this.addCurve(S.MEDIUM,M.MEDIUM,L.NONE),this.addStraight(2*S.LONG),this.addCurve(S.SHORT,-M.HARD,L.NONE),this.addStraight(S.MEDIUM),this.addDownhillToEnd();break;case 2:this.addHill(S.SHORT,L.MEDIUM),this.addCurve(S.MEDIUM,M.HARD,L.HIGH),this.addHill(S.LONG,-L.MEDIUM),this.addSCurves(),this.addHill(S.MEDIUM,L.HIGH),this.addCurve(S.LONG,-M.MEDIUM,-L.LOW),this.addBumps(),this.addHill(S.LONG,L.MEDIUM),this.addCurve(S.MEDIUM,M.EASY,-L.HIGH),this.addSCurves(),this.addHill(S.SHORT,-L.MEDIUM),this.addDownhillToEnd();break;case 3:this.addStraight(S.SHORT),this.addSCurves(),this.addCurve(S.MEDIUM,M.HARD,L.NONE),this.addCurve(S.MEDIUM,-M.HARD,L.NONE),this.addSCurves(),this.addCurve(S.SHORT,M.EASY,L.LOW),this.addCurve(S.SHORT,-M.EASY,-L.LOW),this.addBumps(),this.addSCurves(),this.addCurve(S.LONG,M.MEDIUM,L.MEDIUM),this.addStraight(S.SHORT),this.addSCurves(),this.addDownhillToEnd();break;default:this.addStraight(S.SHORT),this.addLowRollingHills(),this.addSCurves(),this.addCurve(S.MEDIUM,M.MEDIUM,L.LOW),this.addBumps(),this.addLowRollingHills(),this.addCurve(2*S.LONG,M.MEDIUM,L.MEDIUM),this.addStraight(),this.addHill(S.MEDIUM,L.HIGH),this.addSCurves(),this.addCurve(S.LONG,-M.MEDIUM,L.NONE),this.addHill(S.LONG,L.HIGH),this.addCurve(S.LONG,M.MEDIUM,-L.LOW),this.addBumps(),this.addHill(S.LONG,-L.MEDIUM),this.addStraight(),this.addSCurves(),this.addDownhillToEnd()}this.resetSprites();const s=this.findSegment(t);this.segments[s.index+2].color=C.START,this.segments[s.index+3].color=C.START;for(let a=0;a<this.rumbleLength;a++)this.segments[this.segments.length-1-a].color=C.FINISH;this.trackLength=this.segments.length*this.segmentLength}resetSprites(){this.billboardPlacements.clear(),this.billboardImpressions.clear(),this.billboardInstances.clear(),this.nextBillboardId=0;for(let t=20;t<this.segments.length-50;t+=60){const e=E.randomChoice([...T.BILLBOARDS]),s=this.getBillboardName(e);if(s){const e=this.billboardPlacements.get(s)||0;this.billboardPlacements.set(s,e+1)}this.addSprite(t+E.randomInt(0,50),e,E.randomChoice([1,-1,1.1,-1.1,1.2,-1.2]));for(let a=0;a<20;a++)this.addSprite(t+E.randomInt(0,50),E.randomChoice([...T.PLANTS]),E.randomChoice([1.1,-1.1])*(1+Math.random()))}for(let t=10;t<this.segments.length;t+=3+Math.floor(t/100))this.addSprite(t,E.randomChoice([...T.PLANTS]),E.randomChoice([1,-1])*(1+5*Math.random()));for(let t=120;t<this.segments.length;t+=30+Math.floor(t/20))this.addSprite(t,T.COLUMN,E.randomChoice([1,-1])*(1+5*Math.random()));const e=[-.5,0,.5];for(let t=0;t<this.segments.length;t+=30)this.addSprite(t,T.COIN,E.randomChoice(e))}removeAllCoins(){for(const e of this.segments)e.sprites=e.sprites.filter(e=>e.source!==T.COIN)}resetCars(e,t){for(const a of this.segments)a.cars=[];const s=[];for(let a=0;a<e;a++){const e=Math.random()*E.randomChoice([-.8,.8]),a=Math.floor(Math.random()*this.segments.length)*this.segmentLength,n=E.randomChoice([...T.CARS]),r={offset:e,z:a,sprite:n,speed:t/4+Math.random()*t/(n===T.SEMI?4:2),percent:E.percentRemaining(a,this.segmentLength)};this.findSegment(r.z).cars.push(r),s.push(r)}return s}getBillboardName(e){return e===T.BILLBOARD01?"BILLBOARD01":e===T.BILLBOARD02?"BILLBOARD02":e===T.BILLBOARD03?"BILLBOARD03":e===T.BILLBOARD04?"BILLBOARD04":e===T.BILLBOARD05?"BILLBOARD05":e===T.BILLBOARD06?"BILLBOARD06":e===T.BILLBOARD07?"BILLBOARD07":e===T.BILLBOARD08?"BILLBOARD08":e===T.BILLBOARD09?"BILLBOARD09":null}}class O{constructor(e){this.maxSpeed=void 0,this.accel=void 0,this.breaking=void 0,this.decel=void 0,this.offRoadDecel=void 0,this.offRoadLimit=void 0,this.centrifugal=void 0,this.trackLength=void 0,this.maxSpeed=e.maxSpeed,this.accel=e.accel,this.breaking=e.breaking,this.decel=e.decel,this.offRoadDecel=e.offRoadDecel,this.offRoadLimit=e.offRoadLimit,this.centrifugal=e.centrifugal,this.trackLength=e.trackLength}updateTrackLength(e){this.trackLength=e}updatePlayer(e,t,s,a,n,r,o){let i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:720,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:960;const c=T.PLAYER_STRAIGHT.w*T.SCALE,d=t/this.maxSpeed,h=2*r*d;let m,u,p=0,g=!1;if(a.left?e-=h:a.right&&(e+=h),e-=h*d*n.curve*this.centrifugal,t=a.faster?E.accelerate(t,this.accel,r):a.slower?E.accelerate(t,this.breaking,r):E.accelerate(t,this.decel,r),e<-1||e>1){t>this.offRoadLimit&&(t=E.accelerate(t,this.offRoadDecel,r));for(const a of n.sprites){const r=a.source.w*T.SCALE;if(E.overlap(e,c,a.offset+r/2*(a.offset>0?1:-1),r)){t=this.maxSpeed/5,s=E.increase(n.p1.world.z,-c,this.trackLength);break}}}for(let f=n.sprites.length-1;f>=0;f--){const s=n.sprites[f];if(s.source===T.COIN){const a=s.source.w*T.SCALE;E.overlap(e,c,s.offset+a/10*(s.offset>0?1:-1),a)&&(m={x:i/2+s.offset*i*.3,y:l/2-100},n.sprites.splice(f,1),p=Math.round(t/1e3))}}for(const f of n.cars){const a=f.sprite.w*T.SCALE;if(t>f.speed&&E.overlap(e,c,f.offset,a,.6)){t=f.speed*(f.speed/t),s=E.increase(f.z,-c,this.trackLength),p=-3,g=!0,u={x:i/2+f.offset*i*.3,y:l/2-50};break}}return{playerX:e=E.limit(e,-3,3),speed:t=E.limit(t,0,this.maxSpeed),position:s,pointsEarned:p,crashed:g,coinCollected:m,crashPosition:u}}updateCars(e,t,s,a,n,r,o,i){const l=T.PLAYER_STRAIGHT.w*T.SCALE;for(const c of e){const e=o(c.z);c.z=E.increase(c.z,t*c.speed,this.trackLength),c.percent=E.percentRemaining(c.z,200),c.offset+=this.updateCarOffset(c,e,s,l,a,n,r,i);const d=o(c.z);if(e!==d){const t=e.cars.indexOf(c);-1!==t&&(e.cars.splice(t,1),d.cars.push(c))}}}updateCarOffset(e,t,s,a,n,r,o,i){const l=e.sprite.w*T.SCALE;if(t.index-s.index>o)return 0;for(let c=1;c<20;c++){const o=i[(t.index+c)%i.length];if(o===s&&e.speed>r&&E.overlap(n,a,e.offset,l,1.2)){return 1*this.calculateAvoidanceDirection(n,e.offset)/c*(e.speed-r)/this.maxSpeed}for(const t of o.cars){const s=t.sprite.w*T.SCALE;if(e.speed>t.speed&&E.overlap(e.offset,l,t.offset,s,1.2)){return 1*this.calculateAvoidanceDirection(t.offset,e.offset)/c*(e.speed-t.speed)/this.maxSpeed}}}return e.offset<-.9?.1:e.offset>.9?-.1:0}calculateAvoidanceDirection(e,t){return e>.5?-1:e<-.5||t>e?1:-1}updateScrollOffsets(e,t,s,a,n,r,o,i,l,c){const d=r-n;return{skyOffset:e=E.increase(e,i*a.curve*d/o,1),hillOffset:t=E.increase(t,l*a.curve*d/o,1),treeOffset:s=E.increase(s,c*a.curve*d/o,1)}}}class B{constructor(e,t,s){this.ctx=void 0,this.width=void 0,this.height=void 0,this.resolution=void 0,this.cameraDepth=.84,this.ctx=e,this.width=t,this.height=s,this.resolution=s/480}setCameraDepth(e){this.cameraDepth=e}updateDimensions(e,t){this.width=e,this.height=t,this.resolution=t/480}clear(){this.ctx.clearRect(0,0,this.width,this.height)}polygon(e,t,s,a,n,r,o,i,l){this.ctx.fillStyle=l,this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(s,a),this.ctx.lineTo(n,r),this.ctx.lineTo(o,i),this.ctx.closePath(),this.ctx.fill()}segment(e,t,s,a,n,r,o,i,l){const c=this.rumbleWidth(a,e),d=this.rumbleWidth(o,e),h=this.laneMarkerWidth(a,e),m=this.laneMarkerWidth(o,e);if(this.ctx.fillStyle=l.grass,this.ctx.fillRect(0,r,this.width,s-r),this.polygon(t-a-c,s,t-a,s,n-o,r,n-o-d,r,l.rumble),this.polygon(t+a+c,s,t+a,s,n+o,r,n+o+d,r,l.rumble),this.polygon(t-a,s,t+a,s,n+o,r,n-o,r,l.road),l.lane){const i=2*a/e,c=2*o/e;let d=t-a+i,u=n-o+c;for(let t=1;t<e;t++)this.polygon(d-h/2,s,d+h/2,s,u+m/2,r,u-m/2,r,l.lane),d+=i,u+=c}this.fog(0,s,this.width,r-s,i)}background(e,t,s,a){s=s||0,a=a||0;const n=t.w/2,r=t.h,o=t.x+Math.floor(t.w*s)%t.w,i=t.y,l=Math.min(n,t.w-(o-t.x)),c=r,d=Math.floor(a),h=Math.floor(this.width*(l/n)),m=this.height;this.ctx.drawImage(e,o,i,l,c,0,d,h,m),l<n&&this.ctx.drawImage(e,t.x,i,n-l,c,h-1,d,this.width-h,m)}sprite(e,t,s,a,n,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8?arguments[8]:void 0;const c=s.w*a*this.width/2*(T.SCALE*e),d=s.h*a*this.width/2*(T.SCALE*e);n+=c*o,r+=d*i;const h=l?Math.max(0,r+d-l):0;h<d&&this.ctx.drawImage(t,s.x,s.y,s.w,s.h-s.h*h/d,n,r,c,d-h)}player(e,t,s,a,n,r,o,i){const l=1.5*Math.random()*s*this.resolution*E.randomChoice([-1,1]);let c;c=o<0?i>0?T.PLAYER_UPHILL_LEFT:T.PLAYER_LEFT:o>0?i>0?T.PLAYER_UPHILL_RIGHT:T.PLAYER_RIGHT:i>0?T.PLAYER_UPHILL_STRAIGHT:T.PLAYER_STRAIGHT,this.sprite(e,t,c,a,n,r+l,-.5,-1)}fog(e,t,s,a,n){n<1&&n>.01&&(this.ctx.globalAlpha=1-n,this.ctx.fillStyle=C.FOG,this.ctx.fillRect(e,t,s,a),this.ctx.globalAlpha=1)}rumbleWidth(e,t){return e/Math.max(6,2*t)}laneMarkerWidth(e,t){return e/Math.max(32,8*t)}renderCars(e,t,s,a,n){for(let r=s-1;r>0;r--){const s=e[(t+r)%e.length];for(const e of s.cars){const t=E.interpolate(s.p1.screen.scale,s.p2.screen.scale,e.percent||0),r=E.interpolate(s.p1.screen.x,s.p2.screen.x,e.percent||0)+t*e.offset*a*this.width/2,o=E.interpolate(s.p1.screen.y,s.p2.screen.y,e.percent||0);this.sprite(a,n,e.sprite,t,r,o,-.5,-1,s.clip)}}}renderSprites(e,t,s,a,n){for(let r=s-1;r>0;r--){const s=e[(t+r)%e.length];for(const e of s.sprites){const t=s.p1.screen.scale,r=s.p1.screen.x+t*e.offset*a*this.width/2,o=s.p1.screen.y;this.sprite(a,n,e.source,t,r,o,e.offset<0?-1:0,-1,s.clip)}}}renderObjects(e,t,s,a,n,r){for(let o=s-1;o>0;o--){const s=e[(t+o)%e.length];for(const e of s.sprites){const t=s.p1.screen.scale,o=s.p1.screen.x+t*e.offset*a*this.width/2,i=s.p1.screen.y;s.clip&&s.p1.camera.z>this.cameraDepth&&i<s.clip&&r&&r(e.source,s.index,e.offset),this.sprite(a,n,e.source,t,o,i,e.offset<0?-1:0,-1,s.clip)}for(const e of s.cars){const t=E.interpolate(s.p1.screen.scale,s.p2.screen.scale,e.percent||0),r=E.interpolate(s.p1.screen.x,s.p2.screen.x,e.percent||0)+t*e.offset*a*this.width/2,o=E.interpolate(s.p1.screen.y,s.p2.screen.y,e.percent||0);this.sprite(a,n,e.sprite,t,r,o,-.5,-1,s.clip)}}}renderCoinAnimations(e,t){const s=this.ctx;s.save();for(const a of e){const e=t-a.startTime,n=Math.min(e/500,1);if(n>=1)continue;const r=1-n,o=6,i=3,l=50*n;s.globalAlpha=.8*r,s.fillStyle="#FFD700";for(let t=0;t<o;t++){const e=t/o*Math.PI*2,n=a.x+Math.cos(e)*l,r=a.y+Math.sin(e)*l;s.beginPath(),s.arc(n,r,i,0,2*Math.PI),s.fill()}s.globalAlpha=r,s.font="bold 24px Arial",s.fillStyle="#FFD700",s.strokeStyle="#000000",s.lineWidth=3;const c="+".concat(a.points," puntos"),d=a.y-30*n;s.strokeText(c,a.x-40,d),s.fillText(c,a.x-40,d)}s.restore()}renderCrashAnimations(e,t){const s=this.ctx;s.save();for(const a of e){const e=t-a.startTime,n=Math.min(e/500,1);if(n>=1)continue;const r=10*(Math.random()-.5)*(1-n),o=10*(Math.random()-.5)*(1-n),i=1-n,l=8,c=4,d=60*n;s.globalAlpha=.9*i;for(let t=0;t<l;t++){const e=t/l*Math.PI*2,i=a.x+Math.cos(e)*d+r,h=a.y+Math.sin(e)*d+o,m=t%2===0?"#FF0000":"#FF6600";s.fillStyle=m,s.beginPath(),s.arc(i,h,c*(1-.5*n),0,2*Math.PI),s.fill()}s.globalAlpha=i,s.font="bold 28px Arial",s.fillStyle="#FF0000",s.strokeStyle="#000000",s.lineWidth=4;const h="-3 puntos",m=a.x-50+r,u=a.y-20*n+o;s.strokeText(h,m,u),s.fillText(h,m,u),n<.1&&(s.globalAlpha=.5*(1-10*n),s.fillStyle="#FFFFFF",s.beginPath(),s.arc(a.x,a.y,50,0,2*Math.PI),s.fill())}s.restore()}}class P{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;this.update=e,this.render=t,this.isRunning=!1,this.animationFrameId=null,this.lastTimestamp=0,this.accumulator=0,this.targetFps=void 0,this.fixedTimeStep=void 0,this.maxFrameTime=void 0,this.frameCount=0,this.lastFpsUpdate=0,this.currentFps=0,this.loop=()=>{if(!this.isRunning)return;const e=E.timestamp();let t=(e-this.lastTimestamp)/1e3;for(t=Math.min(t,this.maxFrameTime),this.lastTimestamp=e,this.accumulator+=t;this.accumulator>=this.fixedTimeStep;)this.update(this.fixedTimeStep),this.accumulator-=this.fixedTimeStep;const s=this.accumulator/this.fixedTimeStep;this.render(s),this.updateFpsCounter(),this.animationFrameId=requestAnimationFrame(this.loop)},this.targetFps=s,this.fixedTimeStep=1/s,this.maxFrameTime=5*this.fixedTimeStep}start(){this.isRunning||(this.isRunning=!0,this.lastTimestamp=E.timestamp(),this.accumulator=0,this.loop())}stop(){this.isRunning=!1,null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}getFps(){return this.currentFps}updateFpsCounter(){this.frameCount++;const e=E.timestamp();e-this.lastFpsUpdate>=1e3&&(this.currentFps=Math.round(1e3*this.frameCount/(e-this.lastFpsUpdate)),this.frameCount=0,this.lastFpsUpdate=e)}}class U{static async loadImages(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";const a=e.map(e=>this.loadSingleImage(e,t,s));return Promise.all(a)}static loadSingleImage(e,t,s){return new Promise((a,n)=>{const r=new Image;r.onload=()=>a(r),r.onerror=()=>n(new Error("Failed to load image: ".concat(e))),r.src="default"===s?"".concat(t,"/").concat(e,".webp"):"".concat(t,"/skins/").concat(s,"/").concat(e,".webp")})}}class H{constructor(){this.keys={},this.keyHandlers=[],this.handleKeyDown=e=>{this.keys[e.keyCode]=!0,this.triggerKeyHandlers(e.keyCode,"down");[37,38,39,40].includes(e.keyCode)&&e.preventDefault()},this.handleKeyUp=e=>{this.keys[e.keyCode]=!1,this.triggerKeyHandlers(e.keyCode,"up")},this.setupKeyboardListeners()}setupKeyboardListeners(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}destroy(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}setKeyHandlers(e){this.keyHandlers=e}isKeyPressed(e){return this.keys[e]||!1}triggerKeyHandlers(e,t){for(const s of this.keyHandlers)s.mode===t&&s.keys.includes(e)&&s.action()}setupTouchControls(e){}getKeyCodeForDirection(e){switch(e){case"left":return 37;case"up":return 38;case"right":return 39;case"down":return 40;default:return 0}}}const z=()=>{if("undefined"!==typeof window){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=window.matchMedia("only screen and (max-width: 768px)").matches,s=navigator.maxTouchPoints>1;return t&&e&&s}return!1};const F=e=>{let{currentLap:t,availableLaps:s,points:a,hud:n,gameState:o}=e;const i=()=>(parseInt(n.speed||"0")||0)/100*180-90;return"playing"!==o&&"paused"!==o&&"loading"!==o?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"hud-top",children:[(0,r.jsxs)("span",{className:"hud-lap-counter",children:[(0,r.jsx)("img",{className:"hud-lap-icon",src:"/games/racing/images/flag-laps.webp",alt:"laps"}),(0,r.jsxs)("span",{className:"hud-lap-text",children:[t,"/",s]})]}),(0,r.jsxs)("span",{className:"hud-time",children:[(0,r.jsx)("img",{className:"hud-lap-icon",src:"/games/racing/images/cronometer.webp",alt:"time"}),(0,r.jsx)("span",{className:"hud-lap-text",children:n.current_lap_time})]}),(0,r.jsxs)("span",{className:"hud-score",children:[(0,r.jsx)("img",{className:"hud-lap-icon",src:"/games/racing/images/coin.webp",alt:"points"}),(0,r.jsx)("span",{className:"hud-score-value",children:a})]})]}),(0,r.jsx)("div",{className:"hud-bottom",children:(0,r.jsxs)("div",{className:"hud-speed",children:[(0,r.jsxs)("svg",{className:"hud-speedometer",viewBox:"0 0 200 200",children:[(0,r.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#444",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M 30 170 A 85 85 0 0 1 170 170",fill:"none",stroke:"#888",strokeWidth:"8"}),[0,25,50,75,100].map((e,t)=>{const s=(180*t/4-90)*(Math.PI/180),a=100+70*Math.cos(s),n=100+70*Math.sin(s),o=100+80*Math.cos(s),i=100+80*Math.sin(s);return(0,r.jsx)("line",{x1:a,y1:n,x2:o,y2:i,stroke:"#ccc",strokeWidth:"2"},e)}),(0,r.jsx)("line",{x1:"100",y1:"100",x2:100+65*Math.cos((i()-90)*(Math.PI/180)),y2:100+65*Math.sin((i()-90)*(Math.PI/180)),stroke:"#ff4444",strokeWidth:"4",strokeLinecap:"round"}),(0,r.jsx)("circle",{cx:"100",cy:"100",r:"5",fill:"#ff4444"})]}),(0,r.jsxs)("div",{className:"hud-speed-text",children:[n.speed," mph"]})]})})]})},_=e=>{let{getBillboardStats:t,isVisible:s=!1}=e;const[n,o]=(0,a.useState)(null);if((0,a.useEffect)(()=>{if(s){const e=setInterval(()=>{const e=t();e&&o(e)},1e3);return()=>clearInterval(e)}},[t,s]),!s||!n)return null;const i=Object.keys(n.placements).sort();return(0,r.jsxs)("div",{className:"billboard-stats",children:[(0,r.jsx)("h4",{className:"billboard-title",children:"Billboard Analytics"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"billboard-stat",children:[(0,r.jsx)("span",{className:"billboard-stat-label",children:"Track:"}),(0,r.jsxs)("span",{className:"billboard-stat-value",children:[n.trackLength,"m"]})]}),(0,r.jsxs)("div",{className:"billboard-stat",children:[(0,r.jsx)("span",{className:"billboard-stat-label",children:"Laps:"}),(0,r.jsx)("span",{className:"billboard-stat-value",children:n.totalLaps})]})]}),(0,r.jsxs)("table",{style:{width:"100%",fontSize:"0.75rem"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #4b5563"},children:[(0,r.jsx)("th",{style:{textAlign:"left",paddingBottom:"0.125rem"},children:"Billboard"}),(0,r.jsx)("th",{style:{textAlign:"center",paddingBottom:"0.125rem"},children:"Placed"}),(0,r.jsx)("th",{style:{textAlign:"center",paddingBottom:"0.125rem"},children:"Shown"}),(0,r.jsx)("th",{style:{textAlign:"right",paddingBottom:"0.125rem"},children:"%"})]})}),(0,r.jsx)("tbody",{children:i.map(e=>{const t=n.placements[e]||0,s=n.impressions[e]||0,a=n.maxPossibleImpressions[e]||0,o=a>0?(s/a*100).toFixed(0):"0";return(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #374151"},children:[(0,r.jsx)("td",{style:{paddingTop:"0.125rem",paddingBottom:"0.125rem",fontSize:"0.625rem"},children:e.replace("BILLBOARD","B")}),(0,r.jsx)("td",{style:{textAlign:"center",paddingTop:"0.125rem",paddingBottom:"0.125rem"},children:t}),(0,r.jsx)("td",{style:{textAlign:"center",paddingTop:"0.125rem",paddingBottom:"0.125rem"},children:s}),(0,r.jsxs)("td",{style:{textAlign:"right",paddingTop:"0.125rem",paddingBottom:"0.125rem"},children:[o,"%"]})]},e)})}),(0,r.jsx)("tfoot",{children:(0,r.jsxs)("tr",{style:{fontWeight:"bold",borderTop:"1px solid #6b7280"},children:[(0,r.jsx)("td",{style:{paddingTop:"0.25rem",fontSize:"0.75rem"},children:"TOTAL"}),(0,r.jsx)("td",{style:{textAlign:"center",paddingTop:"0.25rem"},children:Object.values(n.placements).reduce((e,t)=>e+t,0)}),(0,r.jsx)("td",{style:{textAlign:"center",paddingTop:"0.25rem"},children:Object.values(n.impressions).reduce((e,t)=>e+t,0)}),(0,r.jsxs)("td",{style:{textAlign:"right",paddingTop:"0.25rem"},children:[Object.values(n.maxPossibleImpressions).reduce((e,t)=>e+t,0)>0?(Object.values(n.impressions).reduce((e,t)=>e+t,0)/Object.values(n.maxPossibleImpressions).reduce((e,t)=>e+t,0)*100).toFixed(0):"0","%"]})]})})]}),(0,r.jsx)("div",{style:{marginTop:"0.25rem",fontSize:"0.625rem",color:"#9ca3af"},children:(0,r.jsxs)("p",{children:["% = Shown vs Max Possible (",n.totalLaps," laps)"]})})]})},G=(0,a.forwardRef)((e,t)=>{let{width:s,height:a,className:n="",onClick:o,style:i}=e;return(0,r.jsx)("div",{className:"game-canvas-container",children:(0,r.jsx)("canvas",{ref:t,width:s,height:a,onClick:o,className:"game-canvas ".concat(n),style:i})})});G.displayName="GameCanvas";const W=e=>{let{onControl:t,onControlEnd:s,showActionButton:a=!1,layout:n="dpad",actionLabel:o="A",actionIcon:i,action2Label:l="B",action2Icon:c}=e;const d="\n    font-bold text-2xl rounded-lg\n    transition-all duration-150 transform\n    hover:scale-105 active:scale-95\n    bg-gray-600 text-gray-100\n    border-2 border-gray-800\n    shadow-[inset_0_-4px_0_rgba(0,0,0,0.4),0_2px_0_rgba(255,255,255,0.2)]\n    active:shadow-[inset_0_-2px_0_rgba(0,0,0,0.4),0_1px_0_rgba(255,255,255,0.2)]\n    select-none\n  ",h={userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",WebkitTouchCallout:"none"},m=e=>(e.preventDefault(),!1);return"horizontal"===n?(0,r.jsxs)("div",{className:"flex justify-center gap-6 p-6",children:[(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onClick:()=>t("left"),onContextMenu:m,className:"".concat(d," px-8 py-4 text-3xl"),style:h,children:"\u2190"}),a&&(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("action")},onClick:()=>t("action"),onContextMenu:m,className:"".concat(d," px-8 py-4 rounded-full"),style:h,children:i||o}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onClick:()=>t("right"),onContextMenu:m,className:"".concat(d," px-8 py-4 text-3xl"),style:h,children:"\u2192"})]}):"racing"===n?(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 w-full max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("left")},onMouseDown:()=>t("left"),onMouseUp:()=>null===s||void 0===s?void 0:s("left"),onContextMenu:m,className:"".concat(d," w-16 h-16 sm:w-20 sm:h-20 text-2xl"),style:h,children:"\u2190"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("right")},onMouseDown:()=>t("right"),onMouseUp:()=>null===s||void 0===s?void 0:s("right"),onContextMenu:m,className:"".concat(d," w-16 h-16 sm:w-20 sm:h-20 text-2xl"),style:h,children:"\u2192"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("up")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("up")},onMouseDown:()=>t("up"),onMouseUp:()=>null===s||void 0===s?void 0:s("up"),onContextMenu:m,className:"".concat(d," w-16 h-12 sm:w-20 sm:h-14 text-lg bg-green-600 hover:bg-green-700"),style:h,children:i||o}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("down")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("down")},onMouseDown:()=>t("down"),onMouseUp:()=>null===s||void 0===s?void 0:s("down"),onContextMenu:m,className:"".concat(d," w-16 h-12 sm:w-20 sm:h-14 text-lg bg-red-600 hover:bg-red-700"),style:h,children:c||l})]})]}):"arrows"===n?(0,r.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"relative w-36 sm:w-48 h-36 sm:h-48",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-gray-700 opacity-30"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-full border-2 border-gray-900 shadow-inner"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("up")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("up")},onMouseDown:()=>t("up"),onMouseUp:()=>null===s||void 0===s?void 0:s("up"),onContextMenu:m,className:"".concat(d," absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-t-3xl rounded-b-lg"),style:h,children:"\u2191"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("left")},onMouseDown:()=>t("left"),onMouseUp:()=>null===s||void 0===s?void 0:s("left"),onContextMenu:m,className:"".concat(d," absolute left-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-l-3xl rounded-r-lg"),style:h,children:"\u2190"}),a&&(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("action")},onClick:()=>t("action"),onContextMenu:m,className:"".concat(d," col-start-2 row-start-2 w-12 h-12 sm:w-16 sm:h-16 rounded-full"),style:h,children:i||o}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("right")},onMouseDown:()=>t("right"),onMouseUp:()=>null===s||void 0===s?void 0:s("right"),onContextMenu:m,className:"".concat(d," absolute right-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-r-3xl rounded-l-lg"),style:h,children:"\u2192"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("down")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("down")},onMouseDown:()=>t("down"),onMouseUp:()=>null===s||void 0===s?void 0:s("down"),onContextMenu:m,className:"".concat(d," absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-b-3xl rounded-t-lg"),style:h,children:"\u2193"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"relative w-36 sm:w-48 h-36 sm:h-48",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-gray-700 opacity-30"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-full border-2 border-gray-900 shadow-inner"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("up")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("up")},onMouseDown:()=>t("up"),onMouseUp:()=>null===s||void 0===s?void 0:s("up"),onContextMenu:m,className:"".concat(d," absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-t-3xl rounded-b-lg"),style:h,children:"\u25b2"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("right")},onClick:()=>t("right"),onContextMenu:m,className:"".concat(d," absolute right-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-r-3xl rounded-l-lg"),style:h,children:"\u25b6"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("down")},onTouchEnd:e=>{e.preventDefault(),null===s||void 0===s||s("down")},onMouseDown:()=>t("down"),onMouseUp:()=>null===s||void 0===s?void 0:s("down"),onContextMenu:m,className:"".concat(d," absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-b-3xl rounded-t-lg"),style:h,children:"\u25bc"}),(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("left")},onClick:()=>t("left"),onContextMenu:m,className:"".concat(d," absolute left-0 top-1/2 transform -translate-y-1/2 w-12 h-12 sm:w-16 sm:h-16 rounded-l-3xl rounded-r-lg"),style:h,children:"\u25c0"}),a&&(0,r.jsx)("button",{onTouchStart:e=>{e.preventDefault(),t("action")},onClick:()=>t("action"),onContextMenu:m,className:"".concat(d," absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full z-10"),style:h,children:i||o})]})})},Y=e=>{let{laps:t,setPointsEarned:s,setGameOver:o,track:i=0,skin:l="default",gameTitle:c="JALO Racing",brandColor:d="#00d26a",brandLogo:h,showBillboardStats:m=!1,lang:S="en"}=e;const L=(0,n.$)(S),M=z(),C=t||3,[I,T]=(0,a.useState)(!1),{canvasRef:Y,gameState:K,currentLap:Z,points:X,hud:V,startGame:$,togglePause:q,setupTouchControls:J,handleTouchControl:Q,getBillboardStats:ee}=function(e,t,s,n,r){const o=z(),[i,l]=(0,a.useState)("loading"),c=(0,a.useRef)(i),[d,h]=(0,a.useState)(1),[m,u]=(0,a.useState)(0),[S,L]=(0,a.useState)({speed:"0",current_lap_time:"00:00:0"}),M=(0,a.useRef)([]),C=(0,a.useRef)([]);(0,a.useEffect)(()=>{c.current=i},[i]);const I=(0,a.useRef)(null),T=(0,a.useRef)(null),F=(0,a.useRef)(null),_=(0,a.useRef)(null),G=(0,a.useRef)(null),W=(0,a.useRef)(null),Y=(0,a.useRef)({position:0,speed:0,playerX:0,playerZ:0,currentLapTime:0,cars:[],skyOffset:0,hillOffset:0,treeOffset:0,background:null,sprites:null,hasRendered:!1}),K=(0,a.useRef)({left:!1,right:!1,faster:!1,slower:!1}),Z=(0,a.useRef)((0,p.A)((0,p.A)({},R),{},{cameraDepth:1/Math.tan(R.fieldOfView/2*Math.PI/180),maxSpeed:R.segmentLength/(1/R.fps*1.2),accel:0,breaking:0,decel:0,offRoadDecel:0,offRoadLimit:0,playerZ:0}));(0,a.useEffect)(()=>{const e=Z.current;e.playerZ=e.cameraHeight*e.cameraDepth,e.maxSpeed=e.segmentLength/(1/e.fps*1.2),e.accel=e.maxSpeed/5,e.breaking=-e.maxSpeed,e.decel=-e.maxSpeed/5,e.offRoadDecel=-e.maxSpeed/2,e.offRoadLimit=e.maxSpeed/4},[]);const X=(0,a.useCallback)(e=>{const t=Math.floor(e/60),s=Math.floor(e-60*t),a=Math.floor(10*(e-Math.floor(e)));return t>0&&t<10?"0".concat(t,":").concat(s<10?"0":"").concat(s,":").concat(a):t>0&&t>=10?"".concat(t,":").concat(s<10?"0":"").concat(s,":").concat(a):"00:".concat(s<10?"0":"").concat(s,":").concat(a<10?"0":"").concat(a)},[]),V=(0,a.useCallback)((e,t)=>{L(s=>s[e]!==t?(0,p.A)((0,p.A)({},s),{},{[e]:t}):s)},[]),$=(0,a.useCallback)(()=>{const e=I.current;if(!e)return;const t=Z.current;e.width=t.width,e.height=t.height;const s=e.getContext("2d");return s?(T.current=new A(t.segmentLength,t.rumbleLength),F.current=new O({maxSpeed:t.maxSpeed,accel:t.accel,breaking:t.breaking,decel:t.decel,offRoadDecel:t.offRoadDecel,offRoadLimit:t.offRoadLimit,centrifugal:t.centrifugal,trackLength:0}),_.current=new B(s,t.width,t.height),_.current.setCameraDepth(t.cameraDepth),W.current=new H,W.current.setKeyHandlers([{keys:[g,v],mode:"down",action:()=>{K.current.left=!0}},{keys:[x,y],mode:"down",action:()=>{K.current.right=!0}},{keys:[f,j],mode:"down",action:()=>{K.current.faster=!0}},{keys:[b,w],mode:"down",action:()=>{K.current.slower=!0}},{keys:[g,v],mode:"up",action:()=>{K.current.left=!1}},{keys:[x,y],mode:"up",action:()=>{K.current.right=!1}},{keys:[f,j],mode:"up",action:()=>{K.current.faster=!1}},{keys:[b,w],mode:"up",action:()=>{K.current.slower=!1}}]),!0):void 0},[]),q=(0,a.useCallback)(async()=>{try{const e=await U.loadImages(["background","sprites"],"/games/racing/images",s);return Y.current.background=e[0],Y.current.sprites=e[1],!0}catch(e){return console.error("Failed to load game assets:",e),!1}},[s]),J=(0,a.useCallback)(()=>{const e=Z.current,s=Y.current;if(s.position=0,s.speed=0,s.playerX=0,s.currentLapTime=0,s.skyOffset=0,s.hillOffset=0,s.treeOffset=0,T.current&&F.current){T.current.reset(t,e.playerZ);const a=T.current.getTrackLength();F.current.updateTrackLength(a),s.cars=T.current.resetCars(e.totalCars,e.maxSpeed)}h(1),u(0),M.current=[],C.current=[],V("speed","0"),V("current_lap_time","00:00:0")},[t,V]),Q=(0,a.useCallback)(e=>{if("playing"!==c.current)return;const t=Z.current,s=Y.current,a=F.current,n=T.current;if(!a||!n)return;const r=n.findSegment(s.position+t.playerZ),o=s.position,i=a.updatePlayer(s.playerX,s.speed,s.position,K.current,r,e,e=>n.findSegment(e),t.width,t.height);s.playerX=i.playerX,s.speed=i.speed,s.position=E.increase(s.position,e*s.speed,n.getTrackLength()),0!==i.pointsEarned&&u(e=>Math.max(e+i.pointsEarned,0)),i.coinCollected&&i.pointsEarned>0&&M.current.push({x:i.coinCollected.x,y:i.coinCollected.y,points:i.pointsEarned,startTime:Date.now()}),i.crashPosition&&i.crashed&&C.current.push({x:i.crashPosition.x,y:i.crashPosition.y,startTime:Date.now()}),a.updateCars(s.cars,e,r,s.playerX,s.speed,t.drawDistance,e=>n.findSegment(e),n.getSegments());const l=a.updateScrollOffsets(s.skyOffset,s.hillOffset,s.treeOffset,r,o,s.position,t.segmentLength,t.skySpeed,t.hillSpeed,t.treeSpeed);s.skyOffset=l.skyOffset,s.hillOffset=l.hillOffset,s.treeOffset=l.treeOffset,s.position>t.playerZ&&(s.currentLapTime&&o<t.playerZ?(h(e=>e+1),n.removeAllCoins(),s.currentLapTime=0):s.currentLapTime+=e),V("speed",String(5*Math.round(s.speed/500))),V("current_lap_time",X(s.currentLapTime))},[X,V]),ee=(0,a.useCallback)(e=>{if("playing"!==c.current)return;const t=Z.current,s=Y.current,a=_.current,n=T.current;if(!a||!n||!s.background||!s.sprites)return;a.clear();const r=n.findSegment(s.position),o=E.percentRemaining(s.position,t.segmentLength),i=n.findSegment(s.position+t.playerZ),l=E.percentRemaining(s.position+t.playerZ,t.segmentLength),h=E.interpolate(i.p1.world.y,i.p2.world.y,l);let m=0,u=-r.curve*o,p=t.height;a.background(s.background,N,s.skyOffset,a.resolution*t.skySpeed*h),a.background(s.background,k,s.hillOffset,a.resolution*t.hillSpeed*h),a.background(s.background,D,s.treeOffset,a.resolution*t.treeSpeed*h);const g=n.getSegments();for(let c=0;c<t.drawDistance;c++){const e=g[(r.index+c)%g.length];e.looped=e.index<r.index,e.fog=E.exponentialFog(c/t.drawDistance,t.fogDensity),e.clip=p,E.project(e.p1,s.playerX*t.roadWidth-m,h+t.cameraHeight,s.position-(e.looped?n.getTrackLength():0),t.cameraDepth,t.width,t.height,t.roadWidth),E.project(e.p2,s.playerX*t.roadWidth-m-u,h+t.cameraHeight,s.position-(e.looped?n.getTrackLength():0),t.cameraDepth,t.width,t.height,t.roadWidth),m+=u,u+=e.curve,e.p1.camera.z<=t.cameraDepth||e.p2.screen.y>=e.p1.screen.y||e.p2.screen.y>=p||(a.segment(t.lanes,e.p1.screen.x,e.p1.screen.y,e.p1.screen.w,e.p2.screen.x,e.p2.screen.y,e.p2.screen.w,e.fog,e.color),p=e.p1.screen.y)}a.renderObjects(g,r.index,t.drawDistance,t.roadWidth,s.sprites,(e,t,s)=>{if(n.getBillboardName){const a=n.getBillboardName(e);a&&n.recordBillboardImpression(t,s,a,d)}}),a.player(t.roadWidth,s.sprites,s.speed/t.maxSpeed,t.cameraDepth/t.playerZ,t.width/2,t.height/2-t.cameraDepth/t.playerZ*E.interpolate(i.p1.camera.y,i.p2.camera.y,l)*t.height/2,s.speed*(K.current.left?-1:K.current.right?1:0),i.p2.world.y-i.p1.world.y);const f=Date.now();a.renderCoinAnimations(M.current,f),a.renderCrashAnimations(C.current,f),M.current=M.current.filter(e=>f-e.startTime<500),C.current=C.current.filter(e=>f-e.startTime<500)},[d]),te=(0,a.useCallback)(async()=>{l("loading"),$()?await q()?(J(),G.current=new P(Q,ee,R.fps),G.current.start(),l("playing")):console.error("Failed to load game assets"):console.error("Failed to initialize game engines")},[$,q,J,Q,ee]),se=(0,a.useCallback)(()=>{var e;if("playing"===i)l("paused"),null===(e=G.current)||void 0===e||e.stop();else if("paused"===i){var t;l("playing"),null===(t=G.current)||void 0===t||t.start()}},[i]),ae=(0,a.useCallback)(()=>{var e,t;null===(e=G.current)||void 0===e||e.stop(),null===(t=W.current)||void 0===t||t.destroy(),l("gameover")},[]);(0,a.useEffect)(()=>{d>e&&(n(m),r(!0),ae())},[d,e,m,n,r,ae]);const ne=(0,a.useCallback)(e=>{W.current&&W.current.setupTouchControls(e)},[]);(0,a.useEffect)(()=>{"playing"===i&&W.current&&W.current.setupTouchControls(o)},[i,o]),(0,a.useEffect)(()=>()=>{var e,t;null===(e=G.current)||void 0===e||e.stop(),null===(t=W.current)||void 0===t||t.destroy()},[]);const re=(0,a.useCallback)((e,t)=>{switch(e){case"left":K.current.left=t;break;case"right":K.current.right=t;break;case"up":K.current.faster=t;break;case"down":K.current.slower=t}},[]),oe=(0,a.useCallback)(()=>T.current?T.current.getBillboardStats(e):null,[e]);return{canvasRef:I,gameState:i,currentLap:d,points:m,hud:S,availableLaps:e,startGame:te,togglePause:se,stopGame:ae,setupTouchControls:ne,handleTouchControl:re,getBillboardStats:oe}}(C,i,l,s,o);(0,a.useEffect)(()=>{Y.current&&(Y.current.width=720,Y.current.height=960)},[Y]),(0,a.useEffect)(()=>{M&&"playing"===K&&J(!0)},[M,K,J]);const te=(0,a.useCallback)(e=>{"playing"===K&&Q(e,!0)},[K,Q]),se=(0,a.useCallback)(e=>{Q(e,!1)},[Q]);return(0,a.useEffect)(()=>{const e=e=>{if({37:1,38:1,39:1,40:1}[e.keyCode])return e.preventDefault(),!1;!I||"Escape"!==e.key&&" "!==e.key||(e.preventDefault(),q())};return window.addEventListener("keydown",e,!1),()=>{window.removeEventListener("keydown",e,!1)}},[I,q]),(0,r.jsx)("div",{style:{width:"100%",position:"relative"},children:(0,r.jsxs)("div",{style:{width:"100%",position:"relative",display:"flex",flexDirection:"column",gap:"0.25rem",justifyContent:"center",alignItems:"center"},children:[!I&&(0,r.jsx)(u,{type:"custom",title:c,brandColor:d,onAction:async()=>{T(!0),await $()},actionText:L.games.racing.startRacing,lang:S,customContent:(0,r.jsxs)("div",{style:{marginBottom:"1rem"},children:[h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{fontSize:"0.75rem",color:"white"},children:"por:"}),(0,r.jsx)("img",{src:h,alt:"Brand Logo",style:{margin:"0 auto",width:"12rem",height:"auto",marginBottom:"1rem"}})]}),(0,r.jsx)("p",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:M?L.games.racing.useTouchControls:L.games.racing.useKeyboard}),(0,r.jsx)("div",{style:{marginTop:"0.5rem"},children:M?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#374151",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\u2190"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.turnLeft})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#374151",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\u2192"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.turnRight})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#059669",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\ud83c\udfc1"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.accelerate})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#dc2626",borderRadius:"0.25rem",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\ud83d\uded1"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.brake})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2190"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.or}),(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"A"}),(0,r.jsxs)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:["- ",L.games.racing.turnLeft]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2192"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.or}),(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"D"}),(0,r.jsxs)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:["- ",L.games.racing.turnRight]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2191"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.or}),(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"W"}),(0,r.jsxs)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:["- ",L.games.racing.accelerate]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"\u2193"}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:L.games.racing.or}),(0,r.jsx)("kbd",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",color:"white"},children:"S"}),(0,r.jsxs)("span",{style:{fontSize:"0.875rem",color:"#d1d5db"},children:["- ",L.games.racing.brake]})]})]})}),(0,r.jsx)("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"1rem"},children:L.games.racing.collectCoins})]})}),"paused"===K&&(0,r.jsx)(u,{type:"pause",title:"\u23f8\ufe0f ".concat(L.games.pause),message:L.games.racing.pressEscContinue,onAction:q,actionText:L.games.continue,brandColor:d,lang:S}),(0,r.jsxs)("div",{id:"racer",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:["gameover"===K&&(0,r.jsx)(u,{type:"gameOver",score:X,brandColor:d,lang:S}),(0,r.jsxs)("div",{style:{position:"relative",padding:0,margin:0,width:"100%",maxWidth:"360px",height:"480px",display:"gameover"===K?"none":"block",visibility:"ready"===K?"hidden":"visible"},children:[(0,r.jsx)(F,{currentLap:Z,availableLaps:C,points:X,hud:V,gameState:K}),(0,r.jsx)(G,{ref:Y,width:720,height:960,style:{backgroundColor:"#35cafa",width:"100%",height:"100%"}})]})]}),(0,r.jsx)(_,{getBillboardStats:ee,isVisible:m&&"playing"===K&&!M}),M&&"playing"===K&&(0,r.jsx)(W,{onControl:te,onControlEnd:se,layout:"racing",brandColor:d,actionIcon:"\ud83c\udfc1",action2Icon:"\ud83d\uded1"})]})})};var K=s(1568);function Z(e){let{visitor:t,setDialogText:s,setCurrentAction:o,lang:i}=e;const l=(0,n.$)(i),[c,d]=(0,a.useState)(""),[h,p]=(0,a.useState)(0),[g,f]=(0,a.useState)(!1),x=(0,a.useRef)(null);return g?(0,r.jsxs)("div",{className:"retro-page",children:[(0,r.jsx)(K.A,{currentSection:"goTo-games",onNavigate:o,lang:i}),(0,r.jsx)("div",{className:"page-content",children:(0,r.jsx)(u,{type:"custom",title:h>0?"\ud83c\udf89 ".concat(l.games.congratulations):"\ud83d\ude22 ".concat(l.games.sorry),message:h>0?(0,n.G)(l.games.wonPoints,{points:h}):l.games.tryAgain,brandColor:"#00d26a",onAction:()=>{f(!1),p(0),d("")},actionText:l.games.backToMenu,lang:i})})]}):""!==c?(0,r.jsxs)("div",{className:"retro-page",children:[(0,r.jsx)(K.A,{currentSection:"goTo-games",onNavigate:o,lang:i}),(0,r.jsx)("div",{className:"page-content game-page-content",children:(0,r.jsx)("div",{className:"game-wrapper",ref:x,children:"races"===c&&(0,r.jsx)(Y,{laps:1,track:1,setGameOver:f,setPointsEarned:p,showBillboardStats:!1,brandColor:"#ef4444",gameTitle:"MAW Racing",lang:i})})})]}):(0,r.jsxs)("div",{className:"retro-page",children:[(0,r.jsx)(K.A,{currentSection:"goTo-games",onNavigate:o,lang:i}),(0,r.jsxs)("div",{className:"page-content",children:[(0,r.jsx)("h1",{children:l.games.title}),(0,r.jsx)("div",{className:"retro-box",style:{textAlign:"center",marginBottom:"20px"},children:l.games.subtitle}),(0,r.jsx)("div",{className:"game-selector-container",children:(0,r.jsx)("div",{className:"game-selector-grid",children:(0,r.jsx)(m,{title:l.games.racing.title,icon:"\ud83c\udfce\ufe0f",gradientFrom:"#3b82f6",gradientTo:"#2563eb",onClick:()=>d("races"),description:l.games.racing.description})})})]})]})}const X=s.p+"static/media/maduro.e07b7a928b384a613dc6.webp",V=(0,a.lazy)(()=>s.e(302).then(s.bind(s,8755))),$=(0,a.lazy)(()=>Promise.all([s.e(613),s.e(987)]).then(s.bind(s,8987))),q=(0,a.lazy)(()=>Promise.all([s.e(613),s.e(408)]).then(s.bind(s,9408))),J=(0,a.lazy)(()=>Promise.all([s.e(613),s.e(223)]).then(s.bind(s,529))),Q=(0,a.lazy)(()=>Promise.all([s.e(810),s.e(613),s.e(589)]).then(s.bind(s,4589))),ee=(0,a.lazy)(()=>Promise.all([s.e(613),s.e(795)]).then(s.bind(s,795))),te=e=>{let{name:t,lang:s}=e;const o=(0,n.$)(s),i=""!==t?(0,n.G)(o.avatar.dialogues.greetingWithName,{name:t}):o.avatar.dialogues.greeting,[l,c]=(0,a.useState)(i),[d,m]=(0,a.useState)(""),[u,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[x,b]=(0,a.useState)(window.innerWidth<=540),[v,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=()=>{b(window.innerWidth<=540)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const w=e=>{m(e);const t=["goTo-about","goTo-work","goTo-contact","goTo-portfolio","goTo-games"];x&&t.includes(e)?y(!0):!x&&t.includes(e)&&f(!1)},j=(0,a.useCallback)(()=>{v&&setTimeout(()=>{p(!0),y(!1)},1e3)},[v]);return(0,a.useEffect)(()=>{const e=document.querySelector("#bgMusic");e&&(e.volume=.1)},[]),(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{id:"loader",children:(0,r.jsx)("i",{className:"spinner icon"})}),children:(0,r.jsx)("div",{className:"ui container main",children:(0,r.jsxs)("div",{className:"ui stackable grid",children:[(0,r.jsx)("div",{className:"seven wide column",children:(0,r.jsx)("div",{className:"left-side-wrapper",children:(0,r.jsx)(V,{visitor:t,dialogText:l,setDialogText:c,currentAction:d,setCurrentAction:w,onDialogComplete:j,onOpenBrowser:()=>{x?p(!0):f(!1)},lang:s})})}),(0,r.jsx)("div",{className:"nine wide column ".concat(u?"browser-open":""),children:(0,r.jsxs)("div",{className:"right-side-wrapper",children:[!x&&g&&(0,r.jsx)("div",{className:"easter-egg-container",children:(0,r.jsx)("img",{src:X,alt:"",className:"easter-egg-image"})}),(0,r.jsx)(h,{currentSection:d,onNavigate:w,onMinimize:()=>{x?p(!1):f(!0)},onOpen:()=>p(!0),isMobile:x,browserOpen:u,browserMinimized:g,lang:s,children:(()=>{const e=(0,r.jsx)("div",{id:"loader",children:(0,r.jsx)("i",{className:"spinner icon"})});switch(d){case"goTo-about":return(0,r.jsx)(a.Suspense,{fallback:e,children:(0,r.jsx)(q,{setDialogText:c,setCurrentAction:w,lang:s})});case"goTo-work":return(0,r.jsx)(a.Suspense,{fallback:e,children:(0,r.jsx)(J,{setDialogText:c,setCurrentAction:w,lang:s})});case"goTo-portfolio":return(0,r.jsx)(a.Suspense,{fallback:e,children:(0,r.jsx)(Q,{setDialogText:c,setCurrentAction:w,lang:s})});case"goTo-contact":return(0,r.jsx)(a.Suspense,{fallback:e,children:(0,r.jsx)(ee,{visitor:t,setDialogText:c,setCurrentAction:w,lang:s})});case"goTo-games":return(0,r.jsx)(a.Suspense,{fallback:e,children:(0,r.jsx)(Z,{visitor:t,setDialogText:c,setCurrentAction:w,lang:s})});default:return(0,r.jsx)(a.Suspense,{fallback:e,children:(0,r.jsx)($,{setDialogText:c,setCurrentAction:w,lang:s})})}})()})]})})]})})})}},9379:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(4705);function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){(0,a.A)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}}}]);
//# sourceMappingURL=761.35ffcd71.chunk.js.map